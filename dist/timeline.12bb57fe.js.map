{"version":3,"sources":["../static/timeline.js"],"names":["root","TL","VERSION","_originalL","debug","Bind","fn","obj","apply","arguments","trace","msg","window","console","log","jsTrace","send","TL_Error","message_key","detail","name","message","e","Error","hasOwnProperty","stack","prototype","Object","create","constructor","Util","mergeData","data_main","data_to_merge","x","call","extend","dest","sources","Array","slice","j","len","length","src","isEven","n","parseFloat","isTrue","s","String","toLowerCase","Number","findArrayNumberByUniqueID","id","array","prop","defaultVal","_n","i","data","convertUnixTime","str","_date","_months","_year","_month","_day","_time","_date_array","_date_str","ymd","time","time_array","date_array","full_array","split","concat","push","parseInt","Date","getFullYear","getMonth","getDate","setData","unique_id","unique_ID","stamp","lastId","key","isArray","objectToStringFn","toString","arrayToStringResult","subject","getRandomNumber","range","Math","floor","random","size","prefix","getRandomChar","chars","substr","randomID","ensureUniqueKey","candidate","match","similar_ids","counter","indexOf","htmlify","unhtmlify","replace","linkify","text","targets","is_touch","make_link","url","link_text","MAX_LINK_TEXT_LENGTH","substring","urlPattern","pseudoUrlPattern","emailAddressPattern","url_sans_protocol","offset","string","prechar","beforePseudo","pseudoUrl","email","unlinkify","getParamString","params","join","formatNum","num","digits","pow","round","falseFn","requestAnimFrame","timeoutDefer","callback","setTimeout","requestFn","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","context","immediate","contextEl","bind","template","value","hexToRgb","hex","css_named_colors","shorthandRegex","m","r","g","b","result","exec","rgbToHex","rgb","parts","isNaN","intToHexString","colorObjToHex","o","ratio","square","w","h","r16_9","r4_3","getObjectAttributeByIndex","index","attr","getUrlVars","vars","hash","hashes","trim","slugify","from","to","l","RegExp","charAt","maxDepth","ary","max_depth","top","bottom_idx","pad","val","findNextGreater","list","current","default_value","findNextLesser","isEmptyObject","properties","keys","p","k","parseYouTubeTime","hours","minutes","seconds","transformImageURL","base58","alpha","alphabet","base","encode","enc","encoded","remainder","decode","dec","decoded","alphabetPosition","powerOf","Zepto","undefined","$","classList","emptyArray","filter","document","elementDisplay","classCache","cssNumber","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","table","createElement","tableRow","containers","readyRE","classSelectorRE","idSelectorRE","simpleSelectorRE","class2type","zepto","camelize","uniq","tempParent","propMap","object","matches","element","selector","nodeType","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","parent","parentNode","temp","appendChild","qsa","removeChild","type","isFunction","isWindow","isDocument","DOCUMENT_NODE","isObject","isPlainObject","getPrototypeOf","likeArray","compact","item","flatten","chr","toUpperCase","dasherize","idx","classRE","maybeAddPx","defaultDisplay","nodeName","display","body","getComputedStyle","getPropertyValue","children","map","childNodes","node","fragment","html","dom","nodes","container","test","$1","innerHTML","each","Z","__proto__","isZ","init","find","ready","target","source","deep","args","shift","forEach","arg","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByClassName","getElementsByTagName","querySelectorAll","filtered","contains","funcArg","payload","setAttribute","removeAttribute","className","klass","svg","baseVal","deserializeValue","parseJSON","inArray","elem","camelCase","uuid","support","expr","elements","values","grep","JSON","parse","reduce","sort","el","readyState","addEventListener","get","toArray","remove","every","not","add","is","excludes","has","eq","first","last","$this","some","closest","collection","parents","ancestors","pluck","contents","siblings","child","empty","property","show","style","replaceWith","newContent","before","wrap","structure","func","clone","wrapAll","cloneNode","append","wrapInner","self","unwrap","hide","css","toggle","setting","prev","next","originHtml","textContent","getAttribute","removeAttr","multiple","selected","coordinates","coords","parentOffset","offsetParent","props","left","getBoundingClientRect","pageXOffset","pageYOffset","width","height","computedStyle","_","removeProperty","cssText","hasClass","addClass","cls","newName","removeClass","toggleClass","when","names","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","position","detach","dimension","dimensionProperty","documentElement","traverseNode","fun","operator","operatorIndex","inside","argType","copyByClone","nextSibling","firstChild","insertBefore","$$","_zid","isString","handlers","specialEvents","focusinSupported","focus","blur","hover","mouseenter","mouseleave","click","mousedown","mouseup","mousemove","zid","findHandlers","event","ns","matcher","matcherFor","handler","sel","eventCapture","captureSetting","del","realEvent","events","delegator","capture","set","related","relatedTarget","proxy","compatible","isImmediatePropagationStopped","_args","preventDefault","stopPropagation","removeEventListener","proxyFn","TypeError","on","unbind","off","one","returnTrue","returnFalse","ignoreProperties","eventMethods","stopImmediatePropagation","isDefaultPrevented","predicate","sourceMethod","defaultPrevented","returnValue","getPreventDefault","createProxy","originalEvent","delegate","undelegate","live","die","autoRemove","evt","currentTarget","liveFired","trigger","Event","dispatchEvent","triggerHandler","createEvent","bubbles","initEvent","jsonpID","rscript","scriptTypeRE","xmlTypeRE","jsonType","htmlType","blankRE","triggerAndReturn","eventName","triggerGlobal","settings","global","active","ajaxStart","ajaxStop","ajaxBeforeSend","xhr","beforeSend","ajaxSuccess","deferred","status","success","resolveWith","ajaxComplete","ajaxError","error","rejectWith","complete","ajaxJSONP","options","ajax","_callbackName","jsonpCallback","callbackName","script","originalCallback","responseData","abort","errorType","abortTimeout","promise","clearTimeout","head","timeout","ajaxSettings","XMLHttpRequest","accepts","json","xml","crossDomain","processData","cache","mimeToDataType","mime","appendQuery","query","serializeData","param","traditional","Deferred","$2","location","host","now","dataType","hasPlaceholder","jsonp","headers","setHeader","protocol","nativeSetHeader","setRequestHeader","mimeType","overrideMimeType","contentType","onreadystatechange","getResponseHeader","responseText","eval","responseXML","statusText","xhrFields","async","open","username","password","parseArguments","hasData","post","getJSON","load","response","escape","encodeURIComponent","serialize","scope","v","serializeArray","disabled","checked","elm","submit","__Z","nativeGetComputedStyle","pseudoElement","Class","NewClass","initialize","F","proto","superclass","statics","includes","include","Events","_tl_events","action","hasEventListeners","splice","fireEvent","listeners","fire","ua","navigator","userAgent","doc","ie","webkit","phantomjs","android23","search","mobile","orientation","msPointer","msPointerEnabled","msMaxTouchPoints","PointerEvent","pointer","pointerEnabled","maxTouchPoints","ie3d","webkit3d","WebKitCSSMatrix","gecko3d","opera3d","opera","retina","devicePixelRatio","matchMedia","touch","L_NO_TOUCH","DocumentTouch","Browser","ie9","Boolean","ielt9","firefox","android","chrome","edge","any3d","L_DISABLE_3D","mobileWebkit","mobileWebkit3d","mobileOpera","innerWidth","innerHeight","_orientation","abs","Load","loaded","isLoaded","has_loaded","urls","LoadIt","js","env","pending","pollCount","queue","styleSheets","createNode","attrs","finish","getEnv","gecko","unknown","_finish","isCSS","pendingUrls","href","rel","pollWebKit","pollGecko","onload","onerror","hasRules","sheet","cssRules","ex","TimelineConfig","title","scale","eras","event_dict","messages","errors","warnings","_ensureValidScale","title_id","_assignID","_tidyFields","addEvent","logError","addEra","DateUtil","sortByDate","getErrors","sep","validate","start_date","end_date","era_identifier","headline","isValid","defer_sort","event_id","_processDates","slide","slide_id","_makeUniqueIdentifiers","used","slug","year","d","BigDate","date_obj","dateCls","SCALE_DATE_CLASSES","slide_or_era","equal","getEarliestDate","date","isBefore","getLatestDate","dates","fillIn","group","parseGoogleSpreadsheetURL","worksheet","key_pat","url_pat","pos","tail","extractGoogleEntryData_V1","item_data","$t","media","caption","mediacaption","credit","mediacredit","thumbnail","mediathumbnail","tag","startdate","parseDate","enddate","extractGoogleEntryData_V3","clean_integer","month","day","endyear","endmonth","endday","display_date","displaydate","parseTime","endtime","bad_date","label","background","getGoogleItemExtractor","feed","entry","gsx$startdate","gsx$year","headers_V3","buildGoogleFeedURL","api_version","jsonFromGoogleURL","google_url","spreadsheet_key","googleFeedJSONtoTimelineJSON","extractGoogleEntryData_V4","column","column_name","timeline_config","row_type","extract","makeConfig","tc","ConfigFactory","fromGoogle","warn","Language","languages","en","language","code","script_path","Timeline","source_path","formatNumber","mask","token","toFixed","lang_json","fallback","getMessage","formatDate","format_name","formatJSDate","BigYear","formatBigYear","bigyear","the_year","format_list","bigdateformats","tuple","js_date","formatPeriod","fmt","formats","period_labels","utc","timezone","timezoneClip","dateformats","D","y","H","M","L","getTimezoneOffset","flags","dd","ddd","day_abbr","dddd","mm","mmm","month_abbr","mmmm","yy","yyyy","has_negative_year_modifier","hh","HH","MM","ss","t","tt","T","TT","pop","S","formatted","DATE_FORMAT_TOKENS","$0","_applyEra","era_labels","negative_year","suffix","formatted_date","original_year","labels","positive_year","lang","api","wikipedia","loading","contract_timeline","return_to_title","loading_content","expand_timeline","loading_timeline","swipe_to_navigate","unknown_read_err","invalid_url_err","invalid_url_share_required","network_err","empty_feed_err","missing_start_date_err","invalid_data_format_err","date_compare_err","invalid_scale_err","invalid_date_err","invalid_separator_error","invalid_hour_err","invalid_minute_err","invalid_second_err","invalid_fractional_err","invalid_second_fractional_err","invalid_year_err","flickr_notfound_err","flickr_invalidurl_err","imgur_invalidurl_err","twitter_invalidurl_err","twitter_load_err","twitterembed_invalidurl_err","wikipedia_load_err","youtube_invalidurl_err","spotify_invalid_url","template_value_err","invalid_rgb_err","time_scale_scale_err","axis_helper_no_options_err","axis_helper_scale_err","invalid_integer_option","month_short","full_short","full","time_short","time_no_seconds_short","time_no_minutes_short","time_no_seconds_small_date","time_milliseconds","full_long","full_long_small_date","verbose","I18NMixins","getLanguage","Easings","ease","linear","easein","easeout","easeinout","Ease","KeySpline","a","aX","CalcBezier","GetTForX","A","aA1","aA2","B","C","aT","GetSlope","aGuessT","currentSlope","currentX","easeInSpline","spline","easeInOutExpo","easeOut","sin","PI","easeOutStrong","easeIn","easeInStrong","easeOutBounce","easeInBack","easeOutBack","bounce","bouncePast","swingTo","swingFrom","elastic","spring","cos","exp","blink","blinks","pulse","pulses","wobble","sinusoidal","flicker","easings","mirror","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","Animate","animation","tlanimate","webkit_timeout","win","perf","performance","perfNow","webkitNow","msNow","mozNow","fixTs","thousand","rgbOhex","relVal","numUnit","rotate","skew","translate","unitless","lineHeight","zoom","zIndex","opacity","transform","styles","getStyle","defaultView","computed","currentStyle","filters","e1","e2","frame","timestamp","render","count","f","rest","parseTransform","by","skewx","skewy","translatex","translatey","formatTransform","toHex","c","m1","nativeTween","tween","duration","done","morpheus","diff","start","stop","end","run","delta","isFinite","jump","bezier","points","nextColor","min","getTweenVal","units","begin","els","easing","bez","originalLeft","originalTop","right","bottom","xy","unshift","unit","tmp","Point","point","_add","subtract","_subtract","divideBy","multiplyBy","distanceTo","sqrt","_round","DomMixins","animate","_el","addTo","onAdd","removeFrom","onRemove","animatePosition","ani","animator","onLoaded","setPosition","getPosition","Dom","getByClass","tagName","createText","content","createTextNode","getTranslateString","TRANSLATE_OPEN","TRANSLATE_CLOSE","_tl_pos","TRANSFORM","offsetLeft","offsetTop","testProp","TRANSITION","DomUtil","getViewportOffset","docBody","disableTextSelection","selection","_onselectstart","onselectstart","enableTextSelection","setOpacity","getScaleString","origin","preTranslateStr","scaleStr","postTranslateStr","DomEvent","addListener","_getEvent","addDoubleTapListener","originalHandler","newType","_checkMouse","attachEvent","removeListener","removeDoubleTapListener","detachEvent","err","caller","callee","cancelBubble","disableClickPropagation","Draggable","START","getWheelDelta","wheelDelta","StyleSheet","addRule","rules","_index","insertRule","_state","format","format_short","stringify","_createDateObj","_setFormat","setDateFormat","getDisplayDate","format_key","getMillisecond","getTime","other_date","isAfter","SCALES","_getDateData","hour","minute","second","millisecond","DATE_PARTS","ix","parsed","setFullYear","findBestFormat","variant","eval_array","BEST_DATEFORMATS","makeDate","that","setMilliseconds","setSeconds","setMinutes","setHours","setDate","setMonth","real_year","ISO8601_SHORT_PATTERN","ISO8601_PATTERN","parseISODate","getHours","getMinutes","getSeconds","getMilliseconds","date_parts","time_parts","second_parts","decade","century","millennium","age","epoch","era","eon","eon2","short","floored","AGE","EPOCH","ERA","EON","Floorer","a_big_year","prop_name","time_str","period","lastIndexOf","no_separators","sec_parts","frac_secs","human","cosmological","mousedrag","down","up","leave","move","touchdrag","drag_elem","move_elem","drag","enable","constraint","momentum_multiplier","dragevent","sliding","direction","pagex","pagey","new_pos","new_pos_parent","disable","_onDragStart","_onDragEnd","stopMomentum","updateConstraint","touches","screenX","screenY","targetTouches","pageX","pageY","offsetWidth","offsetHeight","_onDragMove","_momentum","pos_adjust","pos_change","swipe","swipe_direction","_animateMomentum","Swipable","snap","change","swipe_detect","MenuBar","parent_elem","button_backtostart","button_zoomin","button_zoomout","arrow","line","coverbar","grip","collapsed","menubar_default_y","_initLayout","_initEvents","toogleZoomIn","toogleZoomOut","setSticky","setColor","inverted","updateDisplay","_updateDisplay","_onButtonZoomIn","_onButtonZoomOut","_onButtonBackToStart","Message","add_to_container","message_container","loading_icon","message_class","message_icon_class","_add_to_container","updateMessage","_updateMessage","atrributes","attributes","_onMouseClick","_onRemove","MediaType","image_only","media_types","match_str","Media","YouTube","Vimeo","DailyMotion","Vine","SoundCloud","Twitter","GoogleMap","GooglePlus","Flickr","Instagram","Profile","DocumentCloud","Image","Imgur","GoogleDoc","PDF","Wikipedia","Spotify","IFrame","Storify","Blockquote","Video","Wistia","Audio","Slider","content_container","content_item","content_link","link","player","timer","load_timer","media_id","show_meta","media_loaded","credit_alternate","caption_alternate","link_target","api_key_flickr","api_key_googlemaps","api_key_embedly","credit_height","caption_height","loadMedia","loadingMessage","_loadMedia","_media","media_name","errorMessage","updateMediaDisplay","layout","maxHeight","maxWidth","_updateMediaDisplay","_getMeta","_getImageURL","getImageURL","stopMedia","_stopMedia","loadErrorDisplay","media_type","showMeta","onMediaLoaded","autolink","getMeta","updateMeta","api_url","querySelector","contentWindow","postMessage","_transformURL","createMedia","DV","showSidebar","establishMediaID","stat","sizes","marker","alt","best_size","size_label","photo","owner","realname","_content","description","_size","doc_id","image_class","setInterval","clearInterval","imgurEmbed","createIframe","author_url","author_name","mapframe","stash","frameBorder","makeGoogleMapsEmbedURL","dimensions","api_key","Streetview","determineMapMode","parseDisplayMode","display_mode","param_string","mapmode","center","regexes","streetview_params","param_defs","determineMapModeURL","url_root","root_url_regex","coords_regex","address_regex","data_regex","display_mode_regex","view","place","directions","markup","soundCoudCreated","soundCloudCreated","widget","SC","Widget","pause","user","playlist","artist","_height","_player_height","_player_width","Text","headlineHeight","addDateText","headline_class","text_content","error_text","tweet","tweet_text","tweetuser","tweet_status_temp","tweet_status_url","tweet_status_date","twttr","widgets","createTweet","conversation","linkColor","theme","mediaID","TwitterEmbed","fjs","_e","then","start_time","method","Website","createCardContent","embedly","q","_setContent","images","favicon_url","provider_name","api_language","wiki","paragraphs","page_image","text_array","pages","url_vars","youtube_loaded","hd","getPlayerState","YT","PlayerState","PLAYING","pauseVideo","Player","playerVars","enablejsapi","color","controls","fs","videoId","onReady","onPlayerReady","onStateChange","ENDED","seekTo","audio_class","source_item","_getType","mediatype","reg","ext","video_class","Slide","title_slide","scroll_container","_mediaclass","_text","_background_media","image","color_value","slide_padding_lr","skinny_size","slider_container","setActive","is_active","_updateBackgroundDisplay","getBackground","scrollToTop","getFormattedDate","date_text","text_background","content_width","content_padding_left","content_padding_right","paddingLeft","paddingRight","backgroundImage","SlideNav","icon","update","_update","StorySlider","slider_container_mask","slider_item_container","_nav","previous","slide_spacing","_slides","_swipable","preloadTimer","_message","current_id","default_bg_color","start_at_slide","slide_default_fade","dragging","trackResize","_initData","goTo","_onLoaded","_addSlide","_onSlideAdded","_onBackgroundChange","_createSlide","_createSlides","_removeSlide","_onSlideRemoved","_destroySlide","_findSlideIndex","createSlide","createSlides","destroySlide","destroySlideId","fast","displayupdate","changeBackground","_onSlideChange","showNav","preloadSlides","goToId","nav_obj","bg","bg_color","bg_color_rgb","backgroundColor","nav_pos","_layout","_updateDrawSlides","_onNavigation","_onMessageClick","_onSwipeNoDirection","slide_background","_fireMouseEvent","_loaded","latlng","layerPoint","TimeNav","slider","slider_background","marker_container_mask","marker_container","marker_item_container","timeaxis","timeaxis_background","attribution","config","has_groups","optimal_tick_width","scale_factor","marker_padding","timenav_height_min","marker_height_min","marker_width_min","zoom_sequence","_markers","_eras","has_eras","_groups","_calculated_row_height","timescale","axishelper","max_rows","animate_css","positionMarkers","_positionMarkers","_getTimeScale","TimeScale","display_width","screen_multiplier","_updateTimeScale","new_scale","_updateDrawTimeline","zoomIn","setZoomFactor","zoomOut","setZoom","level","zoom_factor","factor","_createGroups","group_labels","getGroupLabels","_createGroup","group_label","TimeGroup","_addGroup","_positionGroups","available_height","group_height","getNumberOfRows","group_rows","group_y","group_hide","setRowPosition","setAlternateRowColor","rows","_addMarker","_onMarkerClick","_onMarkerAdded","_createMarker","TimeMarker","_createMarkers","_removeMarker","_destroyMarker","getPositionInfo","setClass","setWidth","_calculateMarkerHeight","_calculateRowHeight","_calculateAvailableHeight","_calculateMinimumTimeNavHeight","getMinimumHeight","_assignRowsToMarkers","marker_height","setHeight","row","marker_y","remainder_height","_resetMarkersActive","_findMarkerIndex","_createEras","_createEra","TimeEra","_addEra","_onEraAdded","_removeEra","_destroyEra","_positionEras","era_color","createMarker","createMarkers","destroyMarker","destroyMarkerId","css_animation","_ease","_duration","getLeft","_onMarkerRemoved","_onMouseScroll","scroll_to","getPixelWidth","wheelDeltaX","wheelDeltaY","_drawTimeline","drawTicks","check_update","do_update","temp_timescale","getMajorScale","getMinorScale","positionTicks","TimeAxis","media_container","timespan","line_left","line_right","has_end_date","getEndTime","text_line_height","text_lines","timespan_content","webkitLineClamp","mtd","thumbnail_media_type","thumbnail_media","color_num","alternate","class_name","slides","_scale","_display_width","_screen_multiplier","_pixel_width","_group_labels","_positions","_pixels_per_milli","_earliest","_latest","_span_in_millis","_computeDefaultSpan","_average","_axis_helper","AxisHelper","getBestHelper","_scaled_padding","getPixelsPerTick","_computePositionInfo","getScale","_number_of_rows","time_in_millis","getTicks","major","getMajorTicks","minor","getMinorTicks","getDateFromTime","_assessGroups","groups","empty_group","_computeRowInfo","positions","rows_left","lasts_in_row","n_overlaps","pos_info","overlaps","min_overlap","n_rows","default_marker_width","end_pos","group_info","gi","max","res","row_offset","axis_helper","minor_ticks","major_ticks","dateformat_lookup","ticks","dateformat","ts_ticks","tick_elements","_createTickElements","tick_element","ticks_to_skip","skip_times","yearZero","ts_tick","tick","tick_text","no_animate","_positionTickArray","tick_array","distance","fraction_of_array","pixels_per_milli","_getTicks","option","factor_scale","first_tick_time","last_tick_time","HELPERS","setHelpers","scale_type","scales","ts","ts_scale","helpers","curr","pixels_per_tick","curr_dist","prev_dist","version","storyslider","timenav","menubar","_storyslider","_style_sheet","_timenav","_menubar","is_embed","is_full_embed","hash_bookmark","timenav_position","base_class","timenav_height","timenav_height_percentage","timenav_mobile_height_percentage","start_at_end","menubar_height","medium_size","relative_date","use_bc","map_type","ga_property_id","track_events","animator_timenav","animator_storyslider","animator_menubar","keyName","currentSlide","_getSlideIndex","lastSlide","firstSlide","goToPrev","goToNext","moment","_loadLanguage","_translateError","showMessage","goToStart","goToEnd","_getEventIndex","removeId","getData","getDataById","getSlide","getSlideById","getCurrentSlide","_calculateTimeNavHeight","display_class","menu_position","storyslider_height","ceil","_updateHashBookmark","history","replaceState","hashbookmark","setConfig","_validateOptions","_onDataLoaded","translated_errs","errs","INTEGER_PROPERTIES","opt","valid","_onTimeNavLoaded","_updateTimeNavHeightMin","initial_zoom","_onStorySliderLoaded","_onTimeNavChange","_onZoomToggle","_onColorChange","_onStorySliderNext","_onStorySliderPrevious","_onZoomIn","_onZoomOut","_onBackToStart","_initGoogleAnalytics","ga","_initAnalytics","event_","_onChange","zoom_level","script_tags"],"mappings":"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","file":"timeline.12bb57fe.js","sourceRoot":"../src","sourcesContent":["/*\n    TimelineJS - ver. 3.6.5 - 2019-05-02\n    Copyright (c) 2012-2016 Northwestern University\n    a project of the Northwestern University Knight Lab, originally created by Zach Wise\n    https://github.com/NUKnightLab/TimelineJS3\n    This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\n    If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.\n*/\n\n/* **********************************************\n     Begin TL.js\n********************************************** */\n\n/*!\n\tTL\n*/\n\n(function (root) {\n\troot.TL = {\n\t\tVERSION: '0.1',\n\t\t_originalL: root.TL\n\t};\n}(this));\n\n/*\tTL.Debug\n\tDebug mode\n================================================== */\nTL.debug = false;\n\n\n\n/*\tTL.Bind\n================================================== */\nTL.Bind = function (/*Function*/ fn, /*Object*/ obj) /*-> Object*/ {\n\treturn function () {\n\t\treturn fn.apply(obj, arguments);\n\t};\n};\n\n\n\n/* Trace (console.log)\n================================================== */\ntrace = function( msg ) {\n\tif (TL.debug) {\n\t\tif (window.console) {\n\t\t\tconsole.log(msg);\n\t\t} else if ( typeof( jsTrace ) != 'undefined' ) {\n\t\t\tjsTrace.send( msg );\n\t\t} else {\n\t\t\t//alert(msg);\n\t\t}\n\t}\n}\n\n\n/* **********************************************\n     Begin TL.Error.js\n********************************************** */\n\n/* Timeline Error class */\n\nfunction TL_Error(message_key, detail) {\n    this.name = 'TL.Error';\n    this.message = message_key || 'error';\n    this.message_key = this.message;\n    this.detail = detail || '';\n  \n    // Grab stack?\n    var e = new Error();\n    if(e.hasOwnProperty('stack')) {\n        this.stack = e.stack;\n    }\n}\n\nTL_Error.prototype = Object.create(Error.prototype);\nTL_Error.prototype.constructor = TL_Error;\n\nTL.Error = TL_Error;\n\n\n/* **********************************************\n     Begin TL.Util.js\n********************************************** */\n\n/*\tTL.Util\n\tClass of utilities\n================================================== */\n\nTL.Util = {\n\tmergeData: function(data_main, data_to_merge) {\n\t\tvar x;\n\t\tfor (x in data_to_merge) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(data_to_merge, x)) {\n\t\t\t\tdata_main[x] = data_to_merge[x];\n\t\t\t}\n\t\t}\n\t\treturn data_main;\n\t},\n\n\t// like TL.Util.mergeData but takes an arbitrarily long list of sources to merge.\n\textend: function (/*Object*/ dest) /*-> Object*/ {\t// merge src properties into dest\n\t\tvar sources = Array.prototype.slice.call(arguments, 1);\n\t\tfor (var j = 0, len = sources.length, src; j < len; j++) {\n\t\t\tsrc = sources[j] || {};\n\t\t\tTL.Util.mergeData(dest, src);\n\t\t}\n\t\treturn dest;\n\t},\n\n\tisEven: function(n) {\n\t  return n == parseFloat(n)? !(n%2) : void 0;\n\t},\n\n\tisTrue: function(s) {\n\t\tif (s == null) return false;\n\t\treturn s == true || String(s).toLowerCase() == 'true' || Number(s) == 1;\n\t},\n\n\tfindArrayNumberByUniqueID: function(id, array, prop, defaultVal) {\n\t\tvar _n = defaultVal || 0;\n\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tif (array[i].data[prop] == id) {\n\t\t\t\t_n = i;\n\t\t\t}\n\t\t};\n\n\t\treturn _n;\n\t},\n\n\tconvertUnixTime: function(str) {\n\t\tvar _date, _months, _year, _month, _day, _time, _date_array = [],\n\t\t\t_date_str = {\n\t\t\t\tymd:\"\",\n\t\t\t\ttime:\"\",\n\t\t\t\ttime_array:[],\n\t\t\t\tdate_array:[],\n\t\t\t\tfull_array:[]\n\t\t\t};\n\n\t\t_date_str.ymd = str.split(\" \")[0];\n\t\t_date_str.time = str.split(\" \")[1];\n\t\t_date_str.date_array = _date_str.ymd.split(\"-\");\n\t\t_date_str.time_array = _date_str.time.split(\":\");\n\t\t_date_str.full_array = _date_str.date_array.concat(_date_str.time_array)\n\n\t\tfor(var i = 0; i < _date_str.full_array.length; i++) {\n\t\t\t_date_array.push( parseInt(_date_str.full_array[i]) )\n\t\t}\n\n\t\t_date = new Date(_date_array[0], _date_array[1], _date_array[2], _date_array[3], _date_array[4], _date_array[5]);\n\t\t_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\t\t_year = _date.getFullYear();\n\t\t_month = _months[_date.getMonth()];\n\t\t_day = _date.getDate();\n\t\t_time = _month + ', ' + _day + ' ' + _year;\n\n\t\treturn _time;\n\t},\n\n\tsetData: function (obj, data) {\n\t\tobj.data = TL.Util.extend({}, obj.data, data);\n\t\tif (obj.data.unique_id === \"\") {\n\t\t\tobj.data.unique_id = TL.Util.unique_ID(6);\n\t\t}\n\t},\n\n\tstamp: (function () {\n\t\tvar lastId = 0, key = '_tl_id';\n\n\n\t\treturn function (/*Object*/ obj) {\n\t\t\tobj[key] = obj[key] || ++lastId;\n\t\t\treturn obj[key];\n\t\t};\n\t}()),\n\n\tisArray: (function () {\n\t    // Use compiler's own isArray when available\n\t    if (Array.isArray) {\n\t        return Array.isArray;\n\t    }\n\n\t    // Retain references to variables for performance\n\t    // optimization\n\t    var objectToStringFn = Object.prototype.toString,\n\t        arrayToStringResult = objectToStringFn.call([]);\n\n\t    return function (subject) {\n\t        return objectToStringFn.call(subject) === arrayToStringResult;\n\t    };\n\t}()),\n\n    getRandomNumber: function(range) {\n   \t\treturn Math.floor(Math.random() * range);\n   \t},\n\n\tunique_ID: function(size, prefix) {\n\n\t\tvar getRandomNumber = function(range) {\n\t\t\treturn Math.floor(Math.random() * range);\n\t\t};\n\n\t\tvar getRandomChar = function() {\n\t\t\tvar chars = \"abcdefghijklmnopqurstuvwxyz\";\n\t\t\treturn chars.substr( getRandomNumber(32), 1 );\n\t\t};\n\n\t\tvar randomID = function(size) {\n\t\t\tvar str = \"\";\n\t\t\tfor(var i = 0; i < size; i++) {\n\t\t\t\tstr += getRandomChar();\n\t\t\t}\n\t\t\treturn str;\n\t\t};\n\n\t\tif (prefix) {\n\t\t\treturn prefix + \"-\" + randomID(size);\n\t\t} else {\n\t\t\treturn \"tl-\" + randomID(size);\n\t\t}\n\t},\n\n\tensureUniqueKey: function(obj, candidate) {\n\t\tif (!candidate) { candidate = TL.Util.unique_ID(6); }\n\n\t\tif (!(candidate in obj)) { return candidate; }\n\n\t\tvar root = candidate.match(/^(.+)(-\\d+)?$/)[1];\n\t\tvar similar_ids = [];\n\t\t// get an alternative\n\t\tfor (key in obj) {\n\t\t\tif (key.match(/^(.+?)(-\\d+)?$/)[1] == root) {\n\t\t\t\tsimilar_ids.push(key);\n\t\t\t}\n\t\t}\n\t\tcandidate = root + \"-\" + (similar_ids.length + 1);\n\n\t\tfor (var counter = similar_ids.length; similar_ids.indexOf(candidate) != -1; counter++) {\n\t\t\tcandidate = root + '-' + counter;\n\t\t}\n\n\t\treturn candidate;\n\t},\n\n\n\thtmlify: function(str) {\n\t\t//if (str.match(/<\\s*p[^>]*>([^<]*)<\\s*\\/\\s*p\\s*>/)) {\n\t\tif (str.match(/<p>[\\s\\S]*?<\\/p>/)) {\n\n\t\t\treturn str;\n\t\t} else {\n\t\t\treturn \"<p>\" + str + \"</p>\";\n\t\t}\n\t},\n\n\tunhtmlify: function(str) {\n\t\tstr = str.replace(/(<[^>]*>)+/g, '');\n\t\treturn str.replace('\"', \"'\");\n\t},\n\n\t/*\t* Turns plain text links into real links\n\t================================================== */\n\tlinkify: function(text,targets,is_touch) {\n\n        var make_link = function(url, link_text, prefix) {\n            if (!prefix) {\n                prefix = \"\";\n            }\n            var MAX_LINK_TEXT_LENGTH = 30;\n            if (link_text && link_text.length > MAX_LINK_TEXT_LENGTH) {\n                link_text = link_text.substring(0,MAX_LINK_TEXT_LENGTH) + \"\\u2026\"; // unicode ellipsis\n            }\n            return prefix + \"<a class='tl-makelink' href='\" + url + \"' onclick='void(0)'>\" + link_text + \"</a>\";\n        }\n\t\t// http://, https://, ftp://\n\t\tvar urlPattern = /\\b(?:https?|ftp):\\/\\/([a-z0-9-+&@#\\/%?=~_|!:,.;]*[a-z0-9-+&@#\\/%=~_|])/gim;\n\n\t\t// www. sans http:// or https://\n\t\tvar pseudoUrlPattern = /(^|[^\\/>])(www\\.[\\S]+(\\b|$))/gim;\n\n\t\t// Email addresses\n\t\tvar emailAddressPattern = /([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+)/gim;\n\n\n\t\treturn text\n\t\t\t.replace(urlPattern, function(match, url_sans_protocol, offset, string) {\n                // Javascript doesn't support negative lookbehind assertions, so\n                // we need to handle risk of matching URLs in legit hrefs\n                if (offset > 0) {\n                    var prechar = string[offset-1];\n                    if (prechar == '\"' || prechar == \"'\" || prechar == \"=\") {\n                        return match;\n                    }\n                }\n                return make_link(match, url_sans_protocol);\n            })\n\t\t\t.replace(pseudoUrlPattern, function(match, beforePseudo, pseudoUrl, offset, string) {\n                return make_link('http://' + pseudoUrl, pseudoUrl, beforePseudo);\n            })\n\t\t\t.replace(emailAddressPattern, function(match, email, offset, string) {\n                return make_link('mailto:' + email, email);\n            });\n\t},\n\n\tunlinkify: function(text) {\n\t\tif(!text) return text;\n\t\ttext = text.replace(/<a\\b[^>]*>/i,\"\");\n\t\ttext = text.replace(/<\\/a>/i, \"\");\n\t\treturn text;\n\t},\n\n\tgetParamString: function (obj) {\n\t\tvar params = [];\n\t\tfor (var i in obj) {\n\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\tparams.push(i + '=' + obj[i]);\n\t\t\t}\n\t\t}\n\t\treturn '?' + params.join('&');\n\t},\n\n\tformatNum: function (num, digits) {\n\t\tvar pow = Math.pow(10, digits || 5);\n\t\treturn Math.round(num * pow) / pow;\n\t},\n\n\tfalseFn: function () {\n\t\treturn false;\n\t},\n\n\trequestAnimFrame: (function () {\n\t\tfunction timeoutDefer(callback) {\n\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t}\n\n\t\tvar requestFn = window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\ttimeoutDefer;\n\n\t\treturn function (callback, context, immediate, contextEl) {\n\t\t\tcallback = context ? TL.Util.bind(callback, context) : callback;\n\t\t\tif (immediate && requestFn === timeoutDefer) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\trequestFn(callback, contextEl);\n\t\t\t}\n\t\t};\n\t}()),\n\n\tbind: function (/*Function*/ fn, /*Object*/ obj) /*-> Object*/ {\n\t\treturn function () {\n\t\t\treturn fn.apply(obj, arguments);\n\t\t};\n\t},\n\n\ttemplate: function (str, data) {\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n\t\t\tvar value = data[key];\n\t\t\tif (!data.hasOwnProperty(key)) {\n\t\t\t    throw new TL.Error(\"template_value_err\", str);\n\t\t\t}\n\t\t\treturn value;\n\t\t});\n\t},\n\n\thexToRgb: function(hex) {\n\t    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        if (TL.Util.css_named_colors[hex.toLowerCase()]) {\n            hex = TL.Util.css_named_colors[hex.toLowerCase()];\n        }\n\t    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t        return r + r + g + g + b + b;\n\t    });\n\n\t    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t    return result ? {\n\t        r: parseInt(result[1], 16),\n\t        g: parseInt(result[2], 16),\n\t        b: parseInt(result[3], 16)\n\t    } : null;\n\t},\n\t// given an object with r, g, and b keys, or a string of the form 'rgb(mm,nn,ll)', return a CSS hex string including the leading '#' character\n\trgbToHex: function(rgb) {\n\t\tvar r,g,b;\n\t\tif (typeof(rgb) == 'object') {\n\t\t\tr = rgb.r;\n\t\t\tg = rgb.g;\n\t\t\tb = rgb.b;\n\t\t} else if (typeof(rgb.match) == 'function'){\n\t\t\tvar parts = rgb.match(/^rgb\\((\\d+),(\\d+),(\\d+)\\)$/);\n\t\t\tif (parts) {\n\t\t\t\tr = parts[1];\n\t\t\t\tg = parts[2];\n\t\t\t\tb = parts[3];\n\t\t\t}\n\t\t}\n\t\tif (isNaN(r) || isNaN(b) || isNaN(g)) {\n\t\t\tthrow new TL.Error(\"invalid_rgb_err\");\n\t\t}\n\t\treturn \"#\" + TL.Util.intToHexString(r) + TL.Util.intToHexString(g) + TL.Util.intToHexString(b);\n\t},\n\tcolorObjToHex: function(o) {\n\t\tvar parts = [o.r, o.g, o.b];\n\t\treturn TL.Util.rgbToHex(\"rgb(\" + parts.join(',') + \")\")\n\t},\n    css_named_colors: {\n        \"aliceblue\": \"#f0f8ff\",\n        \"antiquewhite\": \"#faebd7\",\n        \"aqua\": \"#00ffff\",\n        \"aquamarine\": \"#7fffd4\",\n        \"azure\": \"#f0ffff\",\n        \"beige\": \"#f5f5dc\",\n        \"bisque\": \"#ffe4c4\",\n        \"black\": \"#000000\",\n        \"blanchedalmond\": \"#ffebcd\",\n        \"blue\": \"#0000ff\",\n        \"blueviolet\": \"#8a2be2\",\n        \"brown\": \"#a52a2a\",\n        \"burlywood\": \"#deb887\",\n        \"cadetblue\": \"#5f9ea0\",\n        \"chartreuse\": \"#7fff00\",\n        \"chocolate\": \"#d2691e\",\n        \"coral\": \"#ff7f50\",\n        \"cornflowerblue\": \"#6495ed\",\n        \"cornsilk\": \"#fff8dc\",\n        \"crimson\": \"#dc143c\",\n        \"cyan\": \"#00ffff\",\n        \"darkblue\": \"#00008b\",\n        \"darkcyan\": \"#008b8b\",\n        \"darkgoldenrod\": \"#b8860b\",\n        \"darkgray\": \"#a9a9a9\",\n        \"darkgreen\": \"#006400\",\n        \"darkkhaki\": \"#bdb76b\",\n        \"darkmagenta\": \"#8b008b\",\n        \"darkolivegreen\": \"#556b2f\",\n        \"darkorange\": \"#ff8c00\",\n        \"darkorchid\": \"#9932cc\",\n        \"darkred\": \"#8b0000\",\n        \"darksalmon\": \"#e9967a\",\n        \"darkseagreen\": \"#8fbc8f\",\n        \"darkslateblue\": \"#483d8b\",\n        \"darkslategray\": \"#2f4f4f\",\n        \"darkturquoise\": \"#00ced1\",\n        \"darkviolet\": \"#9400d3\",\n        \"deeppink\": \"#ff1493\",\n        \"deepskyblue\": \"#00bfff\",\n        \"dimgray\": \"#696969\",\n        \"dodgerblue\": \"#1e90ff\",\n        \"firebrick\": \"#b22222\",\n        \"floralwhite\": \"#fffaf0\",\n        \"forestgreen\": \"#228b22\",\n        \"fuchsia\": \"#ff00ff\",\n        \"gainsboro\": \"#dcdcdc\",\n        \"ghostwhite\": \"#f8f8ff\",\n        \"gold\": \"#ffd700\",\n        \"goldenrod\": \"#daa520\",\n        \"gray\": \"#808080\",\n        \"green\": \"#008000\",\n        \"greenyellow\": \"#adff2f\",\n        \"honeydew\": \"#f0fff0\",\n        \"hotpink\": \"#ff69b4\",\n        \"indianred\": \"#cd5c5c\",\n        \"indigo\": \"#4b0082\",\n        \"ivory\": \"#fffff0\",\n        \"khaki\": \"#f0e68c\",\n        \"lavender\": \"#e6e6fa\",\n        \"lavenderblush\": \"#fff0f5\",\n        \"lawngreen\": \"#7cfc00\",\n        \"lemonchiffon\": \"#fffacd\",\n        \"lightblue\": \"#add8e6\",\n        \"lightcoral\": \"#f08080\",\n        \"lightcyan\": \"#e0ffff\",\n        \"lightgoldenrodyellow\": \"#fafad2\",\n        \"lightgray\": \"#d3d3d3\",\n        \"lightgreen\": \"#90ee90\",\n        \"lightpink\": \"#ffb6c1\",\n        \"lightsalmon\": \"#ffa07a\",\n        \"lightseagreen\": \"#20b2aa\",\n        \"lightskyblue\": \"#87cefa\",\n        \"lightslategray\": \"#778899\",\n        \"lightsteelblue\": \"#b0c4de\",\n        \"lightyellow\": \"#ffffe0\",\n        \"lime\": \"#00ff00\",\n        \"limegreen\": \"#32cd32\",\n        \"linen\": \"#faf0e6\",\n        \"magenta\": \"#ff00ff\",\n        \"maroon\": \"#800000\",\n        \"mediumaquamarine\": \"#66cdaa\",\n        \"mediumblue\": \"#0000cd\",\n        \"mediumorchid\": \"#ba55d3\",\n        \"mediumpurple\": \"#9370db\",\n        \"mediumseagreen\": \"#3cb371\",\n        \"mediumslateblue\": \"#7b68ee\",\n        \"mediumspringgreen\": \"#00fa9a\",\n        \"mediumturquoise\": \"#48d1cc\",\n        \"mediumvioletred\": \"#c71585\",\n        \"midnightblue\": \"#191970\",\n        \"mintcream\": \"#f5fffa\",\n        \"mistyrose\": \"#ffe4e1\",\n        \"moccasin\": \"#ffe4b5\",\n        \"navajowhite\": \"#ffdead\",\n        \"navy\": \"#000080\",\n        \"oldlace\": \"#fdf5e6\",\n        \"olive\": \"#808000\",\n        \"olivedrab\": \"#6b8e23\",\n        \"orange\": \"#ffa500\",\n        \"orangered\": \"#ff4500\",\n        \"orchid\": \"#da70d6\",\n        \"palegoldenrod\": \"#eee8aa\",\n        \"palegreen\": \"#98fb98\",\n        \"paleturquoise\": \"#afeeee\",\n        \"palevioletred\": \"#db7093\",\n        \"papayawhip\": \"#ffefd5\",\n        \"peachpuff\": \"#ffdab9\",\n        \"peru\": \"#cd853f\",\n        \"pink\": \"#ffc0cb\",\n        \"plum\": \"#dda0dd\",\n        \"powderblue\": \"#b0e0e6\",\n        \"purple\": \"#800080\",\n        \"rebeccapurple\": \"#663399\",\n        \"red\": \"#ff0000\",\n        \"rosybrown\": \"#bc8f8f\",\n        \"royalblue\": \"#4169e1\",\n        \"saddlebrown\": \"#8b4513\",\n        \"salmon\": \"#fa8072\",\n        \"sandybrown\": \"#f4a460\",\n        \"seagreen\": \"#2e8b57\",\n        \"seashell\": \"#fff5ee\",\n        \"sienna\": \"#a0522d\",\n        \"silver\": \"#c0c0c0\",\n        \"skyblue\": \"#87ceeb\",\n        \"slateblue\": \"#6a5acd\",\n        \"slategray\": \"#708090\",\n        \"snow\": \"#fffafa\",\n        \"springgreen\": \"#00ff7f\",\n        \"steelblue\": \"#4682b4\",\n        \"tan\": \"#d2b48c\",\n        \"teal\": \"#008080\",\n        \"thistle\": \"#d8bfd8\",\n        \"tomato\": \"#ff6347\",\n        \"turquoise\": \"#40e0d0\",\n        \"violet\": \"#ee82ee\",\n        \"wheat\": \"#f5deb3\",\n        \"white\": \"#ffffff\",\n        \"whitesmoke\": \"#f5f5f5\",\n        \"yellow\": \"#ffff00\",\n        \"yellowgreen\": \"#9acd32\"\n    },\n\tratio: {\n\t\tsquare: function(size) {\n\t\t\tvar s = {\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t\tif (size.w > size.h && size.h > 0) {\n\t\t\t\ts.h = size.h;\n\t\t\t\ts.w = size.h;\n\t\t\t} else {\n\t\t\t\ts.w = size.w;\n\t\t\t\ts.h = size.w;\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\n\t\tr16_9: function(size) {\n\t\t\tif (size.w !== null && size.w !== \"\") {\n\t\t\t\treturn Math.round((size.w / 16) * 9);\n\t\t\t} else if (size.h !== null && size.h !== \"\") {\n\t\t\t\treturn Math.round((size.h / 9) * 16);\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\tr4_3: function(size) {\n\t\t\tif (size.w !== null && size.w !== \"\") {\n\t\t\t\treturn Math.round((size.w / 4) * 3);\n\t\t\t} else if (size.h !== null && size.h !== \"\") {\n\t\t\t\treturn Math.round((size.h / 3) * 4);\n\t\t\t}\n\t\t}\n\t},\n\tgetObjectAttributeByIndex: function(obj, index) {\n\t\tif(typeof obj != 'undefined') {\n\t\t\tvar i = 0;\n\t\t\tfor (var attr in obj){\n\t\t\t\tif (index === i){\n\t\t\t\t\treturn obj[attr];\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\n\t},\n\tgetUrlVars: function(string) {\n\t\tvar str,\n\t\t\tvars = [],\n\t\t\thash,\n\t\t\thashes;\n\n\t\tstr = string.toString();\n\n\t\tif (str.match('&#038;')) {\n\t\t\tstr = str.replace(\"&#038;\", \"&\");\n\t\t} else if (str.match('&#38;')) {\n\t\t\tstr = str.replace(\"&#38;\", \"&\");\n\t\t} else if (str.match('&amp;')) {\n\t\t\tstr = str.replace(\"&amp;\", \"&\");\n\t\t}\n\n\t\thashes = str.slice(str.indexOf('?') + 1).split('&');\n\n\t\tfor(var i = 0; i < hashes.length; i++) {\n\t\t\thash = hashes[i].split('=');\n\t\t\tvars.push(hash[0]);\n\t\t\tvars[hash[0]] = hash[1];\n\t\t}\n\n\n\t\treturn vars;\n\t},\n    /**\n     * Remove any leading or trailing whitespace from the given string.\n     * If `str` is undefined or does not have a `replace` function, return\n     * an empty string.\n     */\n\ttrim: function(str) {\n        if (str && typeof(str.replace) == 'function') {\n            return str.replace(/^\\s+|\\s+$/g, '');\n        }\n        return \"\";\n\t},\n\n\tslugify: function(str) {\n\t\t// borrowed from http://stackoverflow.com/a/5782563/102476\n\t\tstr = TL.Util.trim(str);\n\t\tstr = str.toLowerCase();\n\n\t\t// remove accents, swap ñ for n, etc\n\t\tvar from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";\n\t\tvar to   = \"aaaaaeeeeeiiiiooooouuuunc------\";\n\t\tfor (var i=0, l=from.length ; i<l ; i++) {\n\t\tstr = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n\t\t}\n\n\t\tstr = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n\t\t.replace(/\\s+/g, '-') // collapse whitespace and replace by -\n\t\t.replace(/-+/g, '-'); // collapse dashes\n\n\t\tstr = str.replace(/^([0-9])/,'_$1');\n\t\treturn str;\n\t},\n\tmaxDepth: function(ary) {\n\t\t// given a sorted array of 2-tuples of numbers, count how many \"deep\" the items are.\n\t\t// that is, what is the maximum number of tuples that occupy any one moment\n\t\t// each tuple should also be sorted\n\t\tvar stack = [];\n\t\tvar max_depth = 0;\n\t\tfor (var i = 0; i < ary.length; i++) {\n\n\t\t\tstack.push(ary[i]);\n\t\t\tif (stack.length > 1) {\n\t\t\t\tvar top = stack[stack.length - 1]\n\t\t\t\tvar bottom_idx = -1;\n\t\t\t\tfor (var j = 0; j < stack.length - 1; j++) {\n\t\t\t\t\tif (stack[j][1] < top[0]) {\n\t\t\t\t\t\tbottom_idx = j;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (bottom_idx >= 0) {\n\t\t\t\t\tstack = stack.slice(bottom_idx + 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (stack.length > max_depth) {\n\t\t\t\tmax_depth = stack.length;\n\t\t\t}\n\t\t};\n\t\treturn max_depth;\n\t},\n\n\tpad: function (val, len) {\n\t\tval = String(val);\n\t\tlen = len || 2;\n\t\twhile (val.length < len) val = \"0\" + val;\n\t\treturn val;\n\t},\n\tintToHexString: function(i) {\n\t\treturn TL.Util.pad(parseInt(i,10).toString(16));\n\t},\n    findNextGreater: function(list, current, default_value) {\n        // given a sorted list and a current value which *might* be in the list,\n        // return the next greatest value if the current value is >= the last item in the list, return default,\n        // or if default is undefined, return input value\n        for (var i = 0; i < list.length; i++) {\n            if (current < list[i]) {\n                return list[i];\n            }\n        }\n\n        return (default_value) ? default_value : current;\n    },\n\n    findNextLesser: function(list, current, default_value) {\n        // given a sorted list and a current value which *might* be in the list,\n        // return the next lesser value if the current value is <= the last item in the list, return default,\n        // or if default is undefined, return input value\n        for (var i = list.length - 1; i >= 0; i--) {\n            if (current > list[i]) {\n                return list[i];\n            }\n        }\n\n        return (default_value) ? default_value : current;\n    },\n\n\tisEmptyObject: function(o) {\n\t\tvar properties = []\n\t\tif (Object.keys) {\n\t\t\tproperties = Object.keys(o);\n\t\t} else { // all this to support IE 8\n\t\t    for (var p in o) if (Object.prototype.hasOwnProperty.call(o,p)) properties.push(p);\n    }\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tvar k = properties[i];\n\t\t\tif (o[k] != null && typeof o[k] != \"string\") return false;\n\t\t\tif (TL.Util.trim(o[k]).length != 0) return false;\n\t\t}\n\t\treturn true;\n\t},\n\tparseYouTubeTime: function(s) {\n\t    // given a YouTube start time string in a reasonable format, reduce it to a number of seconds as an integer.\n\t\tif (typeof(s) == 'string') {\n\t\t\tparts = s.match(/^\\s*(\\d+h)?(\\d+m)?(\\d+s)?\\s*/i);\n\t\t\tif (parts) {\n\t\t\t\tvar hours = parseInt(parts[1]) || 0;\n\t\t\t\tvar minutes = parseInt(parts[2]) || 0;\n\t\t\t\tvar seconds = parseInt(parts[3]) || 0;\n\t\t\t\treturn seconds + (minutes * 60) + (hours * 60 * 60);\n\t\t\t}\n\t\t} else if (typeof(s) == 'number') {\n\t\t\treturn s;\n\t\t}\n\t\treturn 0;\n\t},\n\t/**\n\t * Try to make seamless the process of interpreting a URL to a web page which embeds an image for sharing purposes\n\t * as a direct image link. Some services have predictable transformations we can use rather than explain to people\n\t * this subtlety.\n\t */\n\ttransformImageURL: function(url) {\n\t\treturn url.replace(/(.*)www.dropbox.com\\/(.*)/, '$1dl.dropboxusercontent.com/$2')\n\t},\n\n\tbase58: (function(alpha) {\n\t    var alphabet = alpha || '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ',\n\t        base = alphabet.length;\n\t    return {\n\t        encode: function(enc) {\n\t            if(typeof enc!=='number' || enc !== parseInt(enc))\n\t                throw '\"encode\" only accepts integers.';\n\t            var encoded = '';\n\t            while(enc) {\n\t                var remainder = enc % base;\n\t                enc = Math.floor(enc / base);\n\t                encoded = alphabet[remainder].toString() + encoded;\n\t            }\n\t            return encoded;\n\t        },\n\t        decode: function(dec) {\n\t            if(typeof dec!=='string')\n\t                throw '\"decode\" only accepts strings.';\n\t            var decoded = 0;\n\t            while(dec) {\n\t                var alphabetPosition = alphabet.indexOf(dec[0]);\n\t                if (alphabetPosition < 0)\n\t                    throw '\"decode\" can\\'t find \"' + dec[0] + '\" in the alphabet: \"' + alphabet + '\"';\n\t                var powerOf = dec.length - 1;\n\t                decoded += alphabetPosition * (Math.pow(base, powerOf));\n\t                dec = dec.substring(1);\n\t            }\n\t            return decoded;\n\t        }\n\t    };\n\t})()\n\n};\n\n\n/* **********************************************\n     Begin TL.Data.js\n********************************************** */\n\n// Expects TL to be visible in scope\n\n;(function(TL){\n    /* Zepto v1.1.2-15-g59d3fe5 - zepto event ajax form ie - zeptojs.com/license */\n\n    var Zepto = (function() {\n      var undefined, key, $, classList, emptyArray = [], slice = emptyArray.slice, filter = emptyArray.filter,\n        document = window.document,\n        elementDisplay = {}, classCache = {},\n        cssNumber = { 'column-count': 1, 'columns': 1, 'font-weight': 1, 'line-height': 1,'opacity': 1, 'z-index': 1, 'zoom': 1 },\n        fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\n        singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n        tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\n        rootNodeRE = /^(?:body|html)$/i,\n        capitalRE = /([A-Z])/g,\n\n        // special attributes that should be get/set via method calls\n        methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\n\n        adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],\n        table = document.createElement('table'),\n        tableRow = document.createElement('tr'),\n        containers = {\n          'tr': document.createElement('tbody'),\n          'tbody': table, 'thead': table, 'tfoot': table,\n          'td': tableRow, 'th': tableRow,\n          '*': document.createElement('div')\n        },\n        readyRE = /complete|loaded|interactive/,\n        classSelectorRE = /^\\.([\\w-]+)$/,\n        idSelectorRE = /^#([\\w-]*)$/,\n        simpleSelectorRE = /^[\\w-]*$/,\n        class2type = {},\n        toString = class2type.toString,\n        zepto = {},\n        camelize, uniq,\n        tempParent = document.createElement('div'),\n        propMap = {\n          'tabindex': 'tabIndex',\n          'readonly': 'readOnly',\n          'for': 'htmlFor',\n          'class': 'className',\n          'maxlength': 'maxLength',\n          'cellspacing': 'cellSpacing',\n          'cellpadding': 'cellPadding',\n          'rowspan': 'rowSpan',\n          'colspan': 'colSpan',\n          'usemap': 'useMap',\n          'frameborder': 'frameBorder',\n          'contenteditable': 'contentEditable'\n        },\n        isArray = Array.isArray ||\n          function(object){ return object instanceof Array }\n\n      zepto.matches = function(element, selector) {\n        if (!selector || !element || element.nodeType !== 1) return false\n        var matchesSelector = element.webkitMatchesSelector || element.mozMatchesSelector ||\n                              element.oMatchesSelector || element.matchesSelector\n        if (matchesSelector) return matchesSelector.call(element, selector)\n        // fall back to performing a selector:\n        var match, parent = element.parentNode, temp = !parent\n        if (temp) (parent = tempParent).appendChild(element)\n        match = ~zepto.qsa(parent, selector).indexOf(element)\n        temp && tempParent.removeChild(element)\n        return match\n      }\n\n      function type(obj) {\n        return obj == null ? String(obj) :\n          class2type[toString.call(obj)] || \"object\"\n      }\n\n      function isFunction(value) { return type(value) == \"function\" }\n      function isWindow(obj)     { return obj != null && obj == obj.window }\n      function isDocument(obj)   { return obj != null && obj.nodeType == obj.DOCUMENT_NODE }\n      function isObject(obj)     { return type(obj) == \"object\" }\n      function isPlainObject(obj) {\n        return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\n      }\n      function likeArray(obj) { return typeof obj.length == 'number' }\n\n      function compact(array) { return filter.call(array, function(item){ return item != null }) }\n      function flatten(array) { return array.length > 0 ? $.fn.concat.apply([], array) : array }\n      camelize = function(str){ return str.replace(/-+(.)?/g, function(match, chr){ return chr ? chr.toUpperCase() : '' }) }\n      function dasherize(str) {\n        return str.replace(/::/g, '/')\n               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n               .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n               .replace(/_/g, '-')\n               .toLowerCase()\n      }\n      uniq = function(array){ return filter.call(array, function(item, idx){ return array.indexOf(item) == idx }) }\n\n      function classRE(name) {\n        return name in classCache ?\n          classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\n      }\n\n      function maybeAddPx(name, value) {\n        return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\n      }\n\n      function defaultDisplay(nodeName) {\n        var element, display\n        if (!elementDisplay[nodeName]) {\n          element = document.createElement(nodeName)\n          document.body.appendChild(element)\n          display = getComputedStyle(element, '').getPropertyValue(\"display\")\n          element.parentNode.removeChild(element)\n          display == \"none\" && (display = \"block\")\n          elementDisplay[nodeName] = display\n        }\n        return elementDisplay[nodeName]\n      }\n\n      function children(element) {\n        return 'children' in element ?\n          slice.call(element.children) :\n          $.map(element.childNodes, function(node){ if (node.nodeType == 1) return node })\n      }\n\n      // `$.zepto.fragment` takes a html string and an optional tag name\n      // to generate DOM nodes nodes from the given html string.\n      // The generated DOM nodes are returned as an array.\n      // This function can be overriden in plugins for example to make\n      // it compatible with browsers that don't support the DOM fully.\n      zepto.fragment = function(html, name, properties) {\n        var dom, nodes, container\n\n        // A special case optimization for a single tag\n        if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1))\n\n        if (!dom) {\n          if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\")\n          if (name === undefined) name = fragmentRE.test(html) && RegExp.$1\n          if (!(name in containers)) name = '*'\n\n          container = containers[name]\n          container.innerHTML = '' + html\n          dom = $.each(slice.call(container.childNodes), function(){\n            container.removeChild(this)\n          })\n        }\n\n        if (isPlainObject(properties)) {\n          nodes = $(dom)\n          $.each(properties, function(key, value) {\n            if (methodAttributes.indexOf(key) > -1) nodes[key](value)\n            else nodes.attr(key, value)\n          })\n        }\n\n        return dom\n      }\n\n      // `$.zepto.Z` swaps out the prototype of the given `dom` array\n      // of nodes with `$.fn` and thus supplying all the Zepto functions\n      // to the array. Note that `__proto__` is not supported on Internet\n      // Explorer. This method can be overriden in plugins.\n      zepto.Z = function(dom, selector) {\n        dom = dom || []\n        dom.__proto__ = $.fn\n        dom.selector = selector || ''\n        return dom\n      }\n\n      // `$.zepto.isZ` should return `true` if the given object is a Zepto\n      // collection. This method can be overriden in plugins.\n      zepto.isZ = function(object) {\n        return object instanceof zepto.Z\n      }\n\n      // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n      // takes a CSS selector and an optional context (and handles various\n      // special cases).\n      // This method can be overriden in plugins.\n      zepto.init = function(selector, context) {\n        var dom\n        // If nothing given, return an empty Zepto collection\n        if (!selector) return zepto.Z()\n        // Optimize for string selectors\n        else if (typeof selector == 'string') {\n          selector = selector.trim()\n          // If it's a html fragment, create nodes from it\n          // Note: In both Chrome 21 and Firefox 15, DOM error 12\n          // is thrown if the fragment doesn't begin with <\n          if (selector[0] == '<' && fragmentRE.test(selector))\n            dom = zepto.fragment(selector, RegExp.$1, context), selector = null\n          // If there's a context, create a collection on that context first, and select\n          // nodes from there\n          else if (context !== undefined) return $(context).find(selector)\n          // If it's a CSS selector, use it to select nodes.\n          else dom = zepto.qsa(document, selector)\n        }\n        // If a function is given, call it when the DOM is ready\n        else if (isFunction(selector)) return $(document).ready(selector)\n        // If a Zepto collection is given, just return it\n        else if (zepto.isZ(selector)) return selector\n        else {\n          // normalize array if an array of nodes is given\n          if (isArray(selector)) dom = compact(selector)\n          // Wrap DOM nodes.\n          else if (isObject(selector))\n            dom = [selector], selector = null\n          // If it's a html fragment, create nodes from it\n          else if (fragmentRE.test(selector))\n            dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null\n          // If there's a context, create a collection on that context first, and select\n          // nodes from there\n          else if (context !== undefined) return $(context).find(selector)\n          // And last but no least, if it's a CSS selector, use it to select nodes.\n          else dom = zepto.qsa(document, selector)\n        }\n        // create a new Zepto collection from the nodes found\n        return zepto.Z(dom, selector)\n      }\n\n      // `$` will be the base `Zepto` object. When calling this\n      // function just call `$.zepto.init, which makes the implementation\n      // details of selecting nodes and creating Zepto collections\n      // patchable in plugins.\n      $ = function(selector, context){\n        return zepto.init(selector, context)\n      }\n\n      function extend(target, source, deep) {\n        for (key in source)\n          if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\n            if (isPlainObject(source[key]) && !isPlainObject(target[key]))\n              target[key] = {}\n            if (isArray(source[key]) && !isArray(target[key]))\n              target[key] = []\n            extend(target[key], source[key], deep)\n          }\n          else if (source[key] !== undefined) target[key] = source[key]\n      }\n\n      // Copy all but undefined properties from one or more\n      // objects to the `target` object.\n      $.extend = function(target){\n        var deep, args = slice.call(arguments, 1)\n        if (typeof target == 'boolean') {\n          deep = target\n          target = args.shift()\n        }\n        args.forEach(function(arg){ extend(target, arg, deep) })\n        return target\n      }\n\n      // `$.zepto.qsa` is Zepto's CSS selector implementation which\n      // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n      // This method can be overriden in plugins.\n      zepto.qsa = function(element, selector){\n        var found,\n            maybeID = selector[0] == '#',\n            maybeClass = !maybeID && selector[0] == '.',\n            nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked\n            isSimple = simpleSelectorRE.test(nameOnly)\n        return (isDocument(element) && isSimple && maybeID) ?\n          ( (found = element.getElementById(nameOnly)) ? [found] : [] ) :\n          (element.nodeType !== 1 && element.nodeType !== 9) ? [] :\n          slice.call(\n            isSimple && !maybeID ?\n              maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\n              element.getElementsByTagName(selector) : // Or a tag\n              element.querySelectorAll(selector) // Or it's not simple, and we need to query all\n          )\n      }\n\n      function filtered(nodes, selector) {\n        return selector == null ? $(nodes) : $(nodes).filter(selector)\n      }\n\n      $.contains = function(parent, node) {\n        return parent !== node && parent.contains(node)\n      }\n\n      function funcArg(context, arg, idx, payload) {\n        return isFunction(arg) ? arg.call(context, idx, payload) : arg\n      }\n\n      function setAttribute(node, name, value) {\n        value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\n      }\n\n      // access className property while respecting SVGAnimatedString\n      function className(node, value){\n        var klass = node.className,\n            svg   = klass && klass.baseVal !== undefined\n\n        if (value === undefined) return svg ? klass.baseVal : klass\n        svg ? (klass.baseVal = value) : (node.className = value)\n      }\n\n      // \"true\"  => true\n      // \"false\" => false\n      // \"null\"  => null\n      // \"42\"    => 42\n      // \"42.5\"  => 42.5\n      // \"08\"    => \"08\"\n      // JSON    => parse if valid\n      // String  => self\n      function deserializeValue(value) {\n        var num\n        try {\n          return value ?\n            value == \"true\" ||\n            ( value == \"false\" ? false :\n              value == \"null\" ? null :\n              !/^0/.test(value) && !isNaN(num = Number(value)) ? num :\n              /^[\\[\\{]/.test(value) ? $.parseJSON(value) :\n              value )\n            : value\n        } catch(e) {\n          return value\n        }\n      }\n\n      $.type = type\n      $.isFunction = isFunction\n      $.isWindow = isWindow\n      $.isArray = isArray\n      $.isPlainObject = isPlainObject\n\n      $.isEmptyObject = function(obj) {\n        var name\n        for (name in obj) return false\n        return true\n      }\n\n      $.inArray = function(elem, array, i){\n        return emptyArray.indexOf.call(array, elem, i)\n      }\n\n      $.camelCase = camelize\n      $.trim = function(str) {\n        return str == null ? \"\" : String.prototype.trim.call(str)\n      }\n\n      // plugin compatibility\n      $.uuid = 0\n      $.support = { }\n      $.expr = { }\n\n      $.map = function(elements, callback){\n        var value, values = [], i, key\n        if (likeArray(elements))\n          for (i = 0; i < elements.length; i++) {\n            value = callback(elements[i], i)\n            if (value != null) values.push(value)\n          }\n        else\n          for (key in elements) {\n            value = callback(elements[key], key)\n            if (value != null) values.push(value)\n          }\n        return flatten(values)\n      }\n\n      $.each = function(elements, callback){\n        var i, key\n        if (likeArray(elements)) {\n          for (i = 0; i < elements.length; i++)\n            if (callback.call(elements[i], i, elements[i]) === false) return elements\n        } else {\n          for (key in elements)\n            if (callback.call(elements[key], key, elements[key]) === false) return elements\n        }\n\n        return elements\n      }\n\n      $.grep = function(elements, callback){\n        return filter.call(elements, callback)\n      }\n\n      if (window.JSON) $.parseJSON = JSON.parse\n\n      // Populate the class2type map\n      $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n        class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase()\n      })\n\n      // Define methods that will be available on all\n      // Zepto collections\n      $.fn = {\n        // Because a collection acts like an array\n        // copy over these useful array functions.\n        forEach: emptyArray.forEach,\n        reduce: emptyArray.reduce,\n        push: emptyArray.push,\n        sort: emptyArray.sort,\n        indexOf: emptyArray.indexOf,\n        concat: emptyArray.concat,\n\n        // `map` and `slice` in the jQuery API work differently\n        // from their array counterparts\n        map: function(fn){\n          return $($.map(this, function(el, i){ return fn.call(el, i, el) }))\n        },\n        slice: function(){\n          return $(slice.apply(this, arguments))\n        },\n\n        ready: function(callback){\n          // need to check if document.body exists for IE as that browser reports\n          // document ready when it hasn't yet created the body element\n          if (readyRE.test(document.readyState) && document.body) callback($)\n          else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\n          return this\n        },\n        get: function(idx){\n          return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\n        },\n        toArray: function(){ return this.get() },\n        size: function(){\n          return this.length\n        },\n        remove: function(){\n          return this.each(function(){\n            if (this.parentNode != null)\n              this.parentNode.removeChild(this)\n          })\n        },\n        each: function(callback){\n          emptyArray.every.call(this, function(el, idx){\n            return callback.call(el, idx, el) !== false\n          })\n          return this\n        },\n        filter: function(selector){\n          if (isFunction(selector)) return this.not(this.not(selector))\n          return $(filter.call(this, function(element){\n            return zepto.matches(element, selector)\n          }))\n        },\n        add: function(selector,context){\n          return $(uniq(this.concat($(selector,context))))\n        },\n        is: function(selector){\n          return this.length > 0 && zepto.matches(this[0], selector)\n        },\n        not: function(selector){\n          var nodes=[]\n          if (isFunction(selector) && selector.call !== undefined)\n            this.each(function(idx){\n              if (!selector.call(this,idx)) nodes.push(this)\n            })\n          else {\n            var excludes = typeof selector == 'string' ? this.filter(selector) :\n              (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\n            this.forEach(function(el){\n              if (excludes.indexOf(el) < 0) nodes.push(el)\n            })\n          }\n          return $(nodes)\n        },\n        has: function(selector){\n          return this.filter(function(){\n            return isObject(selector) ?\n              $.contains(this, selector) :\n              $(this).find(selector).size()\n          })\n        },\n        eq: function(idx){\n          return idx === -1 ? this.slice(idx) : this.slice(idx, + idx + 1)\n        },\n        first: function(){\n          var el = this[0]\n          return el && !isObject(el) ? el : $(el)\n        },\n        last: function(){\n          var el = this[this.length - 1]\n          return el && !isObject(el) ? el : $(el)\n        },\n        find: function(selector){\n          var result, $this = this\n          if (typeof selector == 'object')\n            result = $(selector).filter(function(){\n              var node = this\n              return emptyArray.some.call($this, function(parent){\n                return $.contains(parent, node)\n              })\n            })\n          else if (this.length == 1) result = $(zepto.qsa(this[0], selector))\n          else result = this.map(function(){ return zepto.qsa(this, selector) })\n          return result\n        },\n        closest: function(selector, context){\n          var node = this[0], collection = false\n          if (typeof selector == 'object') collection = $(selector)\n          while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector)))\n            node = node !== context && !isDocument(node) && node.parentNode\n          return $(node)\n        },\n        parents: function(selector){\n          var ancestors = [], nodes = this\n          while (nodes.length > 0)\n            nodes = $.map(nodes, function(node){\n              if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\n                ancestors.push(node)\n                return node\n              }\n            })\n          return filtered(ancestors, selector)\n        },\n        parent: function(selector){\n          return filtered(uniq(this.pluck('parentNode')), selector)\n        },\n        children: function(selector){\n          return filtered(this.map(function(){ return children(this) }), selector)\n        },\n        contents: function() {\n          return this.map(function() { return slice.call(this.childNodes) })\n        },\n        siblings: function(selector){\n          return filtered(this.map(function(i, el){\n            return filter.call(children(el.parentNode), function(child){ return child!==el })\n          }), selector)\n        },\n        empty: function(){\n          return this.each(function(){ this.innerHTML = '' })\n        },\n        // `pluck` is borrowed from Prototype.js\n        pluck: function(property){\n          return $.map(this, function(el){ return el[property] })\n        },\n        show: function(){\n          return this.each(function(){\n            this.style.display == \"none\" && (this.style.display = '')\n            if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\n              this.style.display = defaultDisplay(this.nodeName)\n          })\n        },\n        replaceWith: function(newContent){\n          return this.before(newContent).remove()\n        },\n        wrap: function(structure){\n          var func = isFunction(structure)\n          if (this[0] && !func)\n            var dom   = $(structure).get(0),\n                clone = dom.parentNode || this.length > 1\n\n          return this.each(function(index){\n            $(this).wrapAll(\n              func ? structure.call(this, index) :\n                clone ? dom.cloneNode(true) : dom\n            )\n          })\n        },\n        wrapAll: function(structure){\n          if (this[0]) {\n            $(this[0]).before(structure = $(structure))\n            var children\n            // drill down to the inmost element\n            while ((children = structure.children()).length) structure = children.first()\n            $(structure).append(this)\n          }\n          return this\n        },\n        wrapInner: function(structure){\n          var func = isFunction(structure)\n          return this.each(function(index){\n            var self = $(this), contents = self.contents(),\n                dom  = func ? structure.call(this, index) : structure\n            contents.length ? contents.wrapAll(dom) : self.append(dom)\n          })\n        },\n        unwrap: function(){\n          this.parent().each(function(){\n            $(this).replaceWith($(this).children())\n          })\n          return this\n        },\n        clone: function(){\n          return this.map(function(){ return this.cloneNode(true) })\n        },\n        hide: function(){\n          return this.css(\"display\", \"none\")\n        },\n        toggle: function(setting){\n          return this.each(function(){\n            var el = $(this)\n            ;(setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide()\n          })\n        },\n        prev: function(selector){ return $(this.pluck('previousElementSibling')).filter(selector || '*') },\n        next: function(selector){ return $(this.pluck('nextElementSibling')).filter(selector || '*') },\n        html: function(html){\n          return arguments.length === 0 ?\n            (this.length > 0 ? this[0].innerHTML : null) :\n            this.each(function(idx){\n              var originHtml = this.innerHTML\n              $(this).empty().append( funcArg(this, html, idx, originHtml) )\n            })\n        },\n        text: function(text){\n          return arguments.length === 0 ?\n            (this.length > 0 ? this[0].textContent : null) :\n            this.each(function(){ this.textContent = (text === undefined) ? '' : ''+text })\n        },\n        attr: function(name, value){\n          var result\n          return (typeof name == 'string' && value === undefined) ?\n            (this.length == 0 || this[0].nodeType !== 1 ? undefined :\n              (name == 'value' && this[0].nodeName == 'INPUT') ? this.val() :\n              (!(result = this[0].getAttribute(name)) && name in this[0]) ? this[0][name] : result\n            ) :\n            this.each(function(idx){\n              if (this.nodeType !== 1) return\n              if (isObject(name)) for (key in name) setAttribute(this, key, name[key])\n              else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\n            })\n        },\n        removeAttr: function(name){\n          return this.each(function(){ this.nodeType === 1 && setAttribute(this, name) })\n        },\n        prop: function(name, value){\n          name = propMap[name] || name\n          return (value === undefined) ?\n            (this[0] && this[0][name]) :\n            this.each(function(idx){\n              this[name] = funcArg(this, value, idx, this[name])\n            })\n        },\n        data: function(name, value){\n          var data = this.attr('data-' + name.replace(capitalRE, '-$1').toLowerCase(), value)\n          return data !== null ? deserializeValue(data) : undefined\n        },\n        val: function(value){\n          return arguments.length === 0 ?\n            (this[0] && (this[0].multiple ?\n               $(this[0]).find('option').filter(function(){ return this.selected }).pluck('value') :\n               this[0].value)\n            ) :\n            this.each(function(idx){\n              this.value = funcArg(this, value, idx, this.value)\n            })\n        },\n        offset: function(coordinates){\n          if (coordinates) return this.each(function(index){\n            var $this = $(this),\n                coords = funcArg(this, coordinates, index, $this.offset()),\n                parentOffset = $this.offsetParent().offset(),\n                props = {\n                  top:  coords.top  - parentOffset.top,\n                  left: coords.left - parentOffset.left\n                }\n\n            if ($this.css('position') == 'static') props['position'] = 'relative'\n            $this.css(props)\n          })\n          if (this.length==0) return null\n          var obj = this[0].getBoundingClientRect()\n          return {\n            left: obj.left + window.pageXOffset,\n            top: obj.top + window.pageYOffset,\n            width: Math.round(obj.width),\n            height: Math.round(obj.height)\n          }\n        },\n        css: function(property, value){\n          if (arguments.length < 2) {\n            var element = this[0], computedStyle = getComputedStyle(element, '')\n            if(!element) return\n            if (typeof property == 'string')\n              return element.style[camelize(property)] || computedStyle.getPropertyValue(property)\n            else if (isArray(property)) {\n              var props = {}\n              $.each(isArray(property) ? property: [property], function(_, prop){\n                props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\n              })\n              return props\n            }\n          }\n\n          var css = ''\n          if (type(property) == 'string') {\n            if (!value && value !== 0)\n              this.each(function(){ this.style.removeProperty(dasherize(property)) })\n            else\n              css = dasherize(property) + \":\" + maybeAddPx(property, value)\n          } else {\n            for (key in property)\n              if (!property[key] && property[key] !== 0)\n                this.each(function(){ this.style.removeProperty(dasherize(key)) })\n              else\n                css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\n          }\n\n          return this.each(function(){ this.style.cssText += ';' + css })\n        },\n        index: function(element){\n          return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])\n        },\n        hasClass: function(name){\n          if (!name) return false\n          return emptyArray.some.call(this, function(el){\n            return this.test(className(el))\n          }, classRE(name))\n        },\n        addClass: function(name){\n          if (!name) return this\n          return this.each(function(idx){\n            classList = []\n            var cls = className(this), newName = funcArg(this, name, idx, cls)\n            newName.split(/\\s+/g).forEach(function(klass){\n              if (!$(this).hasClass(klass)) classList.push(klass)\n            }, this)\n            classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\n          })\n        },\n        removeClass: function(name){\n          return this.each(function(idx){\n            if (name === undefined) return className(this, '')\n            classList = className(this)\n            funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function(klass){\n              classList = classList.replace(classRE(klass), \" \")\n            })\n            className(this, classList.trim())\n          })\n        },\n        toggleClass: function(name, when){\n          if (!name) return this\n          return this.each(function(idx){\n            var $this = $(this), names = funcArg(this, name, idx, className(this))\n            names.split(/\\s+/g).forEach(function(klass){\n              (when === undefined ? !$this.hasClass(klass) : when) ?\n                $this.addClass(klass) : $this.removeClass(klass)\n            })\n          })\n        },\n        scrollTop: function(value){\n          if (!this.length) return\n          var hasScrollTop = 'scrollTop' in this[0]\n          if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\n          return this.each(hasScrollTop ?\n            function(){ this.scrollTop = value } :\n            function(){ this.scrollTo(this.scrollX, value) })\n        },\n        scrollLeft: function(value){\n          if (!this.length) return\n          var hasScrollLeft = 'scrollLeft' in this[0]\n          if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\n          return this.each(hasScrollLeft ?\n            function(){ this.scrollLeft = value } :\n            function(){ this.scrollTo(value, this.scrollY) })\n        },\n        position: function() {\n          if (!this.length) return\n\n          var elem = this[0],\n            // Get *real* offsetParent\n            offsetParent = this.offsetParent(),\n            // Get correct offsets\n            offset       = this.offset(),\n            parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\n\n          // Subtract element margins\n          // note: when an element has margin: auto the offsetLeft and marginLeft\n          // are the same in Safari causing offset.left to incorrectly be 0\n          offset.top  -= parseFloat( $(elem).css('margin-top') ) || 0\n          offset.left -= parseFloat( $(elem).css('margin-left') ) || 0\n\n          // Add offsetParent borders\n          parentOffset.top  += parseFloat( $(offsetParent[0]).css('border-top-width') ) || 0\n          parentOffset.left += parseFloat( $(offsetParent[0]).css('border-left-width') ) || 0\n\n          // Subtract the two offsets\n          return {\n            top:  offset.top  - parentOffset.top,\n            left: offset.left - parentOffset.left\n          }\n        },\n        offsetParent: function() {\n          return this.map(function(){\n            var parent = this.offsetParent || document.body\n            while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\")\n              parent = parent.offsetParent\n            return parent\n          })\n        }\n      }\n\n      // for now\n      $.fn.detach = $.fn.remove\n\n      // Generate the `width` and `height` functions\n      ;['width', 'height'].forEach(function(dimension){\n        var dimensionProperty =\n          dimension.replace(/./, function(m){ return m[0].toUpperCase() })\n\n        $.fn[dimension] = function(value){\n          var offset, el = this[0]\n          if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :\n            isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :\n            (offset = this.offset()) && offset[dimension]\n          else return this.each(function(idx){\n            el = $(this)\n            el.css(dimension, funcArg(this, value, idx, el[dimension]()))\n          })\n        }\n      })\n\n      function traverseNode(node, fun) {\n        fun(node)\n        for (var key in node.childNodes) traverseNode(node.childNodes[key], fun)\n      }\n\n      // Generate the `after`, `prepend`, `before`, `append`,\n      // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n      adjacencyOperators.forEach(function(operator, operatorIndex) {\n        var inside = operatorIndex % 2 //=> prepend, append\n\n        $.fn[operator] = function(){\n          // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n          var argType, nodes = $.map(arguments, function(arg) {\n                argType = type(arg)\n                return argType == \"object\" || argType == \"array\" || arg == null ?\n                  arg : zepto.fragment(arg)\n              }),\n              parent, copyByClone = this.length > 1\n          if (nodes.length < 1) return this\n\n          return this.each(function(_, target){\n            parent = inside ? target : target.parentNode\n\n            // convert all methods to a \"before\" operation\n            target = operatorIndex == 0 ? target.nextSibling :\n                     operatorIndex == 1 ? target.firstChild :\n                     operatorIndex == 2 ? target :\n                     null\n\n            nodes.forEach(function(node){\n              if (copyByClone) node = node.cloneNode(true)\n              else if (!parent) return $(node).remove()\n\n              traverseNode(parent.insertBefore(node, target), function(el){\n                if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\n                   (!el.type || el.type === 'text/javascript') && !el.src)\n                  window['eval'].call(window, el.innerHTML)\n              })\n            })\n          })\n        }\n\n        // after    => insertAfter\n        // prepend  => prependTo\n        // before   => insertBefore\n        // append   => appendTo\n        $.fn[inside ? operator+'To' : 'insert'+(operatorIndex ? 'Before' : 'After')] = function(html){\n          $(html)[operator](this)\n          return this\n        }\n      })\n\n      zepto.Z.prototype = $.fn\n\n      // Export internal API functions in the `$.zepto` namespace\n      zepto.uniq = uniq\n      zepto.deserializeValue = deserializeValue\n      $.zepto = zepto\n\n      return $\n    })()\n\n    window.Zepto = Zepto\n    window.$ === undefined && (window.$ = Zepto)\n\n    ;(function($){\n      var $$ = $.zepto.qsa, _zid = 1, undefined,\n          slice = Array.prototype.slice,\n          isFunction = $.isFunction,\n          isString = function(obj){ return typeof obj == 'string' },\n          handlers = {},\n          specialEvents={},\n          focusinSupported = 'onfocusin' in window,\n          focus = { focus: 'focusin', blur: 'focusout' },\n          hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' }\n\n      specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents'\n\n      function zid(element) {\n        return element._zid || (element._zid = _zid++)\n      }\n      function findHandlers(element, event, fn, selector) {\n        event = parse(event)\n        if (event.ns) var matcher = matcherFor(event.ns)\n        return (handlers[zid(element)] || []).filter(function(handler) {\n          return handler\n            && (!event.e  || handler.e == event.e)\n            && (!event.ns || matcher.test(handler.ns))\n            && (!fn       || zid(handler.fn) === zid(fn))\n            && (!selector || handler.sel == selector)\n        })\n      }\n      function parse(event) {\n        var parts = ('' + event).split('.')\n        return {e: parts[0], ns: parts.slice(1).sort().join(' ')}\n      }\n      function matcherFor(ns) {\n        return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\n      }\n\n      function eventCapture(handler, captureSetting) {\n        return handler.del &&\n          (!focusinSupported && (handler.e in focus)) ||\n          !!captureSetting\n      }\n\n      function realEvent(type) {\n        return hover[type] || (focusinSupported && focus[type]) || type\n      }\n\n      function add(element, events, fn, data, selector, delegator, capture){\n        var id = zid(element), set = (handlers[id] || (handlers[id] = []))\n        events.split(/\\s/).forEach(function(event){\n          if (event == 'ready') return $(document).ready(fn)\n          var handler   = parse(event)\n          handler.fn    = fn\n          handler.sel   = selector\n          // emulate mouseenter, mouseleave\n          if (handler.e in hover) fn = function(e){\n            var related = e.relatedTarget\n            if (!related || (related !== this && !$.contains(this, related)))\n              return handler.fn.apply(this, arguments)\n          }\n          handler.del   = delegator\n          var callback  = delegator || fn\n          handler.proxy = function(e){\n            e = compatible(e)\n            if (e.isImmediatePropagationStopped()) return\n            e.data = data\n            var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\n            if (result === false) e.preventDefault(), e.stopPropagation()\n            return result\n          }\n          handler.i = set.length\n          set.push(handler)\n          if ('addEventListener' in element)\n            element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n        })\n      }\n      function remove(element, events, fn, selector, capture){\n        var id = zid(element)\n        ;(events || '').split(/\\s/).forEach(function(event){\n          findHandlers(element, event, fn, selector).forEach(function(handler){\n            delete handlers[id][handler.i]\n          if ('removeEventListener' in element)\n            element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n          })\n        })\n      }\n\n      $.event = { add: add, remove: remove }\n\n      $.proxy = function(fn, context) {\n        if (isFunction(fn)) {\n          var proxyFn = function(){ return fn.apply(context, arguments) }\n          proxyFn._zid = zid(fn)\n          return proxyFn\n        } else if (isString(context)) {\n          return $.proxy(fn[context], fn)\n        } else {\n          throw new TypeError(\"expected function\")\n        }\n      }\n\n      $.fn.bind = function(event, data, callback){\n        return this.on(event, data, callback)\n      }\n      $.fn.unbind = function(event, callback){\n        return this.off(event, callback)\n      }\n      $.fn.one = function(event, selector, data, callback){\n        return this.on(event, selector, data, callback, 1)\n      }\n\n      var returnTrue = function(){return true},\n          returnFalse = function(){return false},\n          ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$)/,\n          eventMethods = {\n            preventDefault: 'isDefaultPrevented',\n            stopImmediatePropagation: 'isImmediatePropagationStopped',\n            stopPropagation: 'isPropagationStopped'\n          }\n\n      function compatible(event, source) {\n        if (source || !event.isDefaultPrevented) {\n          source || (source = event)\n\n          $.each(eventMethods, function(name, predicate) {\n            var sourceMethod = source[name]\n            event[name] = function(){\n              this[predicate] = returnTrue\n              return sourceMethod && sourceMethod.apply(source, arguments)\n            }\n            event[predicate] = returnFalse\n          })\n\n          if (source.defaultPrevented !== undefined ? source.defaultPrevented :\n              'returnValue' in source ? source.returnValue === false :\n              source.getPreventDefault && source.getPreventDefault())\n            event.isDefaultPrevented = returnTrue\n        }\n        return event\n      }\n\n      function createProxy(event) {\n        var key, proxy = { originalEvent: event }\n        for (key in event)\n          if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\n\n        return compatible(proxy, event)\n      }\n\n      $.fn.delegate = function(selector, event, callback){\n        return this.on(event, selector, callback)\n      }\n      $.fn.undelegate = function(selector, event, callback){\n        return this.off(event, selector, callback)\n      }\n\n      $.fn.live = function(event, callback){\n        $(document.body).delegate(this.selector, event, callback)\n        return this\n      }\n      $.fn.die = function(event, callback){\n        $(document.body).undelegate(this.selector, event, callback)\n        return this\n      }\n\n      $.fn.on = function(event, selector, data, callback, one){\n        var autoRemove, delegator, $this = this\n        if (event && !isString(event)) {\n          $.each(event, function(type, fn){\n            $this.on(type, selector, data, fn, one)\n          })\n          return $this\n        }\n\n        if (!isString(selector) && !isFunction(callback) && callback !== false)\n          callback = data, data = selector, selector = undefined\n        if (isFunction(data) || data === false)\n          callback = data, data = undefined\n\n        if (callback === false) callback = returnFalse\n\n        return $this.each(function(_, element){\n          if (one) autoRemove = function(e){\n            remove(element, e.type, callback)\n            return callback.apply(this, arguments)\n          }\n\n          if (selector) delegator = function(e){\n            var evt, match = $(e.target).closest(selector, element).get(0)\n            if (match && match !== element) {\n              evt = $.extend(createProxy(e), {currentTarget: match, liveFired: element})\n              return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\n            }\n          }\n\n          add(element, event, callback, data, selector, delegator || autoRemove)\n        })\n      }\n      $.fn.off = function(event, selector, callback){\n        var $this = this\n        if (event && !isString(event)) {\n          $.each(event, function(type, fn){\n            $this.off(type, selector, fn)\n          })\n          return $this\n        }\n\n        if (!isString(selector) && !isFunction(callback) && callback !== false)\n          callback = selector, selector = undefined\n\n        if (callback === false) callback = returnFalse\n\n        return $this.each(function(){\n          remove(this, event, callback, selector)\n        })\n      }\n\n      $.fn.trigger = function(event, args){\n        event = (isString(event) || $.isPlainObject(event)) ? $.Event(event) : compatible(event)\n        event._args = args\n        return this.each(function(){\n          // items in the collection might not be DOM elements\n          if('dispatchEvent' in this) this.dispatchEvent(event)\n          else $(this).triggerHandler(event, args)\n        })\n      }\n\n      // triggers event handlers on current element just as if an event occurred,\n      // doesn't trigger an actual event, doesn't bubble\n      $.fn.triggerHandler = function(event, args){\n        var e, result\n        this.each(function(i, element){\n          e = createProxy(isString(event) ? $.Event(event) : event)\n          e._args = args\n          e.target = element\n          $.each(findHandlers(element, event.type || event), function(i, handler){\n            result = handler.proxy(e)\n            if (e.isImmediatePropagationStopped()) return false\n          })\n        })\n        return result\n      }\n\n      // shortcut methods for `.bind(event, fn)` for each event type\n      ;('focusin focusout load resize scroll unload click dblclick '+\n      'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave '+\n      'change select keydown keypress keyup error').split(' ').forEach(function(event) {\n        $.fn[event] = function(callback) {\n          return callback ?\n            this.bind(event, callback) :\n            this.trigger(event)\n        }\n      })\n\n      ;['focus', 'blur'].forEach(function(name) {\n        $.fn[name] = function(callback) {\n          if (callback) this.bind(name, callback)\n          else this.each(function(){\n            try { this[name]() }\n            catch(e) {}\n          })\n          return this\n        }\n      })\n\n      $.Event = function(type, props) {\n        if (!isString(type)) props = type, type = props.type\n        var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\n        if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\n        event.initEvent(type, bubbles, true)\n        return compatible(event)\n      }\n\n    })(Zepto)\n\n    ;(function($){\n      var jsonpID = 0,\n          document = window.document,\n          key,\n          name,\n          rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n          scriptTypeRE = /^(?:text|application)\\/javascript/i,\n          xmlTypeRE = /^(?:text|application)\\/xml/i,\n          jsonType = 'application/json',\n          htmlType = 'text/html',\n          blankRE = /^\\s*$/\n\n      // trigger a custom event and return false if it was cancelled\n      function triggerAndReturn(context, eventName, data) {\n        var event = $.Event(eventName)\n        $(context).trigger(event, data)\n        return !event.isDefaultPrevented()\n      }\n\n      // trigger an Ajax \"global\" event\n      function triggerGlobal(settings, context, eventName, data) {\n        if (settings.global) return triggerAndReturn(context || document, eventName, data)\n      }\n\n      // Number of active Ajax requests\n      $.active = 0\n\n      function ajaxStart(settings) {\n        if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n      }\n      function ajaxStop(settings) {\n        if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')\n      }\n\n      // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n      function ajaxBeforeSend(xhr, settings) {\n        var context = settings.context\n        if (settings.beforeSend.call(context, xhr, settings) === false ||\n            triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n          return false\n\n        triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n      }\n      function ajaxSuccess(data, xhr, settings, deferred) {\n        var context = settings.context, status = 'success'\n        settings.success.call(context, data, status, xhr)\n        if (deferred) deferred.resolveWith(context, [data, status, xhr])\n        triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n        ajaxComplete(status, xhr, settings)\n      }\n      // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n      function ajaxError(error, type, xhr, settings, deferred) {\n        var context = settings.context\n        settings.error.call(context, xhr, type, error)\n        if (deferred) deferred.rejectWith(context, [xhr, type, error])\n        triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])\n        ajaxComplete(type, xhr, settings)\n      }\n      // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n      function ajaxComplete(status, xhr, settings) {\n        var context = settings.context\n        settings.complete.call(context, xhr, status)\n        triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n        ajaxStop(settings)\n      }\n\n      // Empty function, used as default callback\n      function empty() {}\n\n      $.ajaxJSONP = function(options, deferred){\n        if (!('type' in options)) return $.ajax(options)\n\n        var _callbackName = options.jsonpCallback,\n          callbackName = ($.isFunction(_callbackName) ?\n            _callbackName() : _callbackName) || ('jsonp' + (++jsonpID)),\n          script = document.createElement('script'),\n          originalCallback = window[callbackName],\n          responseData,\n          abort = function(errorType) {\n            $(script).triggerHandler('error', errorType || 'abort')\n          },\n          xhr = { abort: abort }, abortTimeout\n\n        if (deferred) deferred.promise(xhr)\n\n        $(script).on('load error', function(e, errorType){\n          clearTimeout(abortTimeout)\n          $(script).off().remove()\n\n          if (e.type == 'error' || !responseData) {\n            ajaxError(null, errorType || 'error', xhr, options, deferred)\n          } else {\n            ajaxSuccess(responseData[0], xhr, options, deferred)\n          }\n\n          window[callbackName] = originalCallback\n          if (responseData && $.isFunction(originalCallback))\n            originalCallback(responseData[0])\n\n          originalCallback = responseData = undefined\n        })\n\n        if (ajaxBeforeSend(xhr, options) === false) {\n          abort('abort')\n          return xhr\n        }\n\n        window[callbackName] = function(){\n          responseData = arguments\n        }\n\n        script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName)\n        document.head.appendChild(script)\n\n        if (options.timeout > 0) abortTimeout = setTimeout(function(){\n          abort('timeout')\n        }, options.timeout)\n\n        return xhr\n      }\n\n      $.ajaxSettings = {\n        // Default type of request\n        type: 'GET',\n        // Callback that is executed before request\n        beforeSend: empty,\n        // Callback that is executed if the request succeeds\n        success: empty,\n        // Callback that is executed the the server drops error\n        error: empty,\n        // Callback that is executed on request complete (both: error and success)\n        complete: empty,\n        // The context for the callbacks\n        context: null,\n        // Whether to trigger \"global\" Ajax events\n        global: true,\n        // Transport\n        xhr: function () {\n          return new window.XMLHttpRequest()\n        },\n        // MIME types mapping\n        // IIS returns Javascript as \"application/x-javascript\"\n        accepts: {\n          script: 'text/javascript, application/javascript, application/x-javascript',\n          json:   jsonType,\n          xml:    'application/xml, text/xml',\n          html:   htmlType,\n          text:   'text/plain'\n        },\n        // Whether the request is to another domain\n        crossDomain: false,\n        // Default timeout\n        timeout: 0,\n        // Whether data should be serialized to string\n        processData: true,\n        // Whether the browser should be allowed to cache GET responses\n        cache: true\n      }\n\n      function mimeToDataType(mime) {\n        if (mime) mime = mime.split(';', 2)[0]\n        return mime && ( mime == htmlType ? 'html' :\n          mime == jsonType ? 'json' :\n          scriptTypeRE.test(mime) ? 'script' :\n          xmlTypeRE.test(mime) && 'xml' ) || 'text'\n      }\n\n      function appendQuery(url, query) {\n        if (query == '') return url\n        return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n      }\n\n      // serialize payload and append it to the URL for GET requests\n      function serializeData(options) {\n        if (options.processData && options.data && $.type(options.data) != \"string\")\n          options.data = $.param(options.data, options.traditional)\n        if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\n          options.url = appendQuery(options.url, options.data), options.data = undefined\n      }\n\n      $.ajax = function(options){\n        var settings = $.extend({}, options || {}),\n            deferred = $.Deferred && $.Deferred()\n        for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]\n\n        ajaxStart(settings)\n\n        if (!settings.crossDomain) settings.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(settings.url) &&\n          RegExp.$2 != window.location.host\n\n        if (!settings.url) settings.url = window.location.toString()\n        serializeData(settings)\n        if (settings.cache === false) settings.url = appendQuery(settings.url, '_=' + Date.now())\n\n        var dataType = settings.dataType, hasPlaceholder = /\\?.+=\\?/.test(settings.url)\n        if (dataType == 'jsonp' || hasPlaceholder) {\n          if (!hasPlaceholder)\n            settings.url = appendQuery(settings.url,\n              settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')\n          return $.ajaxJSONP(settings, deferred)\n        }\n\n        var mime = settings.accepts[dataType],\n            headers = { },\n            setHeader = function(name, value) { headers[name.toLowerCase()] = [name, value] },\n            protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n            xhr = settings.xhr(),\n            nativeSetHeader = xhr.setRequestHeader,\n            abortTimeout\n\n        if (deferred) deferred.promise(xhr)\n\n        if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')\n        setHeader('Accept', mime || '*/*')\n        if (mime = settings.mimeType || mime) {\n          if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n          xhr.overrideMimeType && xhr.overrideMimeType(mime)\n        }\n        if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))\n          setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')\n\n        if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name])\n        xhr.setRequestHeader = setHeader\n\n        xhr.onreadystatechange = function(){\n          if (xhr.readyState == 4) {\n            xhr.onreadystatechange = empty\n            clearTimeout(abortTimeout)\n            var result, error = false\n            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n              dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))\n              result = xhr.responseText\n\n              try {\n                // http://perfectionkills.com/global-eval-what-are-the-options/\n                if (dataType == 'script')    (1,eval)(result)\n                else if (dataType == 'xml')  result = xhr.responseXML\n                else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)\n              } catch (e) { error = e }\n\n              if (error) ajaxError(error, 'parsererror', xhr, settings, deferred)\n              else ajaxSuccess(result, xhr, settings, deferred)\n            } else {\n              ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)\n            }\n          }\n        }\n\n        if (ajaxBeforeSend(xhr, settings) === false) {\n          xhr.abort()\n          ajaxError(null, 'abort', xhr, settings, deferred)\n          return xhr\n        }\n\n        if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]\n\n        var async = 'async' in settings ? settings.async : true\n        xhr.open(settings.type, settings.url, async, settings.username, settings.password)\n\n        for (name in headers) nativeSetHeader.apply(xhr, headers[name])\n\n        if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n            xhr.onreadystatechange = empty\n            xhr.abort()\n            ajaxError(null, 'timeout', xhr, settings, deferred)\n          }, settings.timeout)\n\n        // avoid sending empty string (#319)\n        xhr.send(settings.data ? settings.data : null)\n        return xhr\n      }\n\n      // handle optional data/success arguments\n      function parseArguments(url, data, success, dataType) {\n        var hasData = !$.isFunction(data)\n        return {\n          url:      url,\n          data:     hasData  ? data : undefined,\n          success:  !hasData ? data : $.isFunction(success) ? success : undefined,\n          dataType: hasData  ? dataType || success : success\n        }\n      }\n\n      $.get = function(url, data, success, dataType){\n        return $.ajax(parseArguments.apply(null, arguments))\n      }\n\n      $.post = function(url, data, success, dataType){\n        var options = parseArguments.apply(null, arguments)\n        options.type = 'POST'\n        return $.ajax(options)\n      }\n\n      $.getJSON = function(url, data, success){\n        var options = parseArguments.apply(null, arguments)\n        options.dataType = 'json'\n        return $.ajax(options)\n      }\n\n      $.fn.load = function(url, data, success){\n        if (!this.length) return this\n        var self = this, parts = url.split(/\\s/), selector,\n            options = parseArguments(url, data, success),\n            callback = options.success\n        if (parts.length > 1) options.url = parts[0], selector = parts[1]\n        options.success = function(response){\n          self.html(selector ?\n            $('<div>').html(response.replace(rscript, \"\")).find(selector)\n            : response)\n          callback && callback.apply(self, arguments)\n        }\n        $.ajax(options)\n        return this\n      }\n\n      var escape = encodeURIComponent\n\n      function serialize(params, obj, traditional, scope){\n        var type, array = $.isArray(obj), hash = $.isPlainObject(obj)\n        $.each(obj, function(key, value) {\n          type = $.type(value)\n          if (scope) key = traditional ? scope :\n            scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'\n          // handle data in serializeArray() format\n          if (!scope && array) params.add(value.name, value.value)\n          // recurse into nested objects\n          else if (type == \"array\" || (!traditional && type == \"object\"))\n            serialize(params, value, traditional, key)\n          else params.add(key, value)\n        })\n      }\n\n      $.param = function(obj, traditional){\n        var params = []\n        params.add = function(k, v){ this.push(escape(k) + '=' + escape(v)) }\n        serialize(params, obj, traditional)\n        return params.join('&').replace(/%20/g, '+')\n      }\n    })(Zepto)\n\n    ;(function($){\n      $.fn.serializeArray = function() {\n        var result = [], el\n        $([].slice.call(this.get(0).elements)).each(function(){\n          el = $(this)\n          var type = el.attr('type')\n          if (this.nodeName.toLowerCase() != 'fieldset' &&\n            !this.disabled && type != 'submit' && type != 'reset' && type != 'button' &&\n            ((type != 'radio' && type != 'checkbox') || this.checked))\n            result.push({\n              name: el.attr('name'),\n              value: el.val()\n            })\n        })\n        return result\n      }\n\n      $.fn.serialize = function(){\n        var result = []\n        this.serializeArray().forEach(function(elm){\n          result.push(encodeURIComponent(elm.name) + '=' + encodeURIComponent(elm.value))\n        })\n        return result.join('&')\n      }\n\n      $.fn.submit = function(callback) {\n        if (callback) this.bind('submit', callback)\n        else if (this.length) {\n          var event = $.Event('submit')\n          this.eq(0).trigger(event)\n          if (!event.isDefaultPrevented()) this.get(0).submit()\n        }\n        return this\n      }\n\n    })(Zepto)\n\n    ;(function($){\n      // __proto__ doesn't exist on IE<11, so redefine\n      // the Z function to use object extension instead\n      if (!('__proto__' in {})) {\n        $.extend($.zepto, {\n          Z: function(dom, selector){\n            dom = dom || []\n            $.extend(dom, $.fn)\n            dom.selector = selector || ''\n            dom.__Z = true\n            return dom\n          },\n          // this is a kludge but works\n          isZ: function(object){\n            return $.type(object) === 'array' && '__Z' in object\n          }\n        })\n      }\n\n      // getComputedStyle shouldn't freak out when called\n      // without a valid element as argument\n      try {\n        getComputedStyle(undefined)\n      } catch(e) {\n        var nativeGetComputedStyle = getComputedStyle;\n        window.getComputedStyle = function(element, pseudoElement){\n          try {\n            return nativeGetComputedStyle(element, pseudoElement)\n          } catch(e) {\n            return null\n          }\n        }\n      }\n    })(Zepto)\n\n\n  TL.getJSON = Zepto.getJSON;\n\tTL.ajax = Zepto.ajax;\n})(TL)\n\n//     Based on https://github.com/madrobby/zepto/blob/5585fe00f1828711c04208372265a5d71e3238d1/src/ajax.js\n//     Zepto.js\n//     (c) 2010-2012 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n/*\nCopyright (c) 2010-2012 Thomas Fuchs\nhttp://zeptojs.com\n\nPermission is hereby granted, free of charge, to any person obtaining a copy \nof this software and associated documentation files (the \"Software\"), to deal \nin the Software without restriction, including without limitation the rights \nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell \ncopies of the Software, and to permit persons to whom the Software is \nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\n\n/* **********************************************\n     Begin TL.Class.js\n********************************************** */\n\n/*\tTL.Class\n\tClass powers the OOP facilities of the library.\n================================================== */\nTL.Class = function () {};\n\nTL.Class.extend = function (/*Object*/ props) /*-> Class*/ {\n \n\t// extended class with the new prototype\n\tvar NewClass = function () {\n\t\tif (this.initialize) {\n\t\t\tthis.initialize.apply(this, arguments);\n\t\t}\n\t};\n\n\t// instantiate class without calling constructor\n\tvar F = function () {};\n\tF.prototype = this.prototype;\n\tvar proto = new F();\n\n\tproto.constructor = NewClass;\n\tNewClass.prototype = proto;\n\n\t// add superclass access\n\tNewClass.superclass = this.prototype;\n\n\t// add class name\n\t//proto.className = props;\n\n\t//inherit parent's statics\n\tfor (var i in this) {\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype' && i !== 'superclass') {\n\t\t\tNewClass[i] = this[i];\n\t\t}\n\t}\n\n\t// mix static properties into the class\n\tif (props.statics) {\n\t\tTL.Util.extend(NewClass, props.statics);\n\t\tdelete props.statics;\n\t}\n\n\t// mix includes into the prototype\n\tif (props.includes) {\n\t\tTL.Util.extend.apply(null, [proto].concat(props.includes));\n\t\tdelete props.includes;\n\t}\n\n\t// merge options\n\tif (props.options && proto.options) {\n\t\tprops.options = TL.Util.extend({}, proto.options, props.options);\n\t}\n\n\t// mix given properties into the prototype\n\tTL.Util.extend(proto, props);\n\n\t// allow inheriting further\n\tNewClass.extend = TL.Class.extend;\n\n\t// method for adding properties to prototype\n\tNewClass.include = function (props) {\n\t\tTL.Util.extend(this.prototype, props);\n\t};\n\n\treturn NewClass;\n};\n\n\n/* **********************************************\n     Begin TL.Events.js\n********************************************** */\n\n/*\tTL.Events\n\tadds custom events functionality to TL classes\n================================================== */\nTL.Events = {\n\taddEventListener: function (/*String*/ type, /*Function*/ fn, /*(optional) Object*/ context) {\n\t\tvar events = this._tl_events = this._tl_events || {};\n\t\tevents[type] = events[type] || [];\n\t\tevents[type].push({\n\t\t\taction: fn,\n\t\t\tcontext: context || this\n\t\t});\n\t\treturn this;\n\t},\n\n\thasEventListeners: function (/*String*/ type) /*-> Boolean*/ {\n\t\tvar k = '_tl_events';\n\t\treturn (k in this) && (type in this[k]) && (this[k][type].length > 0);\n\t},\n\n\tremoveEventListener: function (/*String*/ type, /*Function*/ fn, /*(optional) Object*/ context) {\n\t\tif (!this.hasEventListeners(type)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (var i = 0, events = this._tl_events, len = events[type].length; i < len; i++) {\n\t\t\tif (\n\t\t\t\t(events[type][i].action === fn) &&\n\t\t\t\t(!context || (events[type][i].context === context))\n\t\t\t) {\n\t\t\t\tevents[type].splice(i, 1);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\tfireEvent: function (/*String*/ type, /*(optional) Object*/ data) {\n\t\tif (!this.hasEventListeners(type)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvar event = TL.Util.mergeData({\n\t\t\ttype: type,\n\t\t\ttarget: this\n\t\t}, data);\n\n\t\tvar listeners = this._tl_events[type].slice();\n\n\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\n\t\t\tlisteners[i].action.call(listeners[i].context || this, event);\n\t\t}\n\n\t\treturn this;\n\t}\n};\n\nTL.Events.on\t= TL.Events.addEventListener;\nTL.Events.off\t= TL.Events.removeEventListener;\nTL.Events.fire = TL.Events.fireEvent;\n\n\n/* **********************************************\n     Begin TL.Browser.js\n********************************************** */\n\n/*\n\tBased on Leaflet Browser\n\tTL.Browser handles different browser and feature detections for internal  use.\n*/\n\n\n(function() {\n\n\tvar ua = navigator.userAgent.toLowerCase(),\n\t\tdoc = document.documentElement,\n\n\t\tie = 'ActiveXObject' in window,\n\n\t\twebkit = ua.indexOf('webkit') !== -1,\n\t\tphantomjs = ua.indexOf('phantom') !== -1,\n\t\tandroid23 = ua.search('android [23]') !== -1,\n\n\t\tmobile = typeof orientation !== 'undefined',\n\t\tmsPointer = navigator.msPointerEnabled && navigator.msMaxTouchPoints && !window.PointerEvent,\n\t\tpointer = (window.PointerEvent && navigator.pointerEnabled && navigator.maxTouchPoints) || msPointer,\n\n\t\tie3d = ie && ('transition' in doc.style),\n\t\twebkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,\n\t\tgecko3d = 'MozPerspective' in doc.style,\n\t\topera3d = 'OTransition' in doc.style,\n\t\topera = window.opera;\n\n\n\tvar retina = 'devicePixelRatio' in window && window.devicePixelRatio > 1;\n\n\tif (!retina && 'matchMedia' in window) {\n\t\tvar matches = window.matchMedia('(min-resolution:144dpi)');\n\t\tretina = matches && matches.matches;\n\t}\n\n\tvar touch = !window.L_NO_TOUCH && !phantomjs && (pointer || 'ontouchstart' in window || (window.DocumentTouch && document instanceof window.DocumentTouch));\n\n\tTL.Browser = {\n\t\tie: ie,\n\t\tua: ua,\n\t\tie9: Boolean(ie && ua.match(/MSIE 9/i)),\n\t\tielt9: ie && !document.addEventListener,\n\t\twebkit: webkit,\n\t\t//gecko: (ua.indexOf('gecko') !== -1) && !webkit && !window.opera && !ie,\n\t\tfirefox: (ua.indexOf('gecko') !== -1) && !webkit && !window.opera && !ie,\n\t\tandroid: ua.indexOf('android') !== -1,\n\t\tandroid23: android23,\n\t\tchrome: ua.indexOf('chrome') !== -1,\n\t\tedge: ua.indexOf('edge/') !== -1,\n\n\t\tie3d: ie3d,\n\t\twebkit3d: webkit3d,\n\t\tgecko3d: gecko3d,\n\t\topera3d: opera3d,\n\t\tany3d: !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs,\n\n\t\tmobile: mobile,\n\t\tmobileWebkit: mobile && webkit,\n\t\tmobileWebkit3d: mobile && webkit3d,\n\t\tmobileOpera: mobile && window.opera,\n\n\t\ttouch: !! touch,\n\t\tmsPointer: !! msPointer,\n\t\tpointer: !! pointer,\n\n\t\tretina: !! retina,\n\t\torientation: function() {\n\t\t\tvar w = window.innerWidth,\n\t\t\t\th = window.innerHeight,\n\t\t\t\t_orientation = \"portrait\";\n\n\t\t\tif (w > h) {\n\t\t\t\t_orientation = \"landscape\";\n\t\t\t}\n\t\t\tif (Math.abs(window.orientation) == 90) {\n\t\t\t\t//_orientation = \"landscape\";\n\t\t\t}\n\t\t\ttrace(_orientation);\n\t\t\treturn _orientation;\n\t\t}\n\t};\n\n}());\n\n\n/* **********************************************\n     Begin TL.Load.js\n********************************************** */\n\n/*\tTL.Load\n\tLoads External Javascript and CSS\n================================================== */\n\nTL.Load = (function (doc) {\n\tvar loaded\t= [];\n\t\n\tfunction isLoaded(url) {\n\t\t\n\t\tvar i\t\t\t= 0,\n\t\t\thas_loaded\t= false;\n\t\t\n\t\tfor (i = 0; i < loaded.length; i++) {\n\t\t\tif (loaded[i] == url) {\n\t\t\t\thas_loaded = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (has_loaded) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tloaded.push(url);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t}\n\t\n\treturn {\n\t\t\n\t\tcss: function (urls, callback, obj, context) {\n\t\t\tif (!isLoaded(urls)) {\n\t\t\t\tTL.LoadIt.css(urls, callback, obj, context);\n\t\t\t} else {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t},\n\n\t\tjs: function (urls, callback, obj, context) {\n\t\t\tif (!isLoaded(urls)) {\n\t\t\t\tTL.LoadIt.js(urls, callback, obj, context);\n\t\t\t} else {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n    };\n\t\n})(this.document);\n\n\n/*jslint browser: true, eqeqeq: true, bitwise: true, newcap: true, immed: true, regexp: false */\n\n/*\nLazyLoad makes it easy and painless to lazily load one or more external\nJavaScript or CSS files on demand either during or after the rendering of a web\npage.\n\nSupported browsers include Firefox 2+, IE6+, Safari 3+ (including Mobile\nSafari), Google Chrome, and Opera 9+. Other browsers may or may not work and\nare not officially supported.\n\nVisit https://github.com/rgrove/lazyload/ for more info.\n\nCopyright (c) 2011 Ryan Grove <ryan@wonko.com>\nAll rights reserved.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the 'Software'), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n@module lazyload\n@class LazyLoad\n@static\n@version 2.0.3 (git)\n*/\n\nTL.LoadIt = (function (doc) {\n  // -- Private Variables ------------------------------------------------------\n\n  // User agent and feature test information.\n  var env,\n\n  // Reference to the <head> element (populated lazily).\n  head,\n\n  // Requests currently in progress, if any.\n  pending = {},\n\n  // Number of times we've polled to check whether a pending stylesheet has\n  // finished loading. If this gets too high, we're probably stalled.\n  pollCount = 0,\n\n  // Queued requests.\n  queue = {css: [], js: []},\n\n  // Reference to the browser's list of stylesheets.\n  styleSheets = doc.styleSheets;\n\n  // -- Private Methods --------------------------------------------------------\n\n  /**\n  Creates and returns an HTML element with the specified name and attributes.\n\n  @method createNode\n  @param {String} name element name\n  @param {Object} attrs name/value mapping of element attributes\n  @return {HTMLElement}\n  @private\n  */\n  function createNode(name, attrs) {\n    var node = doc.createElement(name), attr;\n\n    for (attr in attrs) {\n      if (attrs.hasOwnProperty(attr)) {\n        node.setAttribute(attr, attrs[attr]);\n      }\n    }\n\n    return node;\n  }\n\n  /**\n  Called when the current pending resource of the specified type has finished\n  loading. Executes the associated callback (if any) and loads the next\n  resource in the queue.\n\n  @method finish\n  @param {String} type resource type ('css' or 'js')\n  @private\n  */\n  function finish(type) {\n    var p = pending[type],\n        callback,\n        urls;\n\n    if (p) {\n      callback = p.callback;\n      urls     = p.urls;\n\n      urls.shift();\n      pollCount = 0;\n\n      // If this is the last of the pending URLs, execute the callback and\n      // start the next request in the queue (if any).\n      if (!urls.length) {\n        callback && callback.call(p.context, p.obj);\n        pending[type] = null;\n        queue[type].length && load(type);\n      }\n    }\n  }\n\n  /**\n  Populates the <code>env</code> variable with user agent and feature test\n  information.\n\n  @method getEnv\n  @private\n  */\n  function getEnv() {\n    var ua = navigator.userAgent;\n\n    env = {\n      // True if this browser supports disabling async mode on dynamically\n      // created script nodes. See\n      // http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n      async: doc.createElement('script').async === true\n    };\n\n    (env.webkit = /AppleWebKit\\//.test(ua))\n      || (env.ie = /MSIE/.test(ua))\n      || (env.opera = /Opera/.test(ua))\n      || (env.gecko = /Gecko\\//.test(ua))\n      || (env.unknown = true);\n  }\n\n  /**\n  Loads the specified resources, or the next resource of the specified type\n  in the queue if no resources are specified. If a resource of the specified\n  type is already being loaded, the new request will be queued until the\n  first request has been finished.\n\n  When an array of resource URLs is specified, those URLs will be loaded in\n  parallel if it is possible to do so while preserving execution order. All\n  browsers support parallel loading of CSS, but only Firefox and Opera\n  support parallel loading of scripts. In other browsers, scripts will be\n  queued and loaded one at a time to ensure correct execution order.\n\n  @method load\n  @param {String} type resource type ('css' or 'js')\n  @param {String|Array} urls (optional) URL or array of URLs to load\n  @param {Function} callback (optional) callback function to execute when the\n    resource is loaded\n  @param {Object} obj (optional) object to pass to the callback function\n  @param {Object} context (optional) if provided, the callback function will\n    be executed in this object's context\n  @private\n  */\n  function load(type, urls, callback, obj, context) {\n    var _finish = function () { finish(type); },\n        isCSS   = type === 'css',\n        nodes   = [],\n        i, len, node, p, pendingUrls, url;\n\n    env || getEnv();\n\n    if (urls) {\n      // If urls is a string, wrap it in an array. Otherwise assume it's an\n      // array and create a copy of it so modifications won't be made to the\n      // original.\n      urls = typeof urls === 'string' ? [urls] : urls.concat();\n\n      // Create a request object for each URL. If multiple URLs are specified,\n      // the callback will only be executed after all URLs have been loaded.\n      //\n      // Sadly, Firefox and Opera are the only browsers capable of loading\n      // scripts in parallel while preserving execution order. In all other\n      // browsers, scripts must be loaded sequentially.\n      //\n      // All browsers respect CSS specificity based on the order of the link\n      // elements in the DOM, regardless of the order in which the stylesheets\n      // are actually downloaded.\n      if (isCSS || env.async || env.gecko || env.opera) {\n        // Load in parallel.\n        queue[type].push({\n          urls    : urls,\n          callback: callback,\n          obj     : obj,\n          context : context\n        });\n      } else {\n        // Load sequentially.\n        for (i = 0, len = urls.length; i < len; ++i) {\n          queue[type].push({\n            urls    : [urls[i]],\n            callback: i === len - 1 ? callback : null, // callback is only added to the last URL\n            obj     : obj,\n            context : context\n          });\n        }\n      }\n    }\n\n    // If a previous load request of this type is currently in progress, we'll\n    // wait our turn. Otherwise, grab the next item in the queue.\n    if (pending[type] || !(p = pending[type] = queue[type].shift())) {\n      return;\n    }\n\n    head || (head = doc.head || doc.getElementsByTagName('head')[0]);\n    pendingUrls = p.urls;\n\n    for (i = 0, len = pendingUrls.length; i < len; ++i) {\n      url = pendingUrls[i];\n\n      if (isCSS) {\n          node = env.gecko ? createNode('style') : createNode('link', {\n            href: url,\n            rel : 'stylesheet'\n          });\n      } else {\n        node = createNode('script', {src: url});\n        node.async = false;\n      }\n\n      node.className = 'lazyload';\n      node.setAttribute('charset', 'utf-8');\n\n      if (env.ie && !isCSS) {\n        node.onreadystatechange = function () {\n          if (/loaded|complete/.test(node.readyState)) {\n            node.onreadystatechange = null;\n            _finish();\n          }\n        };\n      } else if (isCSS && (env.gecko || env.webkit)) {\n        // Gecko and WebKit don't support the onload event on link nodes.\n        if (env.webkit) {\n          // In WebKit, we can poll for changes to document.styleSheets to\n          // figure out when stylesheets have loaded.\n          p.urls[i] = node.href; // resolve relative URLs (or polling won't work)\n          pollWebKit();\n        } else {\n          // In Gecko, we can import the requested URL into a <style> node and\n          // poll for the existence of node.sheet.cssRules. Props to Zach\n          // Leatherman for calling my attention to this technique.\n          node.innerHTML = '@import \"' + url + '\";';\n          pollGecko(node);\n        }\n      } else {\n        node.onload = node.onerror = _finish;\n      }\n\n      nodes.push(node);\n    }\n\n    for (i = 0, len = nodes.length; i < len; ++i) {\n      head.appendChild(nodes[i]);\n    }\n  }\n\n  /**\n  Begins polling to determine when the specified stylesheet has finished loading\n  in Gecko. Polling stops when all pending stylesheets have loaded or after 10\n  seconds (to prevent stalls).\n\n  Thanks to Zach Leatherman for calling my attention to the @import-based\n  cross-domain technique used here, and to Oleg Slobodskoi for an earlier\n  same-domain implementation. See Zach's blog for more details:\n  http://www.zachleat.com/web/2010/07/29/load-css-dynamically/\n\n  @method pollGecko\n  @param {HTMLElement} node Style node to poll.\n  @private\n  */\n  function pollGecko(node) {\n    var hasRules;\n\n    try {\n      // We don't really need to store this value or ever refer to it again, but\n      // if we don't store it, Closure Compiler assumes the code is useless and\n      // removes it.\n      hasRules = !!node.sheet.cssRules;\n    } catch (ex) {\n      // An exception means the stylesheet is still loading.\n      pollCount += 1;\n\n      if (pollCount < 200) {\n        setTimeout(function () { pollGecko(node); }, 50);\n      } else {\n        // We've been polling for 10 seconds and nothing's happened. Stop\n        // polling and finish the pending requests to avoid blocking further\n        // requests.\n        hasRules && finish('css');\n      }\n\n      return;\n    }\n\n    // If we get here, the stylesheet has loaded.\n    finish('css');\n  }\n\n  /**\n  Begins polling to determine when pending stylesheets have finished loading\n  in WebKit. Polling stops when all pending stylesheets have loaded or after 10\n  seconds (to prevent stalls).\n\n  @method pollWebKit\n  @private\n  */\n  function pollWebKit() {\n    var css = pending.css, i;\n\n    if (css) {\n      i = styleSheets.length;\n\n      // Look for a stylesheet matching the pending URL.\n      while (--i >= 0) {\n        if (styleSheets[i].href === css.urls[0]) {\n          finish('css');\n          break;\n        }\n      }\n\n      pollCount += 1;\n\n      if (css) {\n        if (pollCount < 200) {\n          setTimeout(pollWebKit, 50);\n        } else {\n          // We've been polling for 10 seconds and nothing's happened, which may\n          // indicate that the stylesheet has been removed from the document\n          // before it had a chance to load. Stop polling and finish the pending\n          // request to prevent blocking further requests.\n          finish('css');\n        }\n      }\n    }\n  }\n\n  return {\n\n    /**\n    Requests the specified CSS URL or URLs and executes the specified\n    callback (if any) when they have finished loading. If an array of URLs is\n    specified, the stylesheets will be loaded in parallel and the callback\n    will be executed after all stylesheets have finished loading.\n\n    @method css\n    @param {String|Array} urls CSS URL or array of CSS URLs to load\n    @param {Function} callback (optional) callback function to execute when\n      the specified stylesheets are loaded\n    @param {Object} obj (optional) object to pass to the callback function\n    @param {Object} context (optional) if provided, the callback function\n      will be executed in this object's context\n    @static\n    */\n    css: function (urls, callback, obj, context) {\n      load('css', urls, callback, obj, context);\n    },\n\n    /**\n    Requests the specified JavaScript URL or URLs and executes the specified\n    callback (if any) when they have finished loading. If an array of URLs is\n    specified and the browser supports it, the scripts will be loaded in\n    parallel and the callback will be executed after all scripts have\n    finished loading.\n\n    Currently, only Firefox and Opera support parallel loading of scripts while\n    preserving execution order. In other browsers, scripts will be\n    queued and loaded one at a time to ensure correct execution order.\n\n    @method js\n    @param {String|Array} urls JS URL or array of JS URLs to load\n    @param {Function} callback (optional) callback function to execute when\n      the specified scripts are loaded\n    @param {Object} obj (optional) object to pass to the callback function\n    @param {Object} context (optional) if provided, the callback function\n      will be executed in this object's context\n    @static\n    */\n    js: function (urls, callback, obj, context) {\n      load('js', urls, callback, obj, context);\n    }\n\n  };\n})(this.document);\n\n\n/* **********************************************\n     Begin TL.TimelineConfig.js\n********************************************** */\n\n/*  TL.TimelineConfig\nseparate the configuration from the display (TL.Timeline)\nto make testing easier\n================================================== */\nTL.TimelineConfig = TL.Class.extend({\n\n\tincludes: [],\n\tinitialize: function (data) {\n\t\tthis.title = '';\n\t\tthis.scale = '';\n\t\tthis.events = [];\n\t\tthis.eras = [];\n\t\tthis.event_dict = {}; // despite name, all slides (events + title) indexed by slide.unique_id\n\t\tthis.messages = {\n\t\t\terrors: [],\n\t\t\twarnings: []\n\t\t};\n\n\t\t// Initialize the data\n\t\tif (typeof data === 'object' && data.events) {\n\t\t\tthis.scale = data.scale;\n\t\t\tthis.events = [];\n\t\t\tthis._ensureValidScale(data.events);\n\n\t\t\tif (data.title) {\n\t\t\t\tvar title_id = this._assignID(data.title);\n\t\t\t\tthis._tidyFields(data.title);\n\t\t\t\tthis.title = data.title;\n\t\t\t\tthis.event_dict[title_id] = this.title;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < data.events.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.addEvent(data.events[i], true);\n\t\t\t\t} catch (e) {\n\t\t\t\t    this.logError(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.eras) {\n\t\t\t\tfor (var i = 0; i < data.eras.length; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.addEra(data.eras[i], true);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.logError(\"Era \" + i + \": \" + e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tTL.DateUtil.sortByDate(this.events);\n\t\t\tTL.DateUtil.sortByDate(this.eras);\n\n\t\t}\n\t},\n\tlogError: function(msg) {\n\t\ttrace(msg);\n\t\tthis.messages.errors.push(msg);\n\t},\n\t/*\n\t * Return any accumulated error messages. If `sep` is passed, it should be a string which will be used to join all messages, resulting in a string return value. Otherwise,\n\t * errors will be returned as an array.\n\t */\n\tgetErrors: function(sep) {\n\t\tif (sep) {\n\t\t\treturn this.messages.errors.join(sep);\n\t\t} else {\n\t\t\treturn this.messages.errors;\n\t\t}\n\t},\n\t/*\n\t * Perform any sanity checks we can before trying to use this to make a timeline. Returns nothing, but errors will be logged\n\t * such that after this is called, one can test `this.isValid()` to see if everything is OK.\n\t */\n\tvalidate: function() {\n\t\tif (typeof(this.events) == \"undefined\" || typeof(this.events.length) == \"undefined\" || this.events.length == 0) {\n\t\t\tthis.logError(\"Timeline configuration has no events.\")\n\t\t}\n\n\t\t// make sure all eras have start and end dates\n\t\tfor (var i = 0; i < this.eras.length; i++) {\n\t\t\tif (typeof(this.eras[i].start_date) == 'undefined' || typeof(this.eras[i].end_date) == 'undefined') {\n\t\t\t\tvar era_identifier;\n\t\t\t\tif (this.eras[i].text && this.eras[i].text.headline) {\n\t\t\t\t\tera_identifier = this.eras[i].text.headline\n\t\t\t\t} else {\n\t\t\t\t\tera_identifier = \"era \" + (i+1);\n\t\t\t\t}\n\t\t\t\tthis.logError(\"All eras must have start and end dates. [\" + era_identifier + \"]\") // add internationalization (I18N) and context\n\t\t\t}\n\t\t};\n\t},\n\n\tisValid: function() {\n\t\treturn this.messages.errors.length == 0;\n\t},\n\t/* Add an event (including cleaning/validation) and return the unique id.\n\t* All event data validation should happen in here.\n\t* Throws: TL.Error for any validation problems.\n\t*/\n\taddEvent: function(data, defer_sort) {\n\t\tvar event_id = this._assignID(data);\n\n\t\tif (typeof(data.start_date) == 'undefined') {\n\t\t    throw new TL.Error(\"missing_start_date_err\", event_id);\n\t\t} else {\n\t\t\tthis._processDates(data);\n\t\t\tthis._tidyFields(data);\n\t\t}\n\n\t\tthis.events.push(data);\n\t\tthis.event_dict[event_id] = data;\n\n\t\tif (!defer_sort) {\n\t\t\tTL.DateUtil.sortByDate(this.events);\n\t\t}\n\t\treturn event_id;\n\t},\n\n\taddEra: function(data, defer_sort) {\n\t\tvar event_id = this._assignID(data);\n\n\t\tif (typeof(data.start_date) == 'undefined') {\n\t\t    throw new TL.Error(\"missing_start_date_err\", event_id);\n\t\t} else {\n\t\t\tthis._processDates(data);\n\t\t\tthis._tidyFields(data);\n\t\t}\n\n\t\tthis.eras.push(data);\n\t\tthis.event_dict[event_id] = data;\n\n\t\tif (!defer_sort) {\n\t\t\tTL.DateUtil.sortByDate(this.eras);\n\t\t}\n\t\treturn event_id;\n\t},\n\n\t/**\n\t * Given a slide, verify that its ID is unique, or assign it one which is.\n\t * The assignment happens in this function, and the assigned ID is also\n\t * the return value. Not thread-safe, because ids are not reserved\n\t * when assigned here.\n\t */\n\t_assignID: function(slide) {\n\t\tvar slide_id = slide.unique_id;\n\t\tif (!TL.Util.trim(slide_id)) {\n\t\t\t// give it an ID if it doesn't have one\n\t\t\tslide_id = (slide.text) ? TL.Util.slugify(slide.text.headline) : null;\n\t\t}\n\t\t// make sure it's unique and add it.\n\t\tslide.unique_id = TL.Util.ensureUniqueKey(this.event_dict,slide_id);\n\t\treturn slide.unique_id\n\t},\n\n\t/**\n\t * Given an array of slide configs (the events), ensure that each one has a distinct unique_id. The id of the title\n\t * is also passed in because in most ways it functions as an event slide, and the event IDs must also all be unique\n\t * from the title ID.\n\t */\n\t_makeUniqueIdentifiers: function(title_id, array) {\n\t\tvar used = [title_id];\n\n\t\t// establish which IDs are assigned and if any appear twice, clear out successors.\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tif (TL.Util.trim(array[i].unique_id)) {\n\t\t\t\tarray[i].unique_id = TL.Util.slugify(array[i].unique_id); // enforce valid\n\t\t\t\tif (used.indexOf(array[i].unique_id) == -1) {\n\t\t\t\t\tused.push(array[i].unique_id);\n\t\t\t\t} else { // it was already used, wipe it out\n\t\t\t\t\tarray[i].unique_id = '';\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (used.length != (array.length + 1)) {\n\t\t\t// at least some are yet to be assigned\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\tif (!array[i].unique_id) {\n\t\t\t\t\t// use the headline for the unique ID if it's available\n\t\t\t\t\tvar slug = (array[i].text) ? TL.Util.slugify(array[i].text.headline) : null;\n\t\t\t\t\tif (!slug) {\n\t\t\t\t\t\tslug = TL.Util.unique_ID(6); // or generate a random ID\n\t\t\t\t\t}\n\t\t\t\t\tif (used.indexOf(slug) != -1) {\n\t\t\t\t\t\tslug = slug + '-' + i; // use the index to get a unique ID.\n\t\t\t\t\t}\n\t\t\t\t\tused.push(slug);\n\t\t\t\t\tarray[i].unique_id = slug;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_ensureValidScale: function(events) {\n\t\tif(!this.scale) {\n\t\t\ttrace(\"Determining scale dynamically\");\n\t\t\tthis.scale = \"human\"; // default to human unless there's a slide which is explicitly 'cosmological' or one which has a cosmological year\n\n\t\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\t\tif (events[i].scale == 'cosmological') {\n\t\t\t\t\tthis.scale = 'cosmological';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (events[i].start_date && typeof(events[i].start_date.year) != \"undefined\") {\n\t\t\t\t\tvar d = new TL.BigDate(events[i].start_date);\n\t\t\t\t\tvar year = d.data.date_obj.year;\n\t\t\t\t\tif(year < -271820 || year >  275759) {\n\t\t\t\t\t\tthis.scale = \"cosmological\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar dateCls = TL.DateUtil.SCALE_DATE_CLASSES[this.scale];\n\t\tif (!dateCls) { this.logError(\"Don't know how to process dates on scale \"+this.scale); }\n\t},\n\t/*\n\t   Given a thing which has a start_date and optionally an end_date, make sure that it is an instance\n\t\t of the correct date class (for human or cosmological scale). For slides, remove redundant end dates\n\t\t (people frequently configure an end date which is the same as the start date).\n\t */\n\t_processDates: function(slide_or_era) {\n\t\tvar dateCls = TL.DateUtil.SCALE_DATE_CLASSES[this.scale];\n\t\tif(!(slide_or_era.start_date instanceof dateCls)) {\n\t\t\tvar start_date = slide_or_era.start_date;\n\t\t\tslide_or_era.start_date = new dateCls(start_date);\n\n\t\t\t// eliminate redundant end dates.\n\t\t\tif (typeof(slide_or_era.end_date) != 'undefined' && !(slide_or_era.end_date instanceof dateCls)) {\n\t\t\t\tvar end_date = slide_or_era.end_date;\n\t\t\t\tvar equal = true;\n\t\t\t\tfor (property in start_date) {\n\t\t\t\t\tequal = equal && (start_date[property] == end_date[property]);\n\t\t\t\t}\n\t\t\t\tif (equal) {\n\t\t\t\t\ttrace(\"End date same as start date is redundant; dropping end date\");\n\t\t\t\t\tdelete slide_or_era.end_date;\n\t\t\t\t} else {\n\t\t\t\t\tslide_or_era.end_date = new dateCls(end_date);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t},\n\t/**\n\t * Return the earliest date that this config knows about, whether it's a slide or an era\n\t */\n\tgetEarliestDate: function() {\n\t\t// counting that dates were sorted in initialization\n\t\tvar date = this.events[0].start_date;\n\t\tif (this.eras && this.eras.length > 0) {\n\t\t\tif (this.eras[0].start_date.isBefore(date)) {\n\t\t\t\treturn this.eras[0].start_date;\n\t\t\t}\n\t\t}\n\t\treturn date;\n\n\t},\n\t/**\n\t * Return the latest date that this config knows about, whether it's a slide or an era, taking end_dates into account.\n\t */\n\tgetLatestDate: function() {\n\t\tvar dates = [];\n\t\tfor (var i = 0; i < this.events.length; i++) {\n\t\t\tif (this.events[i].end_date) {\n\t\t\t\tdates.push({ date: this.events[i].end_date });\n\t\t\t} else {\n\t\t\t\tdates.push({ date: this.events[i].start_date });\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < this.eras.length; i++) {\n\t\t\tif (this.eras[i].end_date) {\n\t\t\t\tdates.push({ date: this.eras[i].end_date });\n\t\t\t} else {\n\t\t\t\tdates.push({ date: this.eras[i].start_date });\n\t\t\t}\n\t\t}\n\t\tTL.DateUtil.sortByDate(dates, 'date');\n\t\treturn dates.slice(-1)[0].date;\n\t},\n\t_tidyFields: function(slide) {\n\n\t\tfunction fillIn(obj,key,default_value) {\n\t\t\tif (!default_value) default_value = '';\n\t\t\tif (!obj.hasOwnProperty(key)) { obj[key] = default_value }\n\t\t}\n\n\t\tif (slide.group) {\n\t\t\tslide.group = TL.Util.trim(slide.group);\n\t\t}\n\n\t\tif (!slide.text) {\n\t\t\tslide.text = {};\n\t\t}\n\t\tfillIn(slide.text,'text');\n\t\tfillIn(slide.text,'headline');\n\t}\n});\n\n\n/* **********************************************\n     Begin TL.ConfigFactory.js\n********************************************** */\n\n/* TL.ConfigFactory.js\n * Build TimelineConfig objects from other data sources\n */\n;(function(TL){\n    /*\n     * Convert a URL to a Google Spreadsheet (typically a /pubhtml version but somewhat flexible) into an object with the spreadsheet key (ID) and worksheet ID.\n\n     If `url` is actually a string which is only letters, numbers, '-' and '_', then it's assumed to be an ID already. If we had a more precise way of testing to see if the input argument was a valid key, we might apply it, but I don't know where that's documented.\n\n     If we're pretty sure this isn't a bare key or a url that could be used to find a Google spreadsheet then return null.\n     */\n    function parseGoogleSpreadsheetURL(url) {\n        parts = {\n            key: null,\n            worksheet: 0 // not really sure how to use this to get the feed for that sheet, so this is not ready except for first sheet right now\n        }\n        // key as url parameter (old-fashioned)\n        var key_pat = /\\bkey=([-_A-Za-z0-9]+)&?/i;\n        var url_pat = /docs.google.com\\/spreadsheets(.*?)\\/d\\//; // fixing issue of URLs with u/0/d\n\n        if (url.match(key_pat)) {\n            parts.key = url.match(key_pat)[1];\n            // can we get a worksheet from this form?\n        } else if (url.match(url_pat)) {\n            var pos = url.search(url_pat) + url.match(url_pat)[0].length;\n            var tail = url.substr(pos);\n            parts.key = tail.split('/')[0]\n            if (url.match(/\\?gid=(\\d+)/)) {\n                parts.worksheet = url.match(/\\?gid=(\\d+)/)[1];\n            }\n        } else if (url.match(/^\\b[-_A-Za-z0-9]+$/)) {\n            parts.key = url;\n        }\n\n        if (parts.key) {\n            return parts;\n        } else {\n            return null;\n        }\n    }\n\n    function extractGoogleEntryData_V1(item) {\n        var item_data = {}\n        for (k in item) {\n            if (k.indexOf('gsx$') == 0) {\n                item_data[k.substr(4)] = item[k].$t;\n            }\n        }\n        if (TL.Util.isEmptyObject(item_data)) return null;\n        var d = {\n            media: {\n                caption: item_data.mediacaption || '',\n                credit: item_data.mediacredit || '',\n                url: item_data.media || '',\n                thumbnail: item_data.mediathumbnail || ''\n            },\n            text: {\n                headline: item_data.headline || '',\n                text: item_data.text || ''\n            },\n            group: item_data.tag || '',\n            type: item_data.type || ''\n        }\n        if (item_data.startdate) {\n            d['start_date'] = TL.Date.parseDate(item_data.startdate);\n        }\n        if (item_data.enddate) {\n            d['end_date'] = TL.Date.parseDate(item_data.enddate);\n        }\n\n\n        return d;\n    }\n\n    function extractGoogleEntryData_V3(item) {\n\n        function clean_integer(s) {\n            if (s) {\n                return s.replace(/[\\s,]+/g,''); // doesn't handle '.' as comma separator, but how to distinguish that from decimal separator?\n            }\n        }\n\n        var item_data = {}\n        for (k in item) {\n            if (k.indexOf('gsx$') == 0) {\n                item_data[k.substr(4)] = TL.Util.trim(item[k].$t);\n            }\n        }\n        if (TL.Util.isEmptyObject(item_data)) return null;\n        var d = {\n            media: {\n                caption: item_data.mediacaption || '',\n                credit: item_data.mediacredit || '',\n                url: item_data.media || '',\n                thumbnail: item_data.mediathumbnail || ''\n            },\n            text: {\n                headline: item_data.headline || '',\n                text: item_data.text || ''\n            },\n            start_date: {\n                year: clean_integer(item_data.year),\n                month: clean_integer(item_data.month) || '',\n                day: clean_integer(item_data.day) || ''\n            },\n            end_date: {\n                year: clean_integer(item_data.endyear) || '',\n                month: clean_integer(item_data.endmonth) || '',\n                day: clean_integer(item_data.endday) || ''\n            },\n            display_date: item_data.displaydate || '',\n\n            type: item_data.type || ''\n        }\n\n        if (item_data.time) {\n            TL.Util.mergeData(d.start_date,TL.DateUtil.parseTime(item_data.time));\n        }\n\n        if (item_data.endtime) {\n            TL.Util.mergeData(d.end_date,TL.DateUtil.parseTime(item_data.endtime));\n        }\n\n\n        if (item_data.group) {\n            d.group = item_data.group;\n        }\n\n        if (d.end_date.year == '') {\n            var bad_date = d.end_date;\n            delete d.end_date;\n            if (bad_date.month != '' || bad_date.day != '' || bad_date.time != '') {\n                var label = d.text.headline ||\n                trace(\"Invalid end date for spreadsheet row. Must have a year if any other date fields are specified.\");\n                trace(item);\n            }\n        }\n\n        if (item_data.background) {\n            if (item_data.background.match(/^(https?:)?\\/\\/?/)) { // support http, https, protocol relative, site relative\n                d['background'] = { 'url': item_data.background }\n            } else { // for now we'll trust it's a color\n                d['background'] = { 'color': item_data.background }\n            }\n        }\n\n        return d;\n    }\n\n    \n\n    var getGoogleItemExtractor = function(data) {\n        if (typeof data.feed.entry === 'undefined'\n                || data.feed.entry.length == 0) {\n            throw new TL.Error(\"empty_feed_err\");\n        }\n        var entry = data.feed.entry[0];\n\n        if (typeof entry.gsx$startdate !== 'undefined') {\n            // check headers V1\n            // var headers_V1 = ['startdate', 'enddate', 'headline','text','media','mediacredit','mediacaption','mediathumbnail','media','type','tag'];\n            // for (var i = 0; i < headers_V1.length; i++) {\n            //     if (typeof entry['gsx$' + headers_V1[i]] == 'undefined') {\n            //         throw new TL.Error(\"invalid_data_format_err\");\n            //     }\n            // }\n            return extractGoogleEntryData_V1;\n        } else if (typeof entry.gsx$year !== 'undefined') {\n            // check rest of V3 headers\n            var headers_V3 = ['month', 'day', 'time', 'endmonth', 'endyear', 'endday', 'endtime', 'displaydate', 'headline','text','media','mediacredit','mediacaption','mediathumbnail','type','group','background'];\n            // for (var i = 0; i < headers_V3.length; i++) {\n            //     if (typeof entry['gsx$' + headers_V3[i]] == 'undefined') {\n            //         throw new TL.Error(\"invalid_data_format_err\");\n            //     }\n            // }\n            return extractGoogleEntryData_V3;\n        }\n        throw new TL.Error(\"invalid_data_format_err\");\n    }\n\n    var buildGoogleFeedURL = function(key, api_version) {\n        if (api_version == 'v4') {\n            return \"https://sheets.googleapis.com/v4/spreadsheets/\" + key + \"/values/A1:R1000?key=AIzaSyCInR0kjJJ2Co6aQAXjLBQ14CEHam3K0xg\";\n        } else {\n            return \"https://spreadsheets.google.com/feeds/list/\" + key + \"/1/public/values?alt=json\";\n        }\n    }\n\n    var jsonFromGoogleURL = function(google_url) {\n        var api_version = 'v3';\n        var parts = parseGoogleSpreadsheetURL(google_url);\n        if (parts && parts.key) {\n            var spreadsheet_key = parts.key;\n        } else {\n            throw new TL.Error('invalid_url_err', google_url);\n        }\n\n        var url = buildGoogleFeedURL(spreadsheet_key, api_version);\n\n        var response = TL.ajax({\n            url: url,\n            async: false\n        });\n        \n        // tricky because errors can be in the response object or in the parsed data...\n\n        if (response.status != 200) {\n            console.log(\"Error fetching data \" + api_version + \": \" + response.status + \" - \" + response.statusText);\n            api_version = 'v4';\n            var url = buildGoogleFeedURL(spreadsheet_key, api_version);\n            console.log(\"trying v4 - \" + google_url);\n            var response = TL.ajax({\n                url: url,\n                async: false\n            });\n\n            if (response.status == 403) {\n                throw new TL.Error('invalid_url_share_required');\n            } else if (response.status != 200) {\n                var msg = \"Error fetching data \" + api_version + \": \" + response.status + \" - \" + response.statusText;\n                console.log(msg);\n                throw new TL.Error(\"google_error\", msg);\n            }\n        } \n\n\n        var data = JSON.parse(response.responseText);\n\n        if (data.error) {\n            var msg = \"Error fetching data \" + api_version + \": \" + response.status + \" - \" + response.statusText;\n            console.log(msg);\n            console.log(data.error);\n            throw new TL.Error(\"google_error\", msg);\n        }\n\n        return googleFeedJSONtoTimelineJSON(data);\n    }\n\n    function extractGoogleEntryData_V4(column, item) {\n        function clean_integer(s) {\n            if (s) {\n                return s.replace(/[\\s,]+/g,''); // doesn't handle '.' as comma separator, but how to distinguish that from decimal separator?\n            }\n        }\n        // console.log(item);\n        var item_data = {};\n        for (var i = 1; i < item.length; i++) {\n            if (column.length >= i) {\n                var column_name = column[i].toLowerCase().replace(\" \", \"\");\n                item_data[column_name] = item[i];\n            }\n           \n        }\n\n        var event = {\n            media: {\n                caption: item_data.mediacaption || '',\n                credit: item_data.mediacredit || '',\n                url: item_data.media || '',\n                thumbnail: item_data.mediathumbnail || ''\n            },\n            text: {\n                headline: item_data.headline || '',\n                text: item_data.text || ''\n            },\n            start_date: {\n                year: clean_integer(item[0]),\n                month: clean_integer(item[1]) || '',\n                day: clean_integer(item[2]) || ''\n            },\n            end_date: {\n                year: clean_integer(item_data.endyear) || '',\n                month: clean_integer(item_data.endmonth) || '',\n                day: clean_integer(item_data.endday) || ''\n            },\n            display_date: item_data.displaydate || '',\n\n            type: item_data.type || ''\n        }\n\n\n        if (item_data.time) {\n            TL.Util.mergeData(event.start_date,TL.DateUtil.parseTime(item[3]));\n        }\n\n        if (item_data.endtime) {\n            TL.Util.mergeData(event.end_date,TL.DateUtil.parseTime(item_data.endtime));\n        }\n\n        if (item_data.group) {\n            event.group = item_data.group;\n        }\n\n        if (event.end_date.year == '') {\n            var bad_date = event.end_date;\n            delete event.end_date;\n            if (bad_date.month != '' || bad_date.day != '' || bad_date.time != '') {\n                var label = event.text.headline ||\n                trace(\"Invalid end date for spreadsheet row. Must have a year if any other date fields are specified.\");\n                trace(item);\n            }\n        }\n\n        if (item_data.background) {\n            if (item_data.background.match(/^(https?:)?\\/\\/?/)) { // support http, https, protocol relative, site relative\n                event['background'] = { 'url': item_data.background }\n            } else { // for now we'll trust it's a color\n                event['background'] = { 'color': item_data.background }\n            }\n        }\n\n        return event;\n    }\n\n    var googleFeedJSONtoTimelineJSON = function(data) {\n        var timeline_config = { 'events': [], 'errors': [], 'warnings': [], 'eras': [] }\n        \n        if (data.values) {\n            // Google Sheets API v4\n            for (var i = 1; i < data.values.length; i++) {\n                var event = extractGoogleEntryData_V4(data.values[0], data.values[i]);\n                if (event) { // blank rows return null\n                    var row_type = 'event';\n                    if (typeof (event.type) != 'undefined') {\n                        row_type = event.type;\n                        delete event.type;\n                    }\n                    if (row_type == 'title') {\n                        if (!timeline_config.title) {\n                            timeline_config.title = event;\n                        } else {\n                            timeline_config.warnings.push(\"Multiple title slides detected.\");\n                            timeline_config.events.push(event);\n                        }\n                    } else if (row_type == 'era') {\n                        timeline_config.eras.push(event);\n                    } else {\n                        timeline_config.events.push(event);\n                    }\n                }\n            }\n        } else {\n\n            // Google Sheets API v3 \n            var extract = getGoogleItemExtractor(data);\n            for (var i = 0; i < data.feed.entry.length; i++) {\n                try {\n                    var event = extract(data.feed.entry[i]);\n                    if (event) { // blank rows return null\n                    var row_type = 'event';\n                    if (typeof(event.type) != 'undefined') {\n                        row_type = event.type;\n                        delete event.type;\n                    }\n                    if (row_type == 'title') {\n                        if (!timeline_config.title) {\n                        timeline_config.title = event;\n                        } else {\n                        timeline_config.warnings.push(\"Multiple title slides detected.\");\n                        timeline_config.events.push(event);\n                        }\n                    } else if (row_type == 'era') {\n                        timeline_config.eras.push(event);\n                    } else {\n                        timeline_config.events.push(event);\n                    }\n                    }\n                } catch(e) {\n                    if (e.message) {\n                        e = e.message;\n                    }\n                    timeline_config.errors.push(e + \" [\"+ i +\"]\");\n                }\n            };\n\n        }\n\n        return timeline_config;\n\n    }\n\n    var makeConfig = function(url, callback) {\n        var tc,\n            key = parseGoogleSpreadsheetURL(url);\n\n        if (key) {\n            try {\n                var json = jsonFromGoogleURL(url);\n            } catch(e) {\n                tc = new TL.TimelineConfig();\n                if (e.name == 'NetworkError') {\n                    tc.logError(new TL.Error(\"network_err\"));\n                } else if(e.name == 'TL.Error') {\n                    tc.logError(e);\n                } else {\n                    tc.logError(new TL.Error(\"unknown_read_err\", e.name));\n                }\n                callback(tc);\n                return;\n            }\n            tc = new TL.TimelineConfig(json);\n            if (json.errors) {\n                for (var i = 0; i < json.errors.length; i++) {\n                    tc.logError(json.errors[i]);\n                };\n            }\n            callback(tc);\n        } else {\n          TL.ajax({\n            url: url,\n            dataType: 'json',\n            success: function(data){\n            try {\n                tc = new TL.TimelineConfig(data);\n            } catch(e) {\n                tc = new TL.TimelineConfig();\n                tc.logError(e);\n            }\n            callback(tc);\n            },\n            error: function(xhr, errorType, error) {\n              tc = new TL.TimelineConfig();\n              if (errorType == 'parsererror') {\n                var error = new TL.Error(\"invalid_url_err\");\n              } else {\n                var error = new TL.Error(\"unknown_read_err\", errorType)\n              }\n              tc.logError(error);\n              callback(tc);\n            }\n          });\n\n        }\n    }\n\n    TL.ConfigFactory = {\n        // export for unit testing and use by authoring tool\n        parseGoogleSpreadsheetURL: parseGoogleSpreadsheetURL,\n        // export for unit testing\n        googleFeedJSONtoTimelineJSON: googleFeedJSONtoTimelineJSON,\n\n\n        fromGoogle: function(url) {\n            console.warn(\"TL.ConfigFactory.fromGoogle is deprecated and will be removed soon. Use TL.ConfigFactory.makeConfig(url,callback)\")\n            return jsonFromGoogleURL(url);\n\n        },\n\n        /*\n         * Given a URL to a Timeline data source, read the data, create a TimelineConfig\n         * object, and call the given `callback` function passing the created config as\n         * the only argument. This should be the main public interface to getting configs\n         * from any kind of URL, Google or direct JSON.\n         */\n        makeConfig: makeConfig,\n    }\n})(TL)\n\n\n/* **********************************************\n     Begin TL.Language.js\n********************************************** */\n\nTL.Language = function(options) {\n\t// borrowed from http://stackoverflow.com/a/14446414/102476\n\tfor (k in TL.Language.languages.en) {\n\t\tthis[k] = TL.Language.languages.en[k];\n\t}\n\tif (options && options.language && typeof(options.language) == 'string' && options.language != 'en') {\n\t\tvar code = options.language;\n\t\tif (!(code in TL.Language.languages)) {\n\t\t\tif (/\\.json$/.test(code)) {\n\t\t\t\tvar url = code;\n\t\t\t} else {\n\t\t\t\tvar fragment = \"/locale/\" + code + \".json\";\n\t\t\t\tvar script_path = options.script_path || TL.Timeline.source_path;\n\t\t\t\tif (/\\/$/.test(script_path)) { fragment = fragment.substr(1)}\n\t\t\t\tvar url = script_path + fragment;\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar xhr = TL.ajax({\n\t\t\t\turl: url, async: false\n\t\t\t});\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tTL.Language.languages[code] = JSON.parse(xhr.responseText);\n\t\t\t} else {\n\t\t\t\tthrow \"Could not load language [\" + code + \"]: \" + xhr.statusText;\n\t\t\t}\n\t\t}\n\t\tTL.Util.mergeData(this,TL.Language.languages[code]);\n\n\t}\n}\n\nTL.Language.formatNumber = function(val,mask) {\n\t\tif (mask.match(/%(\\.(\\d+))?f/)) {\n\t\t\tvar match = mask.match(/%(\\.(\\d+))?f/);\n\t\t\tvar token = match[0];\n\t\t\tif (match[2]) {\n\t\t\t\tval = val.toFixed(match[2]);\n\t\t\t}\n\t\t\treturn mask.replace(token,val);\n\t\t}\n\t\t// use mask as literal display value.\n\t\treturn mask;\n\t}\n\n\n\n/* TL.Util.mergeData is shallow, we have nested dicts.\n   This is a simplistic handling but should work.\n */\nTL.Language.prototype.mergeData = function(lang_json) {\n\tfor (k in TL.Language.languages.en) {\n\t\tif (lang_json[k]) {\n\t\t\tif (typeof(this[k]) == 'object') {\n\t\t\t\tTL.Util.mergeData(lang_json[k], this[k]);\n\t\t\t} else {\n\t\t\t\tthis[k] = lang_json[k]; // strings, mostly\n\t\t\t}\n\t\t}\n\t}\n}\n\nTL.Language.fallback = { messages: {} }; // placeholder to satisfy IE8 early compilation\nTL.Language.prototype.getMessage = function(k) {\n\treturn this.messages[k] || TL.Language.fallback.messages[k] || k;\n}\n\nTL.Language.prototype._ = TL.Language.prototype.getMessage; // keep it concise\n\nTL.Language.prototype.formatDate = function(date, format_name) {\n\n\tif (date.constructor == Date) {\n\t\treturn this.formatJSDate(date, format_name);\n\t}\n\n\tif (date.constructor == TL.BigYear) {\n\t\treturn this.formatBigYear(date, format_name);\n\t}\n\n\tif (date.data && date.data.date_obj) {\n\t\treturn this.formatDate(date.data.date_obj, format_name);\n\t}\n\n\ttrace(\"Unfamiliar date presented for formatting\");\n\treturn date.toString();\n}\n\nTL.Language.prototype.formatBigYear = function(bigyear, format_name) {\n\tvar the_year = bigyear.year;\n\tvar format_list = this.bigdateformats[format_name] || this.bigdateformats['fallback'];\n\n\tif (format_list) {\n\t\tfor (var i = 0; i < format_list.length; i++) {\n\t\t\tvar tuple = format_list[i];\n\t\t\tif (Math.abs(the_year / tuple[0]) > 1) {\n\t\t\t\t// will we ever deal with distant future dates?\n\t\t\t\treturn TL.Language.formatNumber(Math.abs(the_year / tuple[0]),tuple[1])\n\t\t\t}\n\t\t};\n\n\t\treturn the_year.toString();\n\n\t} else {\n\t    trace(\"Language file dateformats missing cosmological. Falling back.\");\n\t    return TL.Language.formatNumber(the_year,format_name);\n\t}\n}\n\nTL.Language.prototype.formatJSDate = function(js_date, format_name) {\n\t// ultimately we probably want this to work with TL.Date instead of (in addition to?) JS Date\n\t// utc, timezone and timezoneClip are carry over from Steven Levithan implementation. We probably aren't going to use them.\n\tvar self = this;\n\tvar formatPeriod = function(fmt, value) {\n\t\tvar formats = self.period_labels[fmt];\n\t\tif (formats) {\n\t\t\tvar fmt = (value < 12) ? formats[0] : formats[1];\n\t\t}\n\t\treturn \"<span class='tl-timeaxis-timesuffix'>\" + fmt + \"</span>\";\n\t}\n\n\tvar utc = false,\n\t\ttimezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n\t\ttimezoneClip = /[^-+\\dA-Z]/g;\n\n\n\tif (!format_name) {\n\t\tformat_name = 'full';\n\t}\n\n\tvar mask = this.dateformats[format_name] || TL.Language.fallback.dateformats[format_name];\n\tif (!mask) {\n\t\tmask = format_name; // allow custom format strings\n\t}\n\n\n\tvar\t_ = utc ? \"getUTC\" : \"get\",\n\t\td = js_date[_ + \"Date\"](),\n\t\tD = js_date[_ + \"Day\"](),\n\t\tm = js_date[_ + \"Month\"](),\n\t\ty = js_date[_ + \"FullYear\"](),\n\t\tH = js_date[_ + \"Hours\"](),\n\t\tM = js_date[_ + \"Minutes\"](),\n\t\ts = js_date[_ + \"Seconds\"](),\n\t\tL = js_date[_ + \"Milliseconds\"](),\n\t\to = utc ? 0 : js_date.getTimezoneOffset(),\n\t\tyear = \"\",\n\t\tflags = {\n\t\t\td:    d,\n\t\t\tdd:   TL.Util.pad(d),\n\t\t\tddd:  this.date.day_abbr[D],\n\t\t\tdddd: this.date.day[D],\n\t\t\tm:    m + 1,\n\t\t\tmm:   TL.Util.pad(m + 1),\n\t\t\tmmm:  this.date.month_abbr[m],\n\t\t\tmmmm: this.date.month[m],\n\t\t\tyy:   String(y).slice(2),\n\t\t\tyyyy: (y < 0 && this.has_negative_year_modifier()) ? Math.abs(y) : y,\n\t\t\th:    H % 12 || 12,\n\t\t\thh:   TL.Util.pad(H % 12 || 12),\n\t\t\tH:    H,\n\t\t\tHH:   TL.Util.pad(H),\n\t\t\tM:    M,\n\t\t\tMM:   TL.Util.pad(M),\n\t\t\ts:    s,\n\t\t\tss:   TL.Util.pad(s),\n\t\t\tl:    TL.Util.pad(L, 3),\n\t\t\tL:    TL.Util.pad(L > 99 ? Math.round(L / 10) : L),\n\t\t\tt:    formatPeriod('t',H),\n\t\t\ttt:   formatPeriod('tt',H),\n\t\t\tT:    formatPeriod('T',H),\n\t\t\tTT:   formatPeriod('TT',H),\n\t\t\tZ:    utc ? \"UTC\" : (String(js_date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n\t\t\to:    (o > 0 ? \"-\" : \"+\") + TL.Util.pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n\t\t\tS:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n\t\t};\n\n\t\tvar formatted = mask.replace(TL.Language.DATE_FORMAT_TOKENS, function ($0) {\n\t\t\treturn $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n\t\t});\n\n\t\treturn this._applyEra(formatted, y);\n}\n\nTL.Language.prototype.has_negative_year_modifier = function() {\n\treturn Boolean(this.era_labels.negative_year.prefix || this.era_labels.negative_year.suffix);\n}\n\n\nTL.Language.prototype._applyEra = function(formatted_date, original_year) {\n\t// trusts that the formatted_date was property created with a non-negative year if there are\n\t// negative affixes to be applied\n\tvar labels = (original_year < 0) ? this.era_labels.negative_year : this.era_labels.positive_year;\n\tvar result = '';\n\tif (labels.prefix) { result += '<span>' + labels.prefix + '</span> ' }\n\tresult += formatted_date;\n\tif (labels.suffix) { result += ' <span>' + labels.suffix + '</span>' }\n\treturn result;\n}\n\n\nTL.Language.DATE_FORMAT_TOKENS = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g;\n\nTL.Language.languages = {\n/*\n\tThis represents the canonical list of message keys which translation files should handle. The existence of the 'en.json' file should not mislead you.\n\tIt is provided more as a starting point for someone who wants to provide a\n\tnew translation since the form for non-default languages (JSON not JS) is slightly different from what appears below. Also, those files have some message keys grandfathered in from TimelineJS2 which we'd rather not have to\n\tget \"re-translated\" if we use them.\n*/\n\ten: {\n\t\tname: \t\t\t\t\t\"English\",\n\t\tlang: \t\t\t\t\t\"en\",\n        api: {\n            wikipedia:          \"en\" // the two letter code at the beginning of the Wikipedia subdomain for this language\n        },\n\t\tmessages: {\n\t\t\tloading: \t\t\t            \t\t  \"Loading\",\n\t\t\twikipedia: \t\t\t            \t\t\"From Wikipedia, the free encyclopedia\",\n\t\t\terror: \t\t\t\t            \t\t\t\"Error\",\n      contract_timeline:              \"Contract Timeline\",\n      return_to_title:                \"Return to Title\",\n      loading_content:                \"Loading Content\",\n      expand_timeline:                \"Expand Timeline\",\n      loading_timeline:               \"Loading Timeline... \",\n      swipe_to_navigate:              \"Swipe to Navigate<br><span class='tl-button'>OK</span>\",\n      unknown_read_err:               \"An unexpected error occurred trying to read your spreadsheet data\",\n\t\t\tinvalid_url_err: \t\t\t\t\t\t\t\t\"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.\",\n\t\t\tinvalid_url_share_required:\t\t\t\"Because of unexpected changes to Google's data access API, the creator of this timeline must enable 'anyone with the url can read' access for this spreadsheet. See timeline.knightlab.com for more information.\",\n      network_err:                    \"Unable to read your Google Spreadsheet. Make sure you have published it to the web.\",\n      empty_feed_err:                 \"No data entries found\",\n      missing_start_date_err:         \"Missing start_date\",\n      invalid_data_format_err:        \"Header row has been modified.\",\n      date_compare_err:               \"Can't compare TL.Dates on different scales\",\n      invalid_scale_err:              \"Invalid scale\",\n      invalid_date_err:               \"Invalid date: month, day and year must be numbers.\",\n      invalid_separator_error:        \"Invalid time: misuse of : or . as separator.\",\n      invalid_hour_err:               \"Invalid time (hour)\",\n      invalid_minute_err:             \"Invalid time (minute)\",\n      invalid_second_err:             \"Invalid time (second)\",\n      invalid_fractional_err:         \"Invalid time (fractional seconds)\",\n      invalid_second_fractional_err:  \"Invalid time (seconds and fractional seconds)\",\n      invalid_year_err:               \"Invalid year\",\n      flickr_notfound_err:            \"Photo not found or private\",\n      flickr_invalidurl_err:          \"Invalid Flickr URL\",\n      imgur_invalidurl_err:           \"Invalid Imgur URL\",\n      twitter_invalidurl_err:         \"Invalid Twitter URL\",\n      twitter_load_err:               \"Unable to load Tweet\",\n      twitterembed_invalidurl_err:    \"Invalid Twitter Embed url\",\n      wikipedia_load_err:             \"Unable to load Wikipedia entry\",\n      youtube_invalidurl_err:         \"Invalid YouTube URL\",\n      spotify_invalid_url:            \"Invalid Spotify URL\",\n      template_value_err:             \"No value provided for variable\",\n      invalid_rgb_err:                \"Invalid RGB argument\",\n      time_scale_scale_err:           \"Don't know how to get date from time for scale\",\n      axis_helper_no_options_err:     \"Axis helper must be configured with options\",\n      axis_helper_scale_err:          \"No AxisHelper available for scale\",\n      invalid_integer_option:       \t\"Invalid option value—must be a whole number.\"\n\t\t},\n\t\tdate: {\n      month: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      month_abbr: [\"Jan.\", \"Feb.\", \"March\", \"April\", \"May\", \"June\", \"July\", \"Aug.\", \"Sept.\", \"Oct.\", \"Nov.\", \"Dec.\"],\n      day: [\"Sunday\",\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n      day_abbr: [\"Sun.\",\"Mon.\", \"Tues.\", \"Wed.\", \"Thurs.\", \"Fri.\", \"Sat.\"]\n\t\t},\n\t\tera_labels: { // specify prefix or suffix to apply to formatted date. Blanks mean no change.\n\t        positive_year: {\n\t        \tprefix: '',\n\t        \tsuffix: ''\n\t        },\n\t        negative_year: { // if either of these is specified, the year will be converted to positive before they are applied\n\t        \tprefix: '',\n\t        \tsuffix: 'BCE'\n\t        }\n        },\n        period_labels: {  // use of t/tt/T/TT legacy of original Timeline date format\n\t\t\tt: ['a', 'p'],\n\t\t\ttt: ['am', 'pm'],\n\t\t\tT: ['A', 'P'],\n\t\t\tTT: ['AM', 'PM']\n\t\t},\n\t\tdateformats: {\n\t\t\tyear: \"yyyy\",\n\t\t\tmonth_short: \"mmm\",\n\t\t\tmonth: \"mmmm yyyy\",\n\t\t\tfull_short: \"mmm d\",\n\t\t\tfull: \"mmmm d',' yyyy\",\n\t\t\ttime: \"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'\",\n\t\t\ttime_short: \"h:MM:ss TT\",\n\t\t\ttime_no_seconds_short: \"h:MM TT\",\n\t\t\ttime_no_minutes_short: \"h TT\",\n\t\t\ttime_no_seconds_small_date: \"h:MM TT' <small>'mmmm d',' yyyy'</small>'\",\n\t\t\ttime_milliseconds: \"l\",\n\t\t\tfull_long: \"mmm d',' yyyy 'at' h:MM TT\",\n\t\t\tfull_long_small_date: \"h:MM TT' <small>mmm d',' yyyy'</small>'\"\n\t\t},\n\t\tbigdateformats: {\n\t\t\tfallback: [ // a list of tuples, with t[0] an order of magnitude and t[1] a format string. format string syntax may change...\n\t\t\t\t[1000000000,\"%.2f billion years ago\"],\n\t\t\t\t[1000000,\"%.1f million years ago\"],\n\t\t\t\t[1000,\"%.1f thousand years ago\"],\n\t\t\t\t[1, \"%f years ago\"]\n\t\t\t],\n\t\t    compact: [\n\t\t\t\t[1000000000,\"%.2f bya\"],\n\t\t\t\t[1000000,\"%.1f mya\"],\n\t\t\t\t[1000,\"%.1f kya\"],\n\t\t\t\t[1, \"%f years ago\"]\n\t\t\t],\n\t\t    verbose: [\n\t\t\t\t[1000000000,\"%.2f billion years ago\"],\n\t\t\t\t[1000000,\"%.1f million years ago\"],\n\t\t\t\t[1000,\"%.1f thousand years ago\"],\n\t\t\t\t[1, \"%f years ago\"]\n\t\t\t]\n\t\t}\n\t}\n}\n\nTL.Language.fallback = new TL.Language();\n\n\n/* **********************************************\n     Begin TL.I18NMixins.js\n********************************************** */\n\n/*  TL.I18NMixins\n    assumes that its class has an options object with a TL.Language instance    \n================================================== */\nTL.I18NMixins = {\n    getLanguage: function() {\n        if (this.options && this.options.language) {\n            return this.options.language;\n        }\n        trace(\"Expected a language option\");\n        return TL.Language.fallback;\n    },\n\n    _: function(msg) {\n        return this.getLanguage()._(msg);\n    }\n}\n\n\n/* **********************************************\n     Begin TL.Ease.js\n********************************************** */\n\n/* The equations defined here are open source under BSD License.\n * http://www.robertpenner.com/easing_terms_of_use.html (c) 2003 Robert Penner\n * Adapted to single time-based by\n * Brian Crescimanno <brian.crescimanno@gmail.com>\n * Ken Snyder <kendsnyder@gmail.com>\n */\n\n/** MIT License\n *\n * KeySpline - use bezier curve for transition easing function\n * Copyright (c) 2012 Gaetan Renaudeau <renaudeau.gaetan@gmail.com>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * KeySpline - use bezier curve for transition easing function\n * is inspired from Firefox's nsSMILKeySpline.cpp\n * Usage:\n * var spline = new KeySpline(0.25, 0.1, 0.25, 1.0)\n * spline.get(x) => returns the easing value | x must be in [0, 1] range\n */\n\nTL.Easings = {\n    ease:        [0.25, 0.1, 0.25, 1.0], \n    linear:      [0.00, 0.0, 1.00, 1.0],\n    easein:     [0.42, 0.0, 1.00, 1.0],\n    easeout:    [0.00, 0.0, 0.58, 1.0],\n    easeinout: [0.42, 0.0, 0.58, 1.0]\n};\n\nTL.Ease = {\n\tKeySpline: function(a) {\n\t//KeySpline: function(mX1, mY1, mX2, mY2) {\n\t\tthis.get = function(aX) {\n\t\t\tif (a[0] == a[1] && a[2] == a[3]) return aX; // linear\n\t\t\treturn CalcBezier(GetTForX(aX), a[1], a[3]);\n\t\t}\n\n\t\tfunction A(aA1, aA2) {\n\t\t\treturn 1.0 - 3.0 * aA2 + 3.0 * aA1;\n\t\t}\n\n\t\tfunction B(aA1, aA2) {\n\t\t\treturn 3.0 * aA2 - 6.0 * aA1;\n\t\t}\n\n\t\tfunction C(aA1) {\n\t\t\treturn 3.0 * aA1;\n\t\t}\n\n\t\t// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n\n\t\tfunction CalcBezier(aT, aA1, aA2) {\n\t\t\treturn ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\t\t}\n\n\t\t// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n\n\t\tfunction GetSlope(aT, aA1, aA2) {\n\t\t\treturn 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n\t\t}\n\n\t\tfunction GetTForX(aX) {\n\t\t\t// Newton raphson iteration\n\t\t\tvar aGuessT = aX;\n\t\t\tfor (var i = 0; i < 4; ++i) {\n\t\t\t\tvar currentSlope = GetSlope(aGuessT, a[0], a[2]);\n\t\t\t\tif (currentSlope == 0.0) return aGuessT;\n\t\t\t\tvar currentX = CalcBezier(aGuessT, a[0], a[2]) - aX;\n\t\t\t\taGuessT -= currentX / currentSlope;\n\t\t\t}\n\t\t\treturn aGuessT;\n\t\t}\n\t},\n\t\n\teaseInSpline: function(t) {\n\t\tvar spline = new TL.Ease.KeySpline(TL.Easings.easein);\n\t\treturn spline.get(t);\n\t},\n\t\n\teaseInOutExpo: function(t) {\n\t\tvar spline = new TL.Ease.KeySpline(TL.Easings.easein);\n\t\treturn spline.get(t);\n\t},\n\t\n\teaseOut: function(t) {\n\t\treturn Math.sin(t * Math.PI / 2);\n\t},\n\teaseOutStrong: function(t) {\n\t\treturn (t == 1) ? 1 : 1 - Math.pow(2, - 10 * t);\n\t},\n\teaseIn: function(t) {\n\t\treturn t * t;\n\t},\n\teaseInStrong: function(t) {\n\t\treturn (t == 0) ? 0 : Math.pow(2, 10 * (t - 1));\n\t},\n\teaseOutBounce: function(pos) {\n\t\tif ((pos) < (1 / 2.75)) {\n\t\t\treturn (7.5625 * pos * pos);\n\t\t} else if (pos < (2 / 2.75)) {\n\t\t\treturn (7.5625 * (pos -= (1.5 / 2.75)) * pos + .75);\n\t\t} else if (pos < (2.5 / 2.75)) {\n\t\t\treturn (7.5625 * (pos -= (2.25 / 2.75)) * pos + .9375);\n\t\t} else {\n\t\t\treturn (7.5625 * (pos -= (2.625 / 2.75)) * pos + .984375);\n\t\t}\n\t},\n\teaseInBack: function(pos) {\n\t\tvar s = 1.70158;\n\t\treturn (pos) * pos * ((s + 1) * pos - s);\n\t},\n\teaseOutBack: function(pos) {\n\t\tvar s = 1.70158;\n\t\treturn (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\n\t},\n\tbounce: function(t) {\n\t\tif (t < (1 / 2.75)) {\n\t\t\treturn 7.5625 * t * t;\n\t\t}\n\t\tif (t < (2 / 2.75)) {\n\t\t\treturn 7.5625 * (t -= (1.5 / 2.75)) * t + 0.75;\n\t\t}\n\t\tif (t < (2.5 / 2.75)) {\n\t\t\treturn 7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375;\n\t\t}\n\t\treturn 7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375;\n\t},\n\tbouncePast: function(pos) {\n\t\tif (pos < (1 / 2.75)) {\n\t\t\treturn (7.5625 * pos * pos);\n\t\t} else if (pos < (2 / 2.75)) {\n\t\t\treturn 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + .75);\n\t\t} else if (pos < (2.5 / 2.75)) {\n\t\t\treturn 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + .9375);\n\t\t} else {\n\t\t\treturn 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + .984375);\n\t\t}\n\t},\n\tswingTo: function(pos) {\n\t\tvar s = 1.70158;\n\t\treturn (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\n\t},\n\tswingFrom: function(pos) {\n\t\tvar s = 1.70158;\n\t\treturn pos * pos * ((s + 1) * pos - s);\n\t},\n\telastic: function(pos) {\n\t\treturn -1 * Math.pow(4, - 8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\n\t},\n\tspring: function(pos) {\n\t\treturn 1 - (Math.cos(pos * 4.5 * Math.PI) * Math.exp(-pos * 6));\n\t},\n\tblink: function(pos, blinks) {\n\t\treturn Math.round(pos * (blinks || 5)) % 2;\n\t},\n\tpulse: function(pos, pulses) {\n\t\treturn (-Math.cos((pos * ((pulses || 5) - .5) * 2) * Math.PI) / 2) + .5;\n\t},\n\twobble: function(pos) {\n\t\treturn (-Math.cos(pos * Math.PI * (9 * pos)) / 2) + 0.5;\n\t},\n\tsinusoidal: function(pos) {\n\t\treturn (-Math.cos(pos * Math.PI) / 2) + 0.5;\n\t},\n\tflicker: function(pos) {\n\t\tvar pos = pos + (Math.random() - 0.5) / 5;\n\t\treturn easings.sinusoidal(pos < 0 ? 0 : pos > 1 ? 1 : pos);\n\t},\n\tmirror: function(pos) {\n\t\tif (pos < 0.5) return easings.sinusoidal(pos * 2);\n\t\telse return easings.sinusoidal(1 - (pos - 0.5) * 2);\n\t},\n\t// accelerating from zero velocity\n\teaseInQuad: function (t) { return t*t },\n\t// decelerating to zero velocity\n\teaseOutQuad: function (t) { return t*(2-t) },\n\t// acceleration until halfway, then deceleration\n\teaseInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n\t// accelerating from zero velocity \n\teaseInCubic: function (t) { return t*t*t },\n\t// decelerating to zero velocity \n\teaseOutCubic: function (t) { return (--t)*t*t+1 },\n\t// acceleration until halfway, then deceleration \n\teaseInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n\t// accelerating from zero velocity \n\teaseInQuart: function (t) { return t*t*t*t },\n\t// decelerating to zero velocity \n\teaseOutQuart: function (t) { return 1-(--t)*t*t*t },\n\t// acceleration until halfway, then deceleration\n\teaseInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n\t// accelerating from zero velocity\n\teaseInQuint: function (t) { return t*t*t*t*t },\n\t// decelerating to zero velocity\n\teaseOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n\t// acceleration until halfway, then deceleration \n\teaseInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\n};\n\n/*\nMath.easeInExpo = function (t, b, c, d) {\n\treturn c * Math.pow( 2, 10 * (t/d - 1) ) + b;\n};\n\n\t\t\n\n// exponential easing out - decelerating to zero velocity\n\n\nMath.easeOutExpo = function (t, b, c, d) {\n\treturn c * ( -Math.pow( 2, -10 * t/d ) + 1 ) + b;\n};\n\n\t\t\n\n// exponential easing in/out - accelerating until halfway, then decelerating\n\n\nMath.easeInOutExpo = function (t, b, c, d) {\n\tt /= d/2;\n\tif (t < 1) return c/2 * Math.pow( 2, 10 * (t - 1) ) + b;\n\tt--;\n\treturn c/2 * ( -Math.pow( 2, -10 * t) + 2 ) + b;\n};\n*/\n\n/* **********************************************\n     Begin TL.Animate.js\n********************************************** */\n\n/*\tTL.Animate\n\tBasic animation\n================================================== */\n\nTL.Animate = function(el, options) {\n\tvar animation = new tlanimate(el, options),\n\t\twebkit_timeout;\n\t\t/*\n\t\t// POSSIBLE ISSUE WITH WEBKIT FUTURE BUILDS\n\tvar onWebKitTimeout = function() {\n\n\t\tanimation.stop(true);\n\t}\n\tif (TL.Browser.webkit) {\n\t\twebkit_timeout = setTimeout(function(){onWebKitTimeout()}, options.duration);\n\t}\n\t*/\n\treturn animation;\n};\n\n\n/*\tBased on: Morpheus\n\thttps://github.com/ded/morpheus - (c) Dustin Diaz 2011\n\tLicense MIT\n================================================== */\nwindow.tlanimate = (function() {\n\n\tvar doc = document,\n\t\twin = window,\n\t\tperf = win.performance,\n\t\tperfNow = perf && (perf.now || perf.webkitNow || perf.msNow || perf.mozNow),\n\t\tnow = perfNow ? function () { return perfNow.call(perf) } : function () { return +new Date() },\n\t\thtml = doc.documentElement,\n\t\tfixTs = false, // feature detected below\n\t\tthousand = 1000,\n\t\trgbOhex = /^rgb\\(|#/,\n\t\trelVal = /^([+\\-])=([\\d\\.]+)/,\n\t\tnumUnit = /^(?:[\\+\\-]=?)?\\d+(?:\\.\\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,\n\t\trotate = /rotate\\(((?:[+\\-]=)?([\\-\\d\\.]+))deg\\)/,\n\t\tscale = /scale\\(((?:[+\\-]=)?([\\d\\.]+))\\)/,\n\t\tskew = /skew\\(((?:[+\\-]=)?([\\-\\d\\.]+))deg, ?((?:[+\\-]=)?([\\-\\d\\.]+))deg\\)/,\n\t\ttranslate = /translate\\(((?:[+\\-]=)?([\\-\\d\\.]+))px, ?((?:[+\\-]=)?([\\-\\d\\.]+))px\\)/,\n\t\t// these elements do not require 'px'\n\t\tunitless = { lineHeight: 1, zoom: 1, zIndex: 1, opacity: 1, transform: 1};\n\n  // which property name does this browser use for transform\n\tvar transform = function () {\n\t\tvar styles = doc.createElement('a').style,\n\t\t\tprops = ['webkitTransform', 'MozTransform', 'OTransform', 'msTransform', 'Transform'],\n\t\t\ti;\n\n\t\tfor (i = 0; i < props.length; i++) {\n\t\t\tif (props[i] in styles) return props[i]\n\t\t};\n\t}();\n\n\t// does this browser support the opacity property?\n\tvar opacity = function () {\n\t\treturn typeof doc.createElement('a').style.opacity !== 'undefined'\n\t}();\n\n\t// initial style is determined by the elements themselves\n\tvar getStyle = doc.defaultView && doc.defaultView.getComputedStyle ?\n\tfunction (el, property) {\n\t\tproperty = property == 'transform' ? transform : property\n\t\tproperty = camelize(property)\n\t\tvar value = null,\n\t\t\tcomputed = doc.defaultView.getComputedStyle(el, '');\n\n\t\tcomputed && (value = computed[property]);\n\t\treturn el.style[property] || value;\n\t} : html.currentStyle ?\n\n    function (el, property) {\n\t\tproperty = camelize(property)\n\n\t\tif (property == 'opacity') {\n\t\t\tvar val = 100\n\t\t\ttry {\n\t\t\t\tval = el.filters['DXImageTransform.Microsoft.Alpha'].opacity\n\t\t\t} catch (e1) {\n\t\t\t\ttry {\n\t\t\t\t\tval = el.filters('alpha').opacity\n\t\t\t\t} catch (e2) {\n\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn val / 100\n\t\t}\n\t\tvar value = el.currentStyle ? el.currentStyle[property] : null\n\t\treturn el.style[property] || value\n\t} :\n\n    function (el, property) {\n\t\treturn el.style[camelize(property)]\n    }\n\n  var frame = function () {\n    // native animation frames\n    // http://webstuff.nfshost.com/anim-timing/Overview.html\n    // http://dev.chromium.org/developers/design-documents/requestanimationframe-implementation\n    return win.requestAnimationFrame  ||\n      win.webkitRequestAnimationFrame ||\n      win.mozRequestAnimationFrame    ||\n      win.msRequestAnimationFrame     ||\n      win.oRequestAnimationFrame      ||\n      function (callback) {\n        win.setTimeout(function () {\n          callback(+new Date())\n        }, 17) // when I was 17..\n      }\n  }()\n\n  var children = []\n\n\tframe(function(timestamp) {\n\t  \t// feature-detect if rAF and now() are of the same scale (epoch or high-res),\n\t\t// if not, we have to do a timestamp fix on each frame\n\t\tfixTs = timestamp > 1e12 != now() > 1e12\n\t})\n\n  function has(array, elem, i) {\n    if (Array.prototype.indexOf) return array.indexOf(elem)\n    for (i = 0; i < array.length; ++i) {\n      if (array[i] === elem) return i\n    }\n  }\n\n  function render(timestamp) {\n    var i, count = children.length\n    // if we're using a high res timer, make sure timestamp is not the old epoch-based value.\n    // http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision\n    if (perfNow && timestamp > 1e12) timestamp = now()\n\tif (fixTs) timestamp = now()\n    for (i = count; i--;) {\n      children[i](timestamp)\n    }\n    children.length && frame(render)\n  }\n\n  function live(f) {\n    if (children.push(f) === 1) frame(render)\n  }\n\n  function die(f) {\n    var rest, index = has(children, f)\n    if (index >= 0) {\n      rest = children.slice(index + 1)\n      children.length = index\n      children = children.concat(rest)\n    }\n  }\n\n  function parseTransform(style, base) {\n    var values = {}, m\n    if (m = style.match(rotate)) values.rotate = by(m[1], base ? base.rotate : null)\n    if (m = style.match(scale)) values.scale = by(m[1], base ? base.scale : null)\n    if (m = style.match(skew)) {values.skewx = by(m[1], base ? base.skewx : null); values.skewy = by(m[3], base ? base.skewy : null)}\n    if (m = style.match(translate)) {values.translatex = by(m[1], base ? base.translatex : null); values.translatey = by(m[3], base ? base.translatey : null)}\n    return values\n  }\n\n  function formatTransform(v) {\n    var s = ''\n    if ('rotate' in v) s += 'rotate(' + v.rotate + 'deg) '\n    if ('scale' in v) s += 'scale(' + v.scale + ') '\n    if ('translatex' in v) s += 'translate(' + v.translatex + 'px,' + v.translatey + 'px) '\n    if ('skewx' in v) s += 'skew(' + v.skewx + 'deg,' + v.skewy + 'deg)'\n    return s\n  }\n\n  function rgb(r, g, b) {\n    return '#' + (1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1)\n  }\n\n  // convert rgb and short hex to long hex\n  function toHex(c) {\n    var m = c.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/)\n    return (m ? rgb(m[1], m[2], m[3]) : c)\n      .replace(/#(\\w)(\\w)(\\w)$/, '#$1$1$2$2$3$3') // short skirt to long jacket\n  }\n\n  // change font-size => fontSize etc.\n  function camelize(s) {\n    return s.replace(/-(.)/g, function (m, m1) {\n      return m1.toUpperCase()\n    })\n  }\n\n  // aren't we having it?\n  function fun(f) {\n    return typeof f == 'function'\n  }\n\n  function nativeTween(t) {\n    // default to a pleasant-to-the-eye easeOut (like native animations)\n    return Math.sin(t * Math.PI / 2)\n  }\n\n  /**\n    * Core tween method that requests each frame\n    * @param duration: time in milliseconds. defaults to 1000\n    * @param fn: tween frame callback function receiving 'position'\n    * @param done {optional}: complete callback function\n    * @param ease {optional}: easing method. defaults to easeOut\n    * @param from {optional}: integer to start from\n    * @param to {optional}: integer to end at\n    * @returns method to stop the animation\n    */\n  function tween(duration, fn, done, ease, from, to) {\n    ease = fun(ease) ? ease : morpheus.easings[ease] || nativeTween\n    var time = duration || thousand\n      , self = this\n      , diff = to - from\n      , start = now()\n      , stop = 0\n      , end = 0\n\n    function run(t) {\n      var delta = t - start\n      if (delta > time || stop) {\n        to = isFinite(to) ? to : 1\n        stop ? end && fn(to) : fn(to)\n        die(run)\n        return done && done.apply(self)\n      }\n      // if you don't specify a 'to' you can use tween as a generic delta tweener\n      // cool, eh?\n      isFinite(to) ?\n        fn((diff * ease(delta / time)) + from) :\n        fn(ease(delta / time))\n    }\n\n    live(run)\n\n    return {\n      stop: function (jump) {\n        stop = 1\n        end = jump // jump to end of animation?\n        if (!jump) done = null // remove callback if not jumping to end\n      }\n    }\n  }\n\n  /**\n    * generic bezier method for animating x|y coordinates\n    * minimum of 2 points required (start and end).\n    * first point start, last point end\n    * additional control points are optional (but why else would you use this anyway ;)\n    * @param points: array containing control points\n       [[0, 0], [100, 200], [200, 100]]\n    * @param pos: current be(tween) position represented as float  0 - 1\n    * @return [x, y]\n    */\n  function bezier(points, pos) {\n    var n = points.length, r = [], i, j\n    for (i = 0; i < n; ++i) {\n      r[i] = [points[i][0], points[i][1]]\n    }\n    for (j = 1; j < n; ++j) {\n      for (i = 0; i < n - j; ++i) {\n        r[i][0] = (1 - pos) * r[i][0] + pos * r[parseInt(i + 1, 10)][0]\n        r[i][1] = (1 - pos) * r[i][1] + pos * r[parseInt(i + 1, 10)][1]\n      }\n    }\n    return [r[0][0], r[0][1]]\n  }\n\n  // this gets you the next hex in line according to a 'position'\n  function nextColor(pos, start, finish) {\n    var r = [], i, e, from, to\n    for (i = 0; i < 6; i++) {\n      from = Math.min(15, parseInt(start.charAt(i),  16))\n      to   = Math.min(15, parseInt(finish.charAt(i), 16))\n      e = Math.floor((to - from) * pos + from)\n      e = e > 15 ? 15 : e < 0 ? 0 : e\n      r[i] = e.toString(16)\n    }\n    return '#' + r.join('')\n  }\n\n  // this retreives the frame value within a sequence\n  function getTweenVal(pos, units, begin, end, k, i, v) {\n    if (k == 'transform') {\n      v = {}\n      for (var t in begin[i][k]) {\n        v[t] = (t in end[i][k]) ? Math.round(((end[i][k][t] - begin[i][k][t]) * pos + begin[i][k][t]) * thousand) / thousand : begin[i][k][t]\n      }\n      return v\n    } else if (typeof begin[i][k] == 'string') {\n      return nextColor(pos, begin[i][k], end[i][k])\n    } else {\n      // round so we don't get crazy long floats\n      v = Math.round(((end[i][k] - begin[i][k]) * pos + begin[i][k]) * thousand) / thousand\n      // some css properties don't require a unit (like zIndex, lineHeight, opacity)\n      if (!(k in unitless)) v += units[i][k] || 'px'\n      return v\n    }\n  }\n\n  // support for relative movement via '+=n' or '-=n'\n  function by(val, start, m, r, i) {\n    return (m = relVal.exec(val)) ?\n      (i = parseFloat(m[2])) && (start + (m[1] == '+' ? 1 : -1) * i) :\n      parseFloat(val)\n  }\n\n  /**\n    * morpheus:\n    * @param element(s): HTMLElement(s)\n    * @param options: mixed bag between CSS Style properties & animation options\n    *  - {n} CSS properties|values\n    *     - value can be strings, integers,\n    *     - or callback function that receives element to be animated. method must return value to be tweened\n    *     - relative animations start with += or -= followed by integer\n    *  - duration: time in ms - defaults to 1000(ms)\n    *  - easing: a transition method - defaults to an 'easeOut' algorithm\n    *  - complete: a callback method for when all elements have finished\n    *  - bezier: array of arrays containing x|y coordinates that define the bezier points. defaults to none\n    *     - this may also be a function that receives element to be animated. it must return a value\n    */\n  function morpheus(elements, options) {\n    var els = elements ? (els = isFinite(elements.length) ? elements : [elements]) : [], i\n      , complete = options.complete\n      , duration = options.duration\n      , ease = options.easing\n      , points = options.bezier\n      , begin = []\n      , end = []\n      , units = []\n      , bez = []\n      , originalLeft\n      , originalTop\n\n    if (points) {\n      // remember the original values for top|left\n      originalLeft = options.left;\n      originalTop = options.top;\n      delete options.right;\n      delete options.bottom;\n      delete options.left;\n      delete options.top;\n    }\n\n    for (i = els.length; i--;) {\n\n      // record beginning and end states to calculate positions\n      begin[i] = {}\n      end[i] = {}\n      units[i] = {}\n\n      // are we 'moving'?\n      if (points) {\n\n        var left = getStyle(els[i], 'left')\n          , top = getStyle(els[i], 'top')\n          , xy = [by(fun(originalLeft) ? originalLeft(els[i]) : originalLeft || 0, parseFloat(left)),\n                  by(fun(originalTop) ? originalTop(els[i]) : originalTop || 0, parseFloat(top))]\n\n        bez[i] = fun(points) ? points(els[i], xy) : points\n        bez[i].push(xy)\n        bez[i].unshift([\n          parseInt(left, 10),\n          parseInt(top, 10)\n        ])\n      }\n\n      for (var k in options) {\n        switch (k) {\n        case 'complete':\n        case 'duration':\n        case 'easing':\n        case 'bezier':\n          continue\n        }\n        var v = getStyle(els[i], k), unit\n          , tmp = fun(options[k]) ? options[k](els[i]) : options[k]\n        if (typeof tmp == 'string' &&\n            rgbOhex.test(tmp) &&\n            !rgbOhex.test(v)) {\n          delete options[k]; // remove key :(\n          continue; // cannot animate colors like 'orange' or 'transparent'\n                    // only #xxx, #xxxxxx, rgb(n,n,n)\n        }\n\n        begin[i][k] = k == 'transform' ? parseTransform(v) :\n          typeof tmp == 'string' && rgbOhex.test(tmp) ?\n            toHex(v).slice(1) :\n            parseFloat(v)\n        end[i][k] = k == 'transform' ? parseTransform(tmp, begin[i][k]) :\n          typeof tmp == 'string' && tmp.charAt(0) == '#' ?\n            toHex(tmp).slice(1) :\n            by(tmp, parseFloat(v));\n        // record original unit\n        (typeof tmp == 'string') && (unit = tmp.match(numUnit)) && (units[i][k] = unit[1])\n      }\n    }\n    // ONE TWEEN TO RULE THEM ALL\n    return tween.apply(els, [duration, function (pos, v, xy) {\n      // normally not a fan of optimizing for() loops, but we want something\n      // fast for animating\n      for (i = els.length; i--;) {\n        if (points) {\n          xy = bezier(bez[i], pos)\n          els[i].style.left = xy[0] + 'px'\n          els[i].style.top = xy[1] + 'px'\n        }\n        for (var k in options) {\n          v = getTweenVal(pos, units, begin, end, k, i)\n          k == 'transform' ?\n            els[i].style[transform] = formatTransform(v) :\n            k == 'opacity' && !opacity ?\n              (els[i].style.filter = 'alpha(opacity=' + (v * 100) + ')') :\n              (els[i].style[camelize(k)] = v)\n        }\n      }\n    }, complete, ease])\n  }\n\n  // expose useful methods\n  morpheus.tween = tween\n  morpheus.getStyle = getStyle\n  morpheus.bezier = bezier\n  morpheus.transform = transform\n  morpheus.parseTransform = parseTransform\n  morpheus.formatTransform = formatTransform\n  morpheus.easings = {}\n\n  return morpheus\n})();\n\n\n/* **********************************************\n     Begin TL.Point.js\n********************************************** */\n\n/*\tTL.Point\n\tInspired by Leaflet\n\tTL.Point represents a point with x and y coordinates.\n================================================== */\n\nTL.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {\n\tthis.x = (round ? Math.round(x) : x);\n\tthis.y = (round ? Math.round(y) : y);\n};\n\nTL.Point.prototype = {\n\tadd: function (point) {\n\t\treturn this.clone()._add(point);\n\t},\n\n\t_add: function (point) {\n\t\tthis.x += point.x;\n\t\tthis.y += point.y;\n\t\treturn this;\n\t},\n\n\tsubtract: function (point) {\n\t\treturn this.clone()._subtract(point);\n\t},\n\n\t// destructive subtract (faster)\n\t_subtract: function (point) {\n\t\tthis.x -= point.x;\n\t\tthis.y -= point.y;\n\t\treturn this;\n\t},\n\n\tdivideBy: function (num, round) {\n\t\treturn new TL.Point(this.x / num, this.y / num, round);\n\t},\n\n\tmultiplyBy: function (num) {\n\t\treturn new TL.Point(this.x * num, this.y * num);\n\t},\n\n\tdistanceTo: function (point) {\n\t\tvar x = point.x - this.x,\n\t\t\ty = point.y - this.y;\n\t\treturn Math.sqrt(x * x + y * y);\n\t},\n\n\tround: function () {\n\t\treturn this.clone()._round();\n\t},\n\n\t// destructive round\n\t_round: function () {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t},\n\n\tclone: function () {\n\t\treturn new TL.Point(this.x, this.y);\n\t},\n\n\ttoString: function () {\n\t\treturn 'Point(' +\n\t\t\t\tTL.Util.formatNum(this.x) + ', ' +\n\t\t\t\tTL.Util.formatNum(this.y) + ')';\n\t}\n};\n\n/* **********************************************\n     Begin TL.DomMixins.js\n********************************************** */\n\n/*\tTL.DomMixins\n\tDOM methods used regularly\n\tAssumes there is a _el.container and animator\n================================================== */\nTL.DomMixins = {\n\t\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function(animate) {\n\t\tif (animate) {\n\t\t\t/*\n\t\t\tthis.animator = TL.Animate(this._el.container, {\n\t\t\t\tleft: \t\t-(this._el.container.offsetWidth * n) + \"px\",\n\t\t\t\tduration: \tthis.options.duration,\n\t\t\t\teasing: \tthis.options.ease\n\t\t\t});\n\t\t\t*/\n\t\t} else {\n\t\t\tthis._el.container.style.display = \"block\";\n\t\t}\n\t},\n\t\n\thide: function(animate) {\n\t\tthis._el.container.style.display = \"none\";\n\t},\n\t\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t\tthis.onAdd();\n\t},\n\t\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t\tthis.onRemove();\n\t},\n\t\n\t/*\tAnimate to Position\n\t================================================== */\n\tanimatePosition: function(pos, el) {\n\t\tvar ani = {\n\t\t\tduration: \tthis.options.duration,\n\t\t\teasing: \tthis.options.ease\n\t\t};\n\t\tfor (var name in pos) {\n\t\t\tif (pos.hasOwnProperty(name)) {\n\t\t\t\tani[name] = pos[name] + \"px\";\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.animator) {\n\t\t\tthis.animator.stop();\n\t\t}\n\t\tthis.animator = TL.Animate(el, ani);\n\t},\n\t\n\t/*\tEvents\n\t================================================== */\n\t\n\tonLoaded: function() {\n\t\tthis.fire(\"loaded\", this.data);\n\t},\n\t\n\tonAdd: function() {\n\t\tthis.fire(\"added\", this.data);\n\t},\n\n\tonRemove: function() {\n\t\tthis.fire(\"removed\", this.data);\n\t},\n\t\n\t/*\tSet the Position\n\t================================================== */\n\tsetPosition: function(pos, el) {\n\t\tfor (var name in pos) {\n\t\t\tif (pos.hasOwnProperty(name)) {\n\t\t\t\tif (el) {\n\t\t\t\t\tel.style[name] = pos[name] + \"px\";\n\t\t\t\t} else {\n\t\t\t\t\tthis._el.container.style[name] = pos[name] + \"px\";\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetPosition: function() {\n\t\treturn TL.Dom.getPosition(this._el.container);\n\t}\n\t\n};\n\n\n/* **********************************************\n     Begin TL.Dom.js\n********************************************** */\n\n/*\tTL.Dom\n\tUtilities for working with the DOM\n================================================== */\n\nTL.Dom = {\n\n\tget: function(id) {\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\n\t},\n\n\tgetByClass: function(id) {\n\t\tif (id) {\n\t\t\treturn document.getElementsByClassName(id);\n\t\t}\n\t},\n\n\tcreate: function(tagName, className, container) {\n\t\tvar el = document.createElement(tagName);\n\t\tel.className = className;\n\t\tif (container) {\n\t\t\tcontainer.appendChild(el);\n\t\t}\n\t\treturn el;\n\t},\n\n\tcreateText: function(content, container) {\n\t\tvar el = document.createTextNode(content);\n\t\tif (container) {\n\t\t\tcontainer.appendChild(el);\n\t\t}\n\t\treturn el;\n\t},\n\n\tgetTranslateString: function (point) {\n\t\treturn TL.Dom.TRANSLATE_OPEN +\n\t\t\t\tpoint.x + 'px,' + point.y + 'px' +\n\t\t\t\tTL.Dom.TRANSLATE_CLOSE;\n\t},\n\n\tsetPosition: function (el, point) {\n\t\tel._tl_pos = point;\n\t\tif (TL.Browser.webkit3d) {\n\t\t\tel.style[TL.Dom.TRANSFORM] =  TL.Dom.getTranslateString(point);\n\n\t\t\tif (TL.Browser.android) {\n\t\t\t\tel.style['-webkit-perspective'] = '1000';\n\t\t\t\tel.style['-webkit-backface-visibility'] = 'hidden';\n\t\t\t}\n\t\t} else {\n\t\t\tel.style.left = point.x + 'px';\n\t\t\tel.style.top = point.y + 'px';\n\t\t}\n\t},\n\n\tgetPosition: function(el){\n\t    var pos = {\n\t    \tx: 0,\n\t\t\ty: 0\n\t    }\n\t    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {\n\t        pos.x += el.offsetLeft// - el.scrollLeft;\n\t        pos.y += el.offsetTop// - el.scrollTop;\n\t        el = el.offsetParent;\n\t    }\n\t    return pos;\n\t},\n\n\ttestProp: function(props) {\n\t\tvar style = document.documentElement.style;\n\n\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\tif (props[i] in style) {\n\t\t\t\treturn props[i];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n};\n\nTL.Util.mergeData(TL.Dom, {\n\tTRANSITION: TL.Dom.testProp(['transition', 'webkitTransition', 'OTransition', 'MozTransition', 'msTransition']),\n\tTRANSFORM: TL.Dom.testProp(['transformProperty', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']),\n\n\tTRANSLATE_OPEN: 'translate' + (TL.Browser.webkit3d ? '3d(' : '('),\n\tTRANSLATE_CLOSE: TL.Browser.webkit3d ? ',0)' : ')'\n});\n\n\n/* **********************************************\n     Begin TL.DomUtil.js\n********************************************** */\n\n/*\tTL.DomUtil\n\tInspired by Leaflet\n\tTL.DomUtil contains various utility functions for working with DOM\n================================================== */\n\n\nTL.DomUtil = {\n\tget: function (id) {\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\n\t},\n\n\tgetStyle: function (el, style) {\n\t\tvar value = el.style[style];\n\t\tif (!value && el.currentStyle) {\n\t\t\tvalue = el.currentStyle[style];\n\t\t}\n\t\tif (!value || value === 'auto') {\n\t\t\tvar css = document.defaultView.getComputedStyle(el, null);\n\t\t\tvalue = css ? css[style] : null;\n\t\t}\n\t\treturn (value === 'auto' ? null : value);\n\t},\n\n\tgetViewportOffset: function (element) {\n\t\tvar top = 0,\n\t\t\tleft = 0,\n\t\t\tel = element,\n\t\t\tdocBody = document.body;\n\n\t\tdo {\n\t\t\ttop += el.offsetTop || 0;\n\t\t\tleft += el.offsetLeft || 0;\n\n\t\t\tif (el.offsetParent === docBody &&\n\t\t\t\t\tTL.DomUtil.getStyle(el, 'position') === 'absolute') {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tel = el.offsetParent;\n\t\t} while (el);\n\n\t\tel = element;\n\n\t\tdo {\n\t\t\tif (el === docBody) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttop -= el.scrollTop || 0;\n\t\t\tleft -= el.scrollLeft || 0;\n\n\t\t\tel = el.parentNode;\n\t\t} while (el);\n\n\t\treturn new TL.Point(left, top);\n\t},\n\n\tcreate: function (tagName, className, container) {\n\t\tvar el = document.createElement(tagName);\n\t\tel.className = className;\n\t\tif (container) {\n\t\t\tcontainer.appendChild(el);\n\t\t}\n\t\treturn el;\n\t},\n\n\tdisableTextSelection: function () {\n\t\tif (document.selection && document.selection.empty) {\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\tif (!this._onselectstart) {\n\t\t\tthis._onselectstart = document.onselectstart;\n\t\t\tdocument.onselectstart = TL.Util.falseFn;\n\t\t}\n\t},\n\n\tenableTextSelection: function () {\n\t\tdocument.onselectstart = this._onselectstart;\n\t\tthis._onselectstart = null;\n\t},\n\n\thasClass: function (el, name) {\n\t\treturn (el.className.length > 0) &&\n\t\t\t\tnew RegExp(\"(^|\\\\s)\" + name + \"(\\\\s|$)\").test(el.className);\n\t},\n\n\taddClass: function (el, name) {\n\t\tif (!TL.DomUtil.hasClass(el, name)) {\n\t\t\tel.className += (el.className ? ' ' : '') + name;\n\t\t}\n\t},\n\n\tremoveClass: function (el, name) {\n\t\tel.className = el.className.replace(/(\\S+)\\s*/g, function (w, match) {\n\t\t\tif (match === name) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn w;\n\t\t}).replace(/^\\s+/, '');\n\t},\n\n\tsetOpacity: function (el, value) {\n\t\tif (TL.Browser.ie) {\n\t\t\tel.style.filter = 'alpha(opacity=' + Math.round(value * 100) + ')';\n\t\t} else {\n\t\t\tel.style.opacity = value;\n\t\t}\n\t},\n\n\n\ttestProp: function (props) {\n\t\tvar style = document.documentElement.style;\n\n\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\tif (props[i] in style) {\n\t\t\t\treturn props[i];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tgetTranslateString: function (point) {\n\n\t\treturn TL.DomUtil.TRANSLATE_OPEN +\n\t\t\t\tpoint.x + 'px,' + point.y + 'px' +\n\t\t\t\tTL.DomUtil.TRANSLATE_CLOSE;\n\t},\n\n\tgetScaleString: function (scale, origin) {\n\t\tvar preTranslateStr = TL.DomUtil.getTranslateString(origin),\n\t\t\tscaleStr = ' scale(' + scale + ') ',\n\t\t\tpostTranslateStr = TL.DomUtil.getTranslateString(origin.multiplyBy(-1));\n\n\t\treturn preTranslateStr + scaleStr + postTranslateStr;\n\t},\n\n\tsetPosition: function (el, point) {\n\t\tel._tl_pos = point;\n\t\tif (TL.Browser.webkit3d) {\n\t\t\tel.style[TL.DomUtil.TRANSFORM] =  TL.DomUtil.getTranslateString(point);\n\n\t\t\tif (TL.Browser.android) {\n\t\t\t\tel.style['-webkit-perspective'] = '1000';\n\t\t\t\tel.style['-webkit-backface-visibility'] = 'hidden';\n\t\t\t}\n\t\t} else {\n\t\t\tel.style.left = point.x + 'px';\n\t\t\tel.style.top = point.y + 'px';\n\t\t}\n\t},\n\n\tgetPosition: function (el) {\n\t\treturn el._tl_pos;\n\t}\n};\n\n/* **********************************************\n     Begin TL.DomEvent.js\n********************************************** */\n\n/*\tTL.DomEvent\n\tInspired by Leaflet \n\tDomEvent contains functions for working with DOM events.\n================================================== */\n// TODO stamp\n\nTL.DomEvent = {\n\t/* inpired by John Resig, Dean Edwards and YUI addEvent implementations */\n\taddListener: function (/*HTMLElement*/ obj, /*String*/ type, /*Function*/ fn, /*Object*/ context) {\n\t\tvar id = TL.Util.stamp(fn),\n\t\t\tkey = '_tl_' + type + id;\n\n\t\tif (obj[key]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar handler = function (e) {\n\t\t\treturn fn.call(context || obj, e || TL.DomEvent._getEvent());\n\t\t};\n\n\t\tif (TL.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {\n\t\t\tthis.addDoubleTapListener(obj, handler, id);\n\t\t} else if ('addEventListener' in obj) {\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.addEventListener(type, handler, false);\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\n\t\t\t\tvar originalHandler = handler,\n\t\t\t\t\tnewType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');\n\t\t\t\thandler = function (e) {\n\t\t\t\t\tif (!TL.DomEvent._checkMouse(obj, e)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn originalHandler(e);\n\t\t\t\t};\n\t\t\t\tobj.addEventListener(newType, handler, false);\n\t\t\t} else {\n\t\t\t\tobj.addEventListener(type, handler, false);\n\t\t\t}\n\t\t} else if ('attachEvent' in obj) {\n\t\t\tobj.attachEvent(\"on\" + type, handler);\n\t\t}\n\n\t\tobj[key] = handler;\n\t},\n\n\tremoveListener: function (/*HTMLElement*/ obj, /*String*/ type, /*Function*/ fn) {\n\t\tvar id = TL.Util.stamp(fn),\n\t\t\tkey = '_tl_' + type + id,\n\t\t\thandler = obj[key];\n\n\t\tif (!handler) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (TL.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {\n\t\t\tthis.removeDoubleTapListener(obj, id);\n\t\t} else if ('removeEventListener' in obj) {\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.removeEventListener(type, handler, false);\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\n\t\t\t\tobj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);\n\t\t\t} else {\n\t\t\t\tobj.removeEventListener(type, handler, false);\n\t\t\t}\n\t\t} else if ('detachEvent' in obj) {\n\t\t\tobj.detachEvent(\"on\" + type, handler);\n\t\t}\n\t\tobj[key] = null;\n\t},\n\n\t_checkMouse: function (el, e) {\n\t\tvar related = e.relatedTarget;\n\n\t\tif (!related) {\n\t\t\treturn true;\n\t\t}\n\n\t\ttry {\n\t\t\twhile (related && (related !== el)) {\n\t\t\t\trelated = related.parentNode;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (related !== el);\n\t},\n\n\t/*jshint noarg:false */ // evil magic for IE\n\t_getEvent: function () {\n\t\tvar e = window.event;\n\t\tif (!e) {\n\t\t\tvar caller = arguments.callee.caller;\n\t\t\twhile (caller) {\n\t\t\t\te = caller['arguments'][0];\n\t\t\t\tif (e && window.Event === e.constructor) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcaller = caller.caller;\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t},\n\t/*jshint noarg:false */\n\n\tstopPropagation: function (/*Event*/ e) {\n\t\tif (e.stopPropagation) {\n\t\t\te.stopPropagation();\n\t\t} else {\n\t\t\te.cancelBubble = true;\n\t\t}\n\t},\n\t\n\t// TODO TL.Draggable.START\n\tdisableClickPropagation: function (/*HTMLElement*/ el) {\n\t\tTL.DomEvent.addListener(el, TL.Draggable.START, TL.DomEvent.stopPropagation);\n\t\tTL.DomEvent.addListener(el, 'click', TL.DomEvent.stopPropagation);\n\t\tTL.DomEvent.addListener(el, 'dblclick', TL.DomEvent.stopPropagation);\n\t},\n\n\tpreventDefault: function (/*Event*/ e) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t},\n\n\tstop: function (e) {\n\t\tTL.DomEvent.preventDefault(e);\n\t\tTL.DomEvent.stopPropagation(e);\n\t},\n\n\n\tgetWheelDelta: function (e) {\n\t\tvar delta = 0;\n\t\tif (e.wheelDelta) {\n\t\t\tdelta = e.wheelDelta / 120;\n\t\t}\n\t\tif (e.detail) {\n\t\t\tdelta = -e.detail / 3;\n\t\t}\n\t\treturn delta;\n\t}\n};\n\n\n\n\n/* **********************************************\n     Begin TL.StyleSheet.js\n********************************************** */\n\n/*\tTL.StyleSheet\n\tStyle Sheet Object\n================================================== */\n\nTL.StyleSheet = TL.Class.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t_el: {},\n\t\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function() {\n\t\t// Borrowed from: http://davidwalsh.name/add-rules-stylesheets\n\t\tthis.style = document.createElement(\"style\");\n\t\t\n\t\t// WebKit hack :(\n\t\tthis.style.appendChild(document.createTextNode(\"\"));\n\t\t\n\t\t// Add the <style> element to the page\n\t\tdocument.head.appendChild(this.style);\n\t\t\n\t\tthis.sheet = this.style.sheet;\n\t\t\n\t},\n\t\n\taddRule: function(selector, rules, index) {\n\t\tvar _index = 0;\n\t\t\n\t\tif (index) {\n\t\t\t_index = index;\n\t\t}\n\t\t\n\t\tif(\"insertRule\" in this.sheet) {\n\t\t\tthis.sheet.insertRule(selector + \"{\" + rules + \"}\", _index);\n\t\t}\n\t\telse if(\"addRule\" in this.sheet) {\n\t\t\tthis.sheet.addRule(selector, rules, _index);\n\t\t}\n\t},\n\t\n\n\t/*\tEvents\n\t================================================== */\n\tonLoaded: function(error) {\n\t\tthis._state.loaded = true;\n\t\tthis.fire(\"loaded\", this.data);\n\t}\n\t\n});\n\n/* **********************************************\n     Begin TL.Date.js\n********************************************** */\n\n/*\tTL.Date\n\tDate object\n\tMONTHS are 1-BASED, not 0-BASED (different from Javascript date objects)\n================================================== */\n\n//\n// Class for human dates\n//\n\nTL.Date = TL.Class.extend({\n\n    // @data = ms, JS Date object, or JS dictionary with date properties\n\tinitialize: function (data, format, format_short) {\n\t    if (typeof(data) == 'number') {\n\t\t\tthis.data = {\n\t\t\t\tformat:     \"yyyy mmmm\",\n\t\t\t\tdate_obj:   new Date(data)\n\t\t\t};\n\t    } else if(Date == data.constructor) {\n\t\t\tthis.data = {\n\t\t\t\tformat:     \"yyyy mmmm\",\n\t\t\t\tdate_obj:   data\n\t\t\t};\n\t    } else {\n\t        this.data = JSON.parse(JSON.stringify(data)); // clone don't use by reference.\n            this._createDateObj();\n\t    }\n\n\t\tthis._setFormat(format, format_short);\n    },\n\n\tsetDateFormat: function(format) {\n\t\tthis.data.format = format;\n\t},\n\n\tgetDisplayDate: function(language, format) {\n\t    if (this.data.display_date) {\n\t        return this.data.display_date;\n\t    }\n        if (!language) {\n            language = TL.Language.fallback;\n        }\n        if (language.constructor != TL.Language) {\n            trace(\"First argument to getDisplayDate must be TL.Language\");\n            language = TL.Language.fallback;\n        }\n\n        var format_key = format || this.data.format;\n        return language.formatDate(this.data.date_obj, format_key);\n\t},\n\n\tgetMillisecond: function() {\n\t\treturn this.getTime();\n\t},\n\n\tgetTime: function() {\n\t\treturn this.data.date_obj.getTime();\n\t},\n\n\tisBefore: function(other_date) {\n        if (!this.data.date_obj.constructor == other_date.data.date_obj.constructor) {\n            throw new TL.Error(\"date_compare_err\") // but should be able to compare 'cosmological scale' dates once we get to that...\n        }\n        if ('isBefore' in this.data.date_obj) {\n            return this.data.date_obj['isBefore'](other_date.data.date_obj);\n        }\n        return this.data.date_obj < other_date.data.date_obj\n\t},\n\n\tisAfter: function(other_date) {\n        if (!this.data.date_obj.constructor == other_date.data.date_obj.constructor) {\n            throw new TL.Error(\"date_compare_err\") // but should be able to compare 'cosmological scale' dates once we get to that...\n        }\n        if ('isAfter' in this.data.date_obj) {\n            return this.data.date_obj['isAfter'](other_date.data.date_obj);\n        }\n        return this.data.date_obj > other_date.data.date_obj\n\t},\n\n    // Return a new TL.Date which has been 'floored' at the given scale.\n    // @scale = string value from TL.Date.SCALES\n    floor: function(scale) {\n        var d = new Date(this.data.date_obj.getTime());\n        for (var i = 0; i < TL.Date.SCALES.length; i++) {\n             // for JS dates, we iteratively apply flooring functions\n            TL.Date.SCALES[i][2](d);\n            if (TL.Date.SCALES[i][0] == scale) return new TL.Date(d);\n        };\n\n        throw new TL.Error(\"invalid_scale_err\", scale);\n    },\n\n\t/*\tPrivate Methods\n\t================================================== */\n\n    _getDateData: function() {\n        var _date = {\n            year: \t\t\t0,\n            month: \t\t\t1, // stupid JS dates\n            day: \t\t\t1,\n            hour: \t\t\t0,\n            minute: \t\t0,\n            second: \t\t0,\n            millisecond: \t0\n\t\t};\n\n\t\t// Merge data\n\t\tTL.Util.mergeData(_date, this.data);\n\n \t\t// Make strings into numbers\n\t\tvar DATE_PARTS = TL.Date.DATE_PARTS;\n\n \t\tfor (var ix in DATE_PARTS) {\n \t\t    var x = TL.Util.trim(_date[DATE_PARTS[ix]]);\n \t\t    if (!x.match(/^-?\\d*$/)) {\n \t\t        throw new TL.Error(\"invalid_date_err\", DATE_PARTS[ix] + \" = '\" + _date[DATE_PARTS[ix]] + \"'\");\n \t\t    }\n \t\t    \n\t\t\tvar parsed = parseInt(_date[DATE_PARTS[ix]]);\n\t\t\tif (isNaN(parsed)) {\n                parsed = (ix == 4 || ix == 5) ? 1 : 0; // month and day have diff baselines\n            }\n\t\t\t_date[DATE_PARTS[ix]] = parsed;\n\t\t}\n\n\t\tif (_date.month > 0 && _date.month <= 12) { // adjust for JS's weirdness\n\t\t\t_date.month = _date.month - 1;\n\t\t}\n\n\t\treturn _date;\n    },\n\n\t_createDateObj: function() {\n\t    var _date = this._getDateData();\n        this.data.date_obj = new Date(_date.year, _date.month, _date.day, _date.hour, _date.minute, _date.second, _date.millisecond);\n        if (this.data.date_obj.getFullYear() != _date.year) {\n            // Javascript has stupid defaults for two-digit years\n            this.data.date_obj.setFullYear(_date.year);\n        }\n\t},\n\n    /*  Find Best Format\n     * this may not work with 'cosmologic' dates, or with TL.Date if we\n     * support constructing them based on JS Date and time\n    ================================================== */\n    findBestFormat: function(variant) {\n        var eval_array = TL.Date.DATE_PARTS,\n            format = \"\";\n\n        for (var i = 0; i < eval_array.length; i++) {\n            if ( this.data[eval_array[i]]) {\n                if (variant) {\n                    if (!(variant in TL.Date.BEST_DATEFORMATS)) {\n                        variant = 'short'; // legacy\n                    }\n                } else {\n                    variant = 'base'\n                }\n                return TL.Date.BEST_DATEFORMATS[variant][eval_array[i]];\n            }\n        };\n        return \"\";\n    },\n    _setFormat: function(format, format_short) {\n\t\tif (format) {\n\t\t\tthis.data.format = format;\n\t\t} else if (!this.data.format) {\n\t\t\tthis.data.format = this.findBestFormat();\n\t\t}\n\n\t\tif (format_short) {\n\t\t\tthis.data.format_short = format_short;\n\t\t} else if (!this.data.format_short) {\n\t\t\tthis.data.format_short = this.findBestFormat(true);\n\t\t}\n    }\n});\n\n// offer something that can figure out the right date class to return\nTL.Date.makeDate = function(data) {\n    var date = new TL.Date(data);\n    if (!isNaN(date.getTime())) {\n        return date;\n    }\n    return new TL.BigDate(data);\n}\n\nTL.BigYear = TL.Class.extend({\n    initialize: function (year) {\n        this.year = parseInt(year);\n        if (isNaN(this.year)) {\n            throw new TL.Error('invalid_year_err', year);\n        }\n    },\n\n    isBefore: function(that) {\n        return this.year < that.year;\n    },\n\n    isAfter: function(that) {\n        return this.year > that.year;\n    },\n\n    getTime: function() {\n        return this.year;\n    }\n});\n\n(function(cls){\n    // human scales\n    cls.SCALES = [ // ( name, units_per_tick, flooring function )\n        ['millisecond',1, function(d) { }],\n        ['second',1000, function(d) { d.setMilliseconds(0);}],\n        ['minute',1000 * 60, function(d) { d.setSeconds(0);}],\n        ['hour',1000 * 60 * 60, function(d) { d.setMinutes(0);}],\n        ['day',1000 * 60 * 60 * 24, function(d) { d.setHours(0);}],\n        ['month',1000 * 60 * 60 * 24 * 30, function(d) { d.setDate(1);}],\n        ['year',1000 * 60 * 60 * 24 * 365, function(d) { d.setMonth(0);}],\n        ['decade',1000 * 60 * 60 * 24 * 365 * 10, function(d) {\n            var real_year = d.getFullYear();\n            d.setFullYear( real_year - (real_year % 10))\n        }],\n        ['century',1000 * 60 * 60 * 24 * 365 * 100, function(d) {\n            var real_year = d.getFullYear();\n            d.setFullYear( real_year - (real_year % 100))\n        }],\n        ['millennium',1000 * 60 * 60 * 24 * 365 * 1000, function(d) {\n            var real_year = d.getFullYear();\n            d.setFullYear( real_year - (real_year % 1000))\n        }]\n    ];\n\n    // Date parts from highest to lowest precision\n    cls.DATE_PARTS = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\n\n    var ISO8601_SHORT_PATTERN = /^([\\+-]?\\d+?)(-\\d{2}?)?(-\\d{2}?)?$/;\n    // regex below from\n    // http://www.pelagodesign.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/\n    var ISO8601_PATTERN = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n\n    /* For now, rather than extract parts from regexp, lets trust the browser.\n     * Famous last words...\n     * What about UTC vs local time?\n     * see also http://stackoverflow.com/questions/10005374/ecmascript-5-date-parse-results-for-iso-8601-test-cases\n     */\n    cls.parseISODate = function(str) {\n        var d = new Date(str);\n        if (isNaN(d)) {\n            throw new TL.Error(\"invalid_date_err\", str);\n        }\n        return {\n            year: d.getFullYear(),\n            month: d.getMonth() + 1,\n            day: d.getDate(),\n            hour: d.getHours(),\n            minute: d.getMinutes(),\n            second: d.getSeconds(),\n            millisecond: d.getMilliseconds()\n        }\n\n    }\n\n    cls.parseDate = function(str) {\n\n        if (str.match(ISO8601_SHORT_PATTERN)) {\n            // parse short specifically to avoid timezone offset confusion\n            // most browsers assume short is UTC, not local time.\n            var parts = str.match(ISO8601_SHORT_PATTERN).slice(1);\n            var d = { year: parts[0].replace('+','')} // year can be negative\n            if (parts[1]) { d['month'] = parts[1].replace('-',''); }\n            if (parts[2]) { d['day'] = parts[2].replace('-',''); }\n            return d;\n        }\n\n        if (str.match(ISO8601_PATTERN)) {\n            return cls.parseISODate(str);\n        }\n\n        if (str.match(/^\\-?\\d+$/)) {\n            return { year: str }\n        }\n\n        var parsed = {}\n        if (str.match(/\\d+\\/\\d+\\/\\d+/)) { // mm/yy/dddd\n            var date = str.match(/\\d+\\/\\d+\\/\\d+/)[0];\n            str = TL.Util.trim(str.replace(date,''));\n            var date_parts = date.split('/');\n            parsed.month = date_parts[0];\n            parsed.day = date_parts[1];\n            parsed.year = date_parts[2];\n        }\n\n        if (str.match(/\\d+\\/\\d+/)) { // mm/yy\n            var date = str.match(/\\d+\\/\\d+/)[0];\n            str = TL.Util.trim(str.replace(date,''));\n            var date_parts = date.split('/');\n            parsed.month = date_parts[0];\n            parsed.year = date_parts[1];\n        }\n        // todo: handle hours, minutes, seconds, millis other date formats, etc...\n        if (str.match(':')) {\n            var time_parts = str.split(':');\n            parsed.hour = time_parts[0];\n            parsed.minute = time_parts[1];\n            if (time_parts[2]) {\n                second_parts = time_parts[2].split('.');\n                parsed.second = second_parts[0];\n                parsed.millisecond = second_parts[1];\n            }\n        }\n        return parsed;\n    }\n\n    cls.BEST_DATEFORMATS = {\n        base: {\n            millisecond: 'time_short',\n            second: 'time',\n            minute: 'time_no_seconds_small_date',\n            hour: 'time_no_seconds_small_date',\n            day: 'full',\n            month: 'month',\n            year: 'year',\n            decade: 'year',\n            century: 'year',\n            millennium: 'year',\n            age: 'fallback',\n            epoch: 'fallback',\n            era: 'fallback',\n            eon: 'fallback',\n            eon2: 'fallback'\n        },\n\n        short: {\n            millisecond: 'time_short',\n            second: 'time_short',\n            minute: 'time_no_seconds_short',\n            hour: 'time_no_minutes_short',\n            day: 'full_short',\n            month: 'month_short',\n            year: 'year',\n            decade: 'year',\n            century: 'year',\n            millennium: 'year',\n            age: 'fallback',\n            epoch: 'fallback',\n            era: 'fallback',\n            eon: 'fallback',\n            eon2: 'fallback'\n        }\n    }\n\n\n})(TL.Date)\n\n\n//\n// Class for cosmological dates\n//\nTL.BigDate = TL.Date.extend({\n\n    // @data = TL.BigYear object or JS dictionary with date properties\n    initialize: function(data, format, format_short) {\n        if (TL.BigYear == data.constructor) {\n            this.data = {\n                date_obj:   data\n            }\n        } else {\n            this.data = JSON.parse(JSON.stringify(data));\n            this._createDateObj();\n        }\n\n        this._setFormat(format, format_short);\n    },\n\n    // Create date_obj\n    _createDateObj: function() {\n\t    var _date = this._getDateData();\n        this.data.date_obj = new TL.BigYear(_date.year);\n    },\n\n    // Return a new TL.BigDate which has been 'floored' at the given scale.\n    // @scale = string value from TL.BigDate.SCALES\n    floor: function(scale) {\n        for (var i = 0; i < TL.BigDate.SCALES.length; i++) {\n            if (TL.BigDate.SCALES[i][0] == scale) {\n                var floored = TL.BigDate.SCALES[i][2](this.data.date_obj);\n                return new TL.BigDate(floored);\n            }\n        };\n\n        throw new TL.Error(\"invalid_scale_err\", scale);\n    }\n});\n\n(function(cls){\n    // cosmo units are years, not millis\n    var AGE = 1000000;\n    var EPOCH = AGE * 10;\n    var ERA = EPOCH * 10;\n    var EON = ERA * 10;\n\n    var Floorer = function(unit) {\n        return function(a_big_year) {\n            var year = a_big_year.getTime();\n            return new TL.BigYear(Math.floor(year/unit) * unit);\n        }\n    }\n\n    // cosmological scales\n    cls.SCALES = [ // ( name, units_per_tick, flooring function )\n\t\t\t\t['year',1, new Floorer(1)],\n\t\t\t\t['decade',10, new Floorer(10)],\n\t\t\t\t['century',100, new Floorer(100)],\n\t\t\t\t['millennium',1000, new Floorer(1000)],\n        ['age',AGE, new Floorer(AGE)],          // 1M years\n        ['epoch',EPOCH, new Floorer(EPOCH)],    // 10M years\n        ['era',ERA, new Floorer(ERA)],          // 100M years\n        ['eon',EON, new Floorer(EON)]           // 1B years\n    ];\n\n})(TL.BigDate)\n\n\n/* **********************************************\n     Begin TL.DateUtil.js\n********************************************** */\n\n/*\tTL.DateUtil\n\tUtilities for parsing time\n================================================== */\n\n\nTL.DateUtil = {\n\tget: function (id) {\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\n\t},\n\n\tsortByDate: function(array,prop_name) { // only for use with slide data objects\n\t\tvar prop_name = prop_name || 'start_date';\n\t\tarray.sort(function(a,b){\n\t\t\tif (a[prop_name].isBefore(b[prop_name])) return -1;\n\t\t\tif (a[prop_name].isAfter(b[prop_name])) return 1;\n\t\t\treturn 0;\n\t\t});\n\t},\n\n\tparseTime: function(time_str) {\n\t\tvar parsed = {\n\t\t\thour: null, minute: null, second: null, millisecond: null // conform to keys in TL.Date\n\t\t}\n\t\tvar period = null;\n\t\tvar match = time_str.match(/(\\s*[AaPp]\\.?[Mm]\\.?\\s*)$/);\n\t\tif (match) {\n\t\t\tperiod = TL.Util.trim(match[0]);\n\t\t\ttime_str = TL.Util.trim(time_str.substring(0,time_str.lastIndexOf(period)));\n\t\t}\n\n\t\tvar parts = [];\n\t\tvar no_separators = time_str.match(/^\\s*(\\d{1,2})(\\d{2})\\s*$/);\n\t\tif (no_separators) {\n\t\t\tparts = no_separators.slice(1);\n\t\t} else {\n\t\t\tparts = time_str.split(':');\n\t\t\tif (parts.length == 1) {\n\t\t\t\tparts = time_str.split('.');\n\t\t\t}\n\t\t}\n\n\t\tif (parts.length > 4) { \n\t\t    throw new TL.Error(\"invalid_separator_error\");\n\t\t}\n\n\t\tparsed.hour = parseInt(parts[0]);\n\n\t\tif (period && period.toLowerCase()[0] == 'p' && parsed.hour != 12) {\n\t\t\tparsed.hour += 12;\n\t\t} else if (period && period.toLowerCase()[0] == 'a' && parsed.hour == 12) {\n\t\t\tparsed.hour = 0;\n\t\t}\n\n\n\t\tif (isNaN(parsed.hour) || parsed.hour < 0 || parsed.hour > 23) {\n\t\t\tthrow new TL.Error(\"invalid_hour_err\", parsed.hour);\n\t\t}\n\n\t\tif (parts.length > 1) {\n\t\t\tparsed.minute = parseInt(parts[1]);\n\t\t\tif (isNaN(parsed.minute)) { \n\t\t\t    throw new TL.Error(\"invalid_minute_err\", parsed.minute); \n\t\t\t}\n\t\t}\n\n\t\tif (parts.length > 2) {\n\t\t\tvar sec_parts = parts[2].split(/[\\.,]/);\n\t\t\tparts = sec_parts.concat(parts.slice(3)) // deal with various methods of specifying fractional seconds\n\t\t\tif (parts.length > 2) { \n\t\t\t    throw new TL.Error(\"invalid_second_fractional_err\");\n\t\t\t}\n\t\t\tparsed.second = parseInt(parts[0]);\n\t\t\tif (isNaN(parsed.second)) { \n\t\t\t    throw new TL.Error(\"invalid_second_err\");\n\t\t\t}\n\t\t\tif (parts.length == 2) {\n\t\t\t\tvar frac_secs = parseInt(parts[1]);\n\t\t\t\tif (isNaN(frac_secs)) { \n\t\t\t\t    throw new TL.Error(\"invalid_fractional_err\");\n\t\t\t\t}\n\t\t\t\tparsed.millisecond = 100 * frac_secs;\n\t\t\t}\n\t\t}\n\n\t\treturn parsed;\n\t},\n\n\tSCALE_DATE_CLASSES: {\n\t\thuman: TL.Date,\n\t\tcosmological: TL.BigDate\n\t}\n\n\n};\n\n\n/* **********************************************\n     Begin TL.Draggable.js\n********************************************** */\n\n/*\tTL.Draggable\n\tTL.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.\n\tTODO Enable constraints\n================================================== */\n\nTL.Draggable = TL.Class.extend({\n\t\n\tincludes: TL.Events,\n\t\n\t_el: {},\n\t\n\tmousedrag: {\n\t\tdown:\t\t\"mousedown\",\n\t\tup:\t\t\t\"mouseup\",\n\t\tleave:\t\t\"mouseleave\",\n\t\tmove:\t\t\"mousemove\"\n\t},\n\t\n\ttouchdrag: {\n\t\tdown:\t\t\"touchstart\",\n\t\tup:\t\t\t\"touchend\",\n\t\tleave:\t\t\"mouseleave\",\n\t\tmove:\t\t\"touchmove\"\n\t},\n\n\tinitialize: function (drag_elem, options, move_elem) {\n\t\t\n\t\t// DOM ELements \n\t\tthis._el = {\n\t\t\tdrag: drag_elem,\n\t\t\tmove: drag_elem\n\t\t};\n\t\t\n\t\tif (move_elem) {\n\t\t\tthis._el.move = move_elem;\n\t\t}\n\t\t\n\t\t\n\t\t//Options\n\t\tthis.options = {\n\t\t\tenable:\t{\n\t\t\t\tx: true,\n\t\t\t\ty: true\n\t\t\t},\n\t\t\tconstraint: {\n\t\t\t\ttop: false,\n\t\t\t\tbottom: false,\n\t\t\t\tleft: false,\n\t\t\t\tright: false\n\t\t\t},\n\t\t\tmomentum_multiplier: \t2000,\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInOutQuint\n\t\t};\n\t\t\n\t\t\n\t\t// Animation Object\n\t\tthis.animator = null;\n\t\t\n\t\t// Drag Event Type\n\t\tthis.dragevent = this.mousedrag;\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\tthis.dragevent = this.touchdrag;\n\t\t}\n\t\t\n\t\t// Draggable Data\n\t\tthis.data = {\n\t\t\tsliding:\t\tfalse,\n\t\t\tdirection: \t\t\"none\",\n\t\t\tpagex: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\tpagey: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\tpos: {\n\t\t\t\tstart: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty:0\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty:0\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew_pos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tnew_pos_parent: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\ttime: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\ttouch:\t\t\tfalse\n\t\t};\n\t\t\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\t\n\t\t\n\t},\n\t\n\tenable: function(e) {\n\t\t\n\t\tthis.data.pos.start = 0; \n\t\tthis._el.move.style.left = this.data.pos.start.x + \"px\";\n\t\tthis._el.move.style.top = this.data.pos.start.y + \"px\";\n\t\tthis._el.move.style.position = \"absolute\";\n\t},\n\t\n\tdisable: function() {\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.down, this._onDragStart, this);\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.up, this._onDragEnd, this);\n\t},\n\t\n\tstopMomentum: function() {\n\t\tif (this.animator) {\n\t\t\tthis.animator.stop();\n\t\t}\n\n\t},\n\t\n\tupdateConstraint: function(c) {\n\t\tthis.options.constraint = c;\n\t\t\n\t},\n\t\n\t/*\tPrivate Methods\n\t================================================== */\n\t_onDragStart: function(e) {\n\t\tif (TL.Browser.touch) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\tthis.data.pagex.start = e.originalEvent.touches[0].screenX;\n\t\t\t\tthis.data.pagey.start = e.originalEvent.touches[0].screenY;\n\t\t\t} else {\n\t\t\t\tthis.data.pagex.start = e.targetTouches[0].screenX;\n\t\t\t\tthis.data.pagey.start = e.targetTouches[0].screenY;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.data.pagex.start = e.pageX;\n\t\t\tthis.data.pagey.start = e.pageY;\n\t\t}\n\t\t\n\t\t// Center element to finger or mouse\n\t\tif (this.options.enable.x) {\n\t\t\tthis._el.move.style.left = this.data.pagex.start - (this._el.move.offsetWidth / 2) + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.y) {\n\t\t\tthis._el.move.style.top = this.data.pagey.start - (this._el.move.offsetHeight / 2) + \"px\";\n\t\t}\n\t\t\n\t\tthis.data.pos.start = TL.Dom.getPosition(this._el.drag);\n\t\tthis.data.time.start = new Date().getTime();\n\t\t\n\t\tthis.fire(\"dragstart\", this.data);\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.move, this._onDragMove, this);\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.leave, this._onDragEnd, this);\n\t},\n\t\n\t_onDragEnd: function(e) {\n\t\tthis.data.sliding = false;\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.move, this._onDragMove, this);\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.leave, this._onDragEnd, this);\n\t\tthis.fire(\"dragend\", this.data);\n\t\t\n\t\t//  momentum\n\t\tthis._momentum();\n\t},\n\t\n\t_onDragMove: function(e) {\n\t\te.preventDefault();\n\t\tthis.data.sliding = true;\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\tthis.data.pagex.end = e.originalEvent.touches[0].screenX;\n\t\t\t\tthis.data.pagey.end = e.originalEvent.touches[0].screenY;\n\t\t\t} else {\n\t\t\t\tthis.data.pagex.end = e.targetTouches[0].screenX;\n\t\t\t\tthis.data.pagey.end = e.targetTouches[0].screenY;\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.data.pagex.end = e.pageX;\n\t\t\tthis.data.pagey.end = e.pageY;\n\t\t}\n\t\t\n\t\tthis.data.pos.end = TL.Dom.getPosition(this._el.drag);\n\t\tthis.data.new_pos.x = -(this.data.pagex.start - this.data.pagex.end - this.data.pos.start.x);\n\t\tthis.data.new_pos.y = -(this.data.pagey.start - this.data.pagey.end - this.data.pos.start.y );\n\t\t\n\t\tif (this.options.enable.x) {\n\t\t\tthis._el.move.style.left = this.data.new_pos.x + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.y) {\n\t\t\tthis._el.move.style.top = this.data.new_pos.y + \"px\";\n\t\t}\n\t\t\n\t\tthis.fire(\"dragmove\", this.data);\n\t},\n\t\n\t_momentum: function() {\n\t\tvar pos_adjust = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttime: 0\n\t\t\t},\n\t\t\tpos_change = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttime: 0\n\t\t\t},\n\t\t\tswipe = false,\n\t\t\tswipe_direction = \"\";\n\t\t\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\t// Treat mobile multiplier differently\n\t\t\t//this.options.momentum_multiplier = this.options.momentum_multiplier * 2;\n\t\t}\n\t\t\n\t\tpos_adjust.time = (new Date().getTime() - this.data.time.start) * 10;\n\t\tpos_change.time = (new Date().getTime() - this.data.time.start) * 10;\n\t\t\n\t\tpos_change.x = this.options.momentum_multiplier * (Math.abs(this.data.pagex.end) - Math.abs(this.data.pagex.start));\n\t\tpos_change.y = this.options.momentum_multiplier * (Math.abs(this.data.pagey.end) - Math.abs(this.data.pagey.start));\n\t\t\n\t\tpos_adjust.x = Math.round(pos_change.x / pos_change.time);\n\t\tpos_adjust.y = Math.round(pos_change.y / pos_change.time);\n\t\t\n\t\tthis.data.new_pos.x = Math.min(this.data.pos.end.x + pos_adjust.x);\n\t\tthis.data.new_pos.y = Math.min(this.data.pos.end.y + pos_adjust.y);\n\n\t\t\n\t\tif (!this.options.enable.x) {\n\t\t\tthis.data.new_pos.x = this.data.pos.start.x;\n\t\t} else if (this.data.new_pos.x < 0) {\n\t\t\tthis.data.new_pos.x = 0;\n\t\t}\n\t\t\n\t\tif (!this.options.enable.y) {\n\t\t\tthis.data.new_pos.y = this.data.pos.start.y;\n\t\t} else if (this.data.new_pos.y < 0) {\n\t\t\tthis.data.new_pos.y = 0;\n\t\t}\n\t\t\n\t\t// Detect Swipe\n\t\tif (pos_change.time < 3000) {\n\t\t\tswipe = true;\n\t\t}\n\t\t\n\t\t// Detect Direction\n\t\tif (Math.abs(pos_change.x) > 10000) {\n\t\t\tthis.data.direction = \"left\";\n\t\t\tif (pos_change.x > 0) {\n\t\t\t\tthis.data.direction = \"right\";\n\t\t\t}\n\t\t}\n\t\t// Detect Swipe\n\t\tif (Math.abs(pos_change.y) > 10000) {\n\t\t\tthis.data.direction = \"up\";\n\t\t\tif (pos_change.y > 0) {\n\t\t\t\tthis.data.direction = \"down\";\n\t\t\t}\n\t\t}\n\t\tthis._animateMomentum();\n\t\tif (swipe) {\n\t\t\tthis.fire(\"swipe_\" + this.data.direction, this.data);\n\t\t}\n\t\t\n\t},\n\t\n\t\n\t_animateMomentum: function() {\n\t\tvar pos = {\n\t\t\t\tx: this.data.new_pos.x,\n\t\t\t\ty: this.data.new_pos.y\n\t\t\t},\n\t\t\tanimate = {\n\t\t\t\tduration: \tthis.options.duration,\n\t\t\t\teasing: \tTL.Ease.easeOutStrong\n\t\t\t};\n\t\t\n\t\tif (this.options.enable.y) {\n\t\t\tif (this.options.constraint.top || this.options.constraint.bottom) {\n\t\t\t\tif (pos.y > this.options.constraint.bottom) {\n\t\t\t\t\tpos.y = this.options.constraint.bottom;\n\t\t\t\t} else if (pos.y < this.options.constraint.top) {\n\t\t\t\t\tpos.y = this.options.constraint.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\tanimate.top = Math.floor(pos.y) + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.x) {\n\t\t\tif (this.options.constraint.left || this.options.constraint.right) {\n\t\t\t\tif (pos.x > this.options.constraint.left) {\n\t\t\t\t\tpos.x = this.options.constraint.left;\n\t\t\t\t} else if (pos.x < this.options.constraint.right) {\n\t\t\t\t\tpos.x = this.options.constraint.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tanimate.left = Math.floor(pos.x) + \"px\";\n\t\t}\n\t\t\n\t\tthis.animator = TL.Animate(this._el.move, animate);\n\t\t\n\t\tthis.fire(\"momentum\", this.data);\n\t}\n});\n\n\n/* **********************************************\n     Begin TL.Swipable.js\n********************************************** */\n\n/*\tTL.Swipable\n\tTL.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.\n\tTODO Enable constraints\n================================================== */\n\nTL.Swipable = TL.Class.extend({\n\t\n\tincludes: TL.Events,\n\t\n\t_el: {},\n\t\n\tmousedrag: {\n\t\tdown:\t\t\"mousedown\",\n\t\tup:\t\t\t\"mouseup\",\n\t\tleave:\t\t\"mouseleave\",\n\t\tmove:\t\t\"mousemove\"\n\t},\n\t\n\ttouchdrag: {\n\t\tdown:\t\t\"touchstart\",\n\t\tup:\t\t\t\"touchend\",\n\t\tleave:\t\t\"mouseleave\",\n\t\tmove:\t\t\"touchmove\"\n\t},\n\n\tinitialize: function (drag_elem, move_elem, options) {\n\t\t\n\t\t// DOM ELements \n\t\tthis._el = {\n\t\t\tdrag: drag_elem,\n\t\t\tmove: drag_elem\n\t\t};\n\t\t\n\t\tif (move_elem) {\n\t\t\tthis._el.move = move_elem;\n\t\t}\n\t\t\n\t\t\n\t\t//Options\n\t\tthis.options = {\n\t\t\tsnap: false,\n\t\t\tenable:\t{\n\t\t\t\tx: true,\n\t\t\t\ty: true\n\t\t\t},\n\t\t\tconstraint: {\n\t\t\t\ttop: false,\n\t\t\t\tbottom: false,\n\t\t\t\tleft: 0,\n\t\t\t\tright: false\n\t\t\t},\n\t\t\tmomentum_multiplier: \t2000,\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInOutQuint\n\t\t};\n\t\t\n\t\t\n\t\t// Animation Object\n\t\tthis.animator = null;\n\t\t\n\t\t// Drag Event Type\n\t\tthis.dragevent = this.mousedrag;\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\tthis.dragevent = this.touchdrag;\n\t\t}\n\t\t\n\t\t// Draggable Data\n\t\tthis.data = {\n\t\t\tsliding:\t\tfalse,\n\t\t\tdirection: \t\t\"none\",\n\t\t\tpagex: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\tpagey: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\tpos: {\n\t\t\t\tstart: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty:0\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty:0\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew_pos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tnew_pos_parent: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\ttime: {\n\t\t\t\tstart:\t\t0,\n\t\t\t\tend:\t\t0\n\t\t\t},\n\t\t\ttouch:\t\t\tfalse\n\t\t};\n\t\t\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\t\n\t\t\n\t},\n\t\n\tenable: function(e) {\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.down, this._onDragStart, this);\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.up, this._onDragEnd, this);\n\t\t\n\t\tthis.data.pos.start = 0; //TL.Dom.getPosition(this._el.move);\n\t\tthis._el.move.style.left = this.data.pos.start.x + \"px\";\n\t\tthis._el.move.style.top = this.data.pos.start.y + \"px\";\n\t\tthis._el.move.style.position = \"absolute\";\n\t\t//this._el.move.style.zIndex = \"11\";\n\t\t//this._el.move.style.cursor = \"move\";\n\t},\n\t\n\tdisable: function() {\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.down, this._onDragStart, this);\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.up, this._onDragEnd, this);\n\t},\n\t\n\tstopMomentum: function() {\n\t\tif (this.animator) {\n\t\t\tthis.animator.stop();\n\t\t}\n\n\t},\n\t\n\tupdateConstraint: function(c) {\n\t\tthis.options.constraint = c;\n\t\t\n\t\t// Temporary until issues are fixed\n\t\t\n\t},\n\t\n\t/*\tPrivate Methods\n\t================================================== */\n\t_onDragStart: function(e) {\n\t\t\n\t\tif (this.animator) {\n\t\t\tthis.animator.stop();\n\t\t}\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\tthis.data.pagex.start = e.originalEvent.touches[0].screenX;\n\t\t\t\tthis.data.pagey.start = e.originalEvent.touches[0].screenY;\n\t\t\t} else {\n\t\t\t\tthis.data.pagex.start = e.targetTouches[0].screenX;\n\t\t\t\tthis.data.pagey.start = e.targetTouches[0].screenY;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.data.pagex.start = e.pageX;\n\t\t\tthis.data.pagey.start = e.pageY;\n\t\t}\n\t\t\n\t\t// Center element to finger or mouse\n\t\tif (this.options.enable.x) {\n\t\t\t//this._el.move.style.left = this.data.pagex.start - (this._el.move.offsetWidth / 2) + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.y) {\n\t\t\t//this._el.move.style.top = this.data.pagey.start - (this._el.move.offsetHeight / 2) + \"px\";\n\t\t}\n\t\t\n\t\tthis.data.pos.start = {x:this._el.move.offsetLeft, y:this._el.move.offsetTop};\n\t\t\n\t\t\n\t\tthis.data.time.start \t\t\t= new Date().getTime();\n\t\t\n\t\tthis.fire(\"dragstart\", this.data);\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.move, this._onDragMove, this);\n\t\tTL.DomEvent.addListener(this._el.drag, this.dragevent.leave, this._onDragEnd, this);\n\t},\n\t\n\t_onDragEnd: function(e) {\n\t\tthis.data.sliding = false;\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.move, this._onDragMove, this);\n\t\tTL.DomEvent.removeListener(this._el.drag, this.dragevent.leave, this._onDragEnd, this);\n\t\tthis.fire(\"dragend\", this.data);\n\t\t\n\t\t//  momentum\n\t\tthis._momentum();\n\t},\n\t\n\t_onDragMove: function(e) {\n\t\tvar change = {\n\t\t\tx:0,\n\t\t\ty:0\n\t\t}\n\t\t//e.preventDefault();\n\t\tthis.data.sliding = true;\n\t\t\n\t\tif (TL.Browser.touch) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\tthis.data.pagex.end = e.originalEvent.touches[0].screenX;\n\t\t\t\tthis.data.pagey.end = e.originalEvent.touches[0].screenY;\n\t\t\t} else {\n\t\t\t\tthis.data.pagex.end = e.targetTouches[0].screenX;\n\t\t\t\tthis.data.pagey.end = e.targetTouches[0].screenY;\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.data.pagex.end = e.pageX;\n\t\t\tthis.data.pagey.end = e.pageY;\n\t\t}\n\t\t\n\t\tchange.x = this.data.pagex.start - this.data.pagex.end;\n\t\tchange.y = this.data.pagey.start - this.data.pagey.end;\n\t\t\n\t\tthis.data.pos.end = {x:this._el.drag.offsetLeft, y:this._el.drag.offsetTop};\n\t\t\n\t\tthis.data.new_pos.x = -(change.x - this.data.pos.start.x);\n\t\tthis.data.new_pos.y = -(change.y - this.data.pos.start.y );\n\t\t\n\t\tif (this.options.enable.x && ( Math.abs(change.x) > Math.abs(change.y) ) ) {\n\t\t\te.preventDefault();\n\t\t\tthis._el.move.style.left = this.data.new_pos.x + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.y && ( Math.abs(change.y) > Math.abs(change.y) ) ) {\n\t\t\te.preventDefault();\n\t\t\tthis._el.move.style.top = this.data.new_pos.y + \"px\";\n\t\t}\n\t\t\n\t\tthis.fire(\"dragmove\", this.data);\n\t},\n\t\n\t_momentum: function() {\n\t\tvar pos_adjust = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttime: 0\n\t\t\t},\n\t\t\tpos_change = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttime: 0\n\t\t\t},\n\t\t\tswipe_detect = {\n\t\t\t\tx: false,\n\t\t\t\ty: false\n\t\t\t},\n\t\t\tswipe = false,\n\t\t\tswipe_direction = \"\";\n\t\t\n\t\t\n\t\tthis.data.direction = null;\n\t\t\n\t\tpos_adjust.time = (new Date().getTime() - this.data.time.start) * 10;\n\t\tpos_change.time = (new Date().getTime() - this.data.time.start) * 10;\n\t\t\n\t\tpos_change.x = this.options.momentum_multiplier * (Math.abs(this.data.pagex.end) - Math.abs(this.data.pagex.start));\n\t\tpos_change.y = this.options.momentum_multiplier * (Math.abs(this.data.pagey.end) - Math.abs(this.data.pagey.start));\n\t\t\n\t\tpos_adjust.x = Math.round(pos_change.x / pos_change.time);\n\t\tpos_adjust.y = Math.round(pos_change.y / pos_change.time);\n\t\t\n\t\tthis.data.new_pos.x = Math.min(this.data.new_pos.x + pos_adjust.x);\n\t\tthis.data.new_pos.y = Math.min(this.data.new_pos.y + pos_adjust.y);\n\t\t\n\t\tif (!this.options.enable.x) {\n\t\t\tthis.data.new_pos.x = this.data.pos.start.x;\n\t\t} else if (this.options.constraint.left && this.data.new_pos.x > this.options.constraint.left) {\n\t\t\tthis.data.new_pos.x = this.options.constraint.left;\n\t\t}\n\t\t\n\t\tif (!this.options.enable.y) {\n\t\t\tthis.data.new_pos.y = this.data.pos.start.y;\n\t\t} else if (this.data.new_pos.y < 0) {\n\t\t\tthis.data.new_pos.y = 0;\n\t\t}\n\t\t\n\t\t// Detect Swipe\n\t\tif (pos_change.time < 2000) {\n\t\t\tswipe = true;\n\t\t}\n\t\t\n\t\t\n\t\tif (this.options.enable.x && this.options.enable.y) {\n\t\t\tif (Math.abs(pos_change.x) > Math.abs(pos_change.y)) {\n\t\t\t\tswipe_detect.x = true;\n\t\t\t} else {\n\t\t\t\tswipe_detect.y = true;\n\t\t\t}\n\t\t} else if (this.options.enable.x) {\n\t\t\tif (Math.abs(pos_change.x) > Math.abs(pos_change.y)) {\n\t\t\t\tswipe_detect.x = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (Math.abs(pos_change.y) > Math.abs(pos_change.x)) {\n\t\t\t\tswipe_detect.y = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Detect Direction and long swipe\n\t\tif (swipe_detect.x) {\n\t\t\t\n\t\t\t// Long Swipe\n\t\t\tif (Math.abs(pos_change.x) > (this._el.drag.offsetWidth/2)) {\n\t\t\t\tswipe = true;\n\t\t\t}\n\t\t\t\n\t\t\tif (Math.abs(pos_change.x) > 10000) {\n\t\t\t\tthis.data.direction = \"left\";\n\t\t\t\tif (pos_change.x > 0) {\n\t\t\t\t\tthis.data.direction = \"right\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (swipe_detect.y) {\n\t\t\t\n\t\t\t// Long Swipe\n\t\t\tif (Math.abs(pos_change.y) > (this._el.drag.offsetHeight/2)) {\n\t\t\t\tswipe = true;\n\t\t\t}\n\t\t\t\n\t\t\tif (Math.abs(pos_change.y) > 10000) {\n\t\t\t\tthis.data.direction = \"up\";\n\t\t\t\tif (pos_change.y > 0) {\n\t\t\t\t\tthis.data.direction = \"down\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (pos_change.time < 1000 ) {\n\t\t\t\n\t\t} else {\n\t\t\tthis._animateMomentum();\n\t\t}\n\t\t\n\t\tif (swipe && this.data.direction) {\n\t\t\tthis.fire(\"swipe_\" + this.data.direction, this.data);\n\t\t} else if (this.data.direction) {\n\t\t\tthis.fire(\"swipe_nodirection\", this.data);\n\t\t} else if (this.options.snap) {\n\t\t\tthis.animator.stop();\n\t\t\t\n\t\t\tthis.animator = TL.Animate(this._el.move, {\n\t\t\t\ttop: \t\tthis.data.pos.start.y,\n\t\t\t\tleft: \t\tthis.data.pos.start.x,\n\t\t\t\tduration: \tthis.options.duration,\n\t\t\t\teasing: \tTL.Ease.easeOutStrong\n\t\t\t});\n\t\t}\n\t\t\n\t},\n\t\n\t\n\t_animateMomentum: function() {\n\t\tvar pos = {\n\t\t\t\tx: this.data.new_pos.x,\n\t\t\t\ty: this.data.new_pos.y\n\t\t\t},\n\t\t\tanimate = {\n\t\t\t\tduration: \tthis.options.duration,\n\t\t\t\teasing: \tTL.Ease.easeOutStrong\n\t\t\t};\n\t\t\n\t\tif (this.options.enable.y) {\n\t\t\tif (this.options.constraint.top || this.options.constraint.bottom) {\n\t\t\t\tif (pos.y > this.options.constraint.bottom) {\n\t\t\t\t\tpos.y = this.options.constraint.bottom;\n\t\t\t\t} else if (pos.y < this.options.constraint.top) {\n\t\t\t\t\tpos.y = this.options.constraint.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\tanimate.top = Math.floor(pos.y) + \"px\";\n\t\t}\n\t\t\n\t\tif (this.options.enable.x) {\n\t\t\tif (this.options.constraint.left && pos.x >= this.options.constraint.left) {\n\t\t\t\tpos.x = this.options.constraint.left;\n\t\t\t}\n\t\t\tif (this.options.constraint.right && pos.x < this.options.constraint.right) {\n\t\t\t\tpos.x = this.options.constraint.right;\n\t\t\t}\n\n\t\t\tanimate.left = Math.floor(pos.x) + \"px\";\n\t\t}\n\t\t\n\t\tthis.animator = TL.Animate(this._el.move, animate);\n\t\t\n\t\tthis.fire(\"momentum\", this.data);\n\t}\n});\n\n\n/* **********************************************\n     Begin TL.MenuBar.js\n********************************************** */\n\n/*\tTL.MenuBar\n\tDraggable component to control size\n================================================== */\n\nTL.MenuBar = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(elem, parent_elem, options) {\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tparent: {},\n\t\t\tcontainer: {},\n\t\t\tbutton_backtostart: {},\n\t\t\tbutton_zoomin: {},\n\t\t\tbutton_zoomout: {},\n\t\t\tarrow: {},\n\t\t\tline: {},\n\t\t\tcoverbar: {},\n\t\t\tgrip: {}\n\t\t};\n\n\t\tthis.collapsed = false;\n\n\t\tif (typeof elem === 'object') {\n\t\t\tthis._el.container = elem;\n\t\t} else {\n\t\t\tthis._el.container = TL.Dom.get(elem);\n\t\t}\n\n\t\tif (parent_elem) {\n\t\t\tthis._el.parent = parent_elem;\n\t\t}\n\n\t\t//Options\n\t\tthis.options = {\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600,\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInOutQuint,\n\t\t\tmenubar_default_y: \t\t0\n\t\t};\n\n\t\t// Animation\n\t\tthis.animator = {};\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t},\n\n\t/*\tPublic\n\t================================================== */\n\tshow: function(d) {\n\n\t\tvar duration = this.options.duration;\n\t\tif (d) {\n\t\t\tduration = d;\n\t\t}\n\t\t/*\n\t\tthis.animator = TL.Animate(this._el.container, {\n\t\t\ttop: \t\tthis.options.menubar_default_y + \"px\",\n\t\t\tduration: \tduration,\n\t\t\teasing: \tTL.Ease.easeOutStrong\n\t\t});\n\t\t*/\n\t},\n\n\thide: function(top) {\n\t\t/*\n\t\tthis.animator = TL.Animate(this._el.container, {\n\t\t\ttop: \t\ttop,\n\t\t\tduration: \tthis.options.duration,\n\t\t\teasing: \tTL.Ease.easeOutStrong\n\t\t});\n\t\t*/\n\t},\n\n\ttoogleZoomIn: function(show) {\n\t\tif (show) {\n      TL.DomUtil.removeClass(this._el.button_zoomin,'tl-menubar-button-inactive');\n\t\t} else {\n      TL.DomUtil.addClass(this._el.button_zoomin,'tl-menubar-button-inactive');\n\t\t}\n\t},\n\n\ttoogleZoomOut: function(show) {\n\t\tif (show) {\n      TL.DomUtil.removeClass(this._el.button_zoomout,'tl-menubar-button-inactive');\n\t\t} else {\n      TL.DomUtil.addClass(this._el.button_zoomout,'tl-menubar-button-inactive');\n\t\t}\n\t},\n\n\tsetSticky: function(y) {\n\t\tthis.options.menubar_default_y = y;\n\t},\n\n\t/*\tColor\n\t================================================== */\n\tsetColor: function(inverted) {\n\t\tif (inverted) {\n\t\t\tthis._el.container.className = 'tl-menubar tl-menubar-inverted';\n\t\t} else {\n\t\t\tthis._el.container.className = 'tl-menubar';\n\t\t}\n\t},\n\n\t/*\tUpdate Display\n\t================================================== */\n\tupdateDisplay: function(w, h, a, l) {\n\t\tthis._updateDisplay(w, h, a, l);\n\t},\n\n\n\t/*\tEvents\n\t================================================== */\n\t_onButtonZoomIn: function(e) {\n\t\tthis.fire(\"zoom_in\", e);\n\t},\n\n\t_onButtonZoomOut: function(e) {\n\t\tthis.fire(\"zoom_out\", e);\n\t},\n\n\t_onButtonBackToStart: function(e) {\n\t\tthis.fire(\"back_to_start\", e);\n\t},\n\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\n\t\t// Create Layout\n\t\tthis._el.button_zoomin \t\t\t\t\t\t\t= TL.Dom.create('span', 'tl-menubar-button', this._el.container);\n\t\tthis._el.button_zoomout \t\t\t\t\t\t= TL.Dom.create('span', 'tl-menubar-button', this._el.container);\n\t\tthis._el.button_backtostart \t\t\t\t\t= TL.Dom.create('span', 'tl-menubar-button', this._el.container);\n\n\t\tif (TL.Browser.mobile) {\n\t\t\tthis._el.container.setAttribute(\"ontouchstart\",\" \");\n\t\t}\n\n\t\tthis._el.button_backtostart.innerHTML\t\t= \"<span class='tl-icon-goback'></span>\";\n\t\tthis._el.button_zoomin.innerHTML\t\t\t= \"<span class='tl-icon-zoom-in'></span>\";\n\t\tthis._el.button_zoomout.innerHTML\t\t\t= \"<span class='tl-icon-zoom-out'></span>\";\n\n\n\t},\n\n\t_initEvents: function () {\n\t\tTL.DomEvent.addListener(this._el.button_backtostart, 'click', this._onButtonBackToStart, this);\n\t\tTL.DomEvent.addListener(this._el.button_zoomin, 'click', this._onButtonZoomIn, this);\n\t\tTL.DomEvent.addListener(this._el.button_zoomout, 'click', this._onButtonZoomOut, this);\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(width, height, animate) {\n\n\t\tif (width) {\n\t\t\tthis.options.width = width;\n\t\t}\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t}\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Message.js\n********************************************** */\n\n/*\tTL.Message\n\t\n================================================== */\n \nTL.Message = TL.Class.extend({\n\t\n\tincludes: [TL.Events, TL.DomMixins, TL.I18NMixins],\n\t\n\t_el: {},\n\t\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options, add_to_container) {\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tparent: {},\n\t\t\tcontainer: {},\n\t\t\tmessage_container: {},\n\t\t\tloading_icon: {},\n\t\t\tmessage: {}\n\t\t};\n\t\n\t\t//Options\n\t\tthis.options = {\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600,\n\t\t\tmessage_class: \t\t\t\"tl-message\",\n\t\t\tmessage_icon_class: \t\"tl-loading-icon\"\n\t\t};\n\t\t\n\t\tthis._add_to_container = add_to_container || {}; // save ref\n\t\t\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.data, data);\n\t\tTL.Util.mergeData(this.options, options);\n\t\t\n\t\tthis._el.container = TL.Dom.create(\"div\", this.options.message_class);\n\t\t\n\t\tif (add_to_container) {\n\t\t\tadd_to_container.appendChild(this._el.container);\n\t\t\tthis._el.parent = add_to_container;\n\t\t}\n\t\t\n\t\t// Animation\n\t\tthis.animator = {};\n\t\t\t\t\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t},\n\t\n\t/*\tPublic\n\t================================================== */\n\tupdateMessage: function(t) {\n\t\tthis._updateMessage(t);\n\t},\n\t\n\t\n\t/*\tUpdate Display\n\t================================================== */\n\tupdateDisplay: function(w, h) {\n\t\tthis._updateDisplay(w, h);\n\t},\n\t\n\t_updateMessage: function(t) {\n\t\tif (!t) {\n\t\t\tthis._el.message.innerHTML = this._('loading');\n\t\t} else {\n\t\t\tthis._el.message.innerHTML = t;\n\t\t}\n\t\t\n\t\t// Re-add to DOM?\n\t\tif(!this._el.parent.atrributes && this._add_to_container.attributes) {\n\t\t    this._add_to_container.appendChild(this._el.container);\n\t\t    this._el.parent = this._add_to_container;\n\t\t}\n\t},\n\t\n\n\t/*\tEvents\n\t================================================== */\n\n\t\n\t_onMouseClick: function() {\n\t\tthis.fire(\"clicked\", this.options);\n\t},\n\t\n\t_onRemove: function() {\n\t    this._el.parent = {};\n\t},\n\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t\n\t\t// Create Layout\n\t\tthis._el.message_container = TL.Dom.create(\"div\", \"tl-message-container\", this._el.container);\n\t\tthis._el.loading_icon = TL.Dom.create(\"div\", this.options.message_icon_class, this._el.message_container);\n\t\tthis._el.message = TL.Dom.create(\"div\", \"tl-message-content\", this._el.message_container);\n\t\t\n\t\tthis._updateMessage();\n\t\t\n\t},\n\t\n\t_initEvents: function () {\n\t\tTL.DomEvent.addListener(this._el.container, 'click', this._onMouseClick, this);\n\t\tTL.DomEvent.addListener(this, 'removed', this._onRemove, this);\n\t},\n\t\n\t// Update Display\n\t_updateDisplay: function(width, height, animate) {\n\t\t\n\t}\n\t\n});\n\n/* **********************************************\n     Begin TL.MediaType.js\n********************************************** */\n\n/*    TL.MediaType\n    Determines the type of media the url string is.\n    returns an object with .type and .id\n    You can add new media types by adding a regex\n    to match and the media class name to use to\n    render the media\n\n    The image_only parameter indicates that the\n    call only wants an image-based media type\n    that can be resolved to an image URL.\n\n    TODO\n    Allow array so a slideshow can be a mediatype\n================================================== */\nTL.MediaType = function(m, image_only) {\n    var media = {},\n        media_types =     [\n            {\n                type:         \"youtube\",\n                name:         \"YouTube\",\n                match_str:     \"^(https?:)?\\/*(www.)?youtube|youtu\\.be\",\n                cls:         TL.Media.YouTube\n            },\n            {\n                type:         \"vimeo\",\n                name:         \"Vimeo\",\n                match_str:     \"^(https?:)?\\/*(player.)?vimeo\\.com\",\n                cls:         TL.Media.Vimeo\n            },\n            {\n                type:         \"dailymotion\",\n                name:         \"DailyMotion\",\n                match_str:     \"^(https?:)?\\/*(www.)?dailymotion\\.com\",\n                cls:         TL.Media.DailyMotion\n            },\n            {\n                type:         \"vine\",\n                name:         \"Vine\",\n                match_str:     \"^(https?:)?\\/*(www.)?vine\\.co\",\n                cls:         TL.Media.Vine\n            },\n            {\n                type:         \"soundcloud\",\n                name:         \"SoundCloud\",\n                match_str:     \"^(https?:)?\\/*(player.)?soundcloud\\.com\",\n                cls:         TL.Media.SoundCloud\n            },\n            {\n                type:         \"twitter\",\n                name:         \"Twitter\",\n                match_str:     \"^(https?:)?\\/*(www.)?twitter\\.com\",\n                cls:         TL.Media.Twitter\n            },\n            {\n                type:         \"twitterembed\",\n                name:         \"TwitterEmbed\",\n                match_str:     \"<blockquote class=['\\\"]twitter-tweet['\\\"]\",\n                cls:         TL.Media.Twitter\n            },\n            {\n                type:         \"googlemaps\",\n                name:         \"Google Map\",\n                match_str:     /google.+?\\/maps\\/@([-\\d.]+),([-\\d.]+),((?:[-\\d.]+[zmayht],?)*)|google.+?\\/maps\\/search\\/([\\w\\W]+)\\/@([-\\d.]+),([-\\d.]+),((?:[-\\d.]+[zmayht],?)*)|google.+?\\/maps\\/place\\/([\\w\\W]+)\\/@([-\\d.]+),([-\\d.]+),((?:[-\\d.]+[zmayht],?)*)|google.+?\\/maps\\/dir\\/([\\w\\W]+)\\/([\\w\\W]+)\\/@([-\\d.]+),([-\\d.]+),((?:[-\\d.]+[zmayht],?)*)/,\n                cls:         TL.Media.GoogleMap\n            },\n            {\n                type:         \"googleplus\",\n                name:         \"Google+\",\n                match_str:     \"^(https?:)?\\/*plus.google\",\n                cls:         TL.Media.GooglePlus\n            },\n            {\n                type:         \"flickr\",\n                name:         \"Flickr\",\n                match_str:     \"^(https?:)?\\/*(www.)?flickr.com\\/photos\",\n                cls:         TL.Media.Flickr\n            },\n            {\n                type:         \"flickr\",\n                name:         \"Flickr\",\n                match_str:     \"^(https?:\\/\\/)?flic.kr\\/.*\",\n                cls:         TL.Media.Flickr\n            },\n            {\n                type:         \"instagram\",\n                name:         \"Instagram\",\n                match_str:     /^(https?:)?\\/*(www.)?(instagr.am|^(https?:)?\\/*(www.)?instagram.com)\\/p\\//,\n                cls:         TL.Media.Instagram\n            },\n            {\n                type:         \"profile\",\n                name:         \"Profile\",\n                match_str:     /^(https?:)?\\/*(www.)?instagr.am\\/[a-zA-Z0-9]{2,}|^(https?:)?\\/*(www.)?instagram.com\\/[a-zA-Z0-9]{2,}/,\n                cls:         TL.Media.Profile\n            },\n            {\n                type:       \"documentcloud\",\n                name:       \"Document Cloud\",\n                match_str:  /documentcloud.org\\//,\n                cls:        TL.Media.DocumentCloud\n            },\n            {\n                type:         \"image\",\n                name:         \"Image\",\n                match_str:     /(jpg|jpeg|png|gif|svg)(\\?.*)?$/i,\n                cls:         TL.Media.Image\n            },\n            {\n                type:         \"imgur\",\n                name:         \"Imgur\",\n                match_str:     /^.*imgur.com\\/.+$|<blockquote class=['\\\"]imgur-embed-pub['\\\"]/i,\n                cls:         TL.Media.Imgur\n            },\n            {\n                type:         \"googledocs\",\n                name:         \"Google Doc\",\n                match_str:     \"^(https?:)?\\/*[^.]*.google.com\\/[^\\/]*\\/d\\/[^\\/]*\\/[^\\/]*\\?usp=sharing|^(https?:)?\\/*drive.google.com\\/open\\?id=[^\\&]*\\&authuser=0|^(https?:)?\\/*drive.google.com\\/open\\?id=[^\\&]*|^(https?:)?\\/*[^.]*.googledrive.com\\/host\\/[^\\/]*\\/\",\n                cls:         TL.Media.GoogleDoc\n            },\n            {\n                type:         \"pdf\",\n                name:         \"PDF\",\n                match_str:     /^.*\\.pdf(\\?.*)?(\\#.*)?/,\n                cls:         TL.Media.PDF\n            },\n            {\n                type:         \"wikipedia\",\n                name:         \"Wikipedia\",\n                match_str:     \"^(https?:)?\\/*(www.)?wikipedia\\.org|^(https?:)?\\/*([a-z][a-z].)?wikipedia\\.org\",\n                cls:         TL.Media.Wikipedia\n            },\n            {\n                type:         \"spotify\",\n                name:         \"spotify\",\n                match_str:     \"spotify\",\n                cls:         TL.Media.Spotify\n            },\n            {\n                type:         \"iframe\",\n                name:         \"iFrame\",\n                match_str:     \"iframe\",\n                cls:         TL.Media.IFrame\n            },\n            {\n                type:         \"storify\",\n                name:         \"Storify\",\n                match_str:     \"storify\",\n                cls:         TL.Media.Storify\n            },\n            {\n                type:         \"blockquote\",\n                name:         \"Quote\",\n                match_str:     \"blockquote\",\n                cls:         TL.Media.Blockquote\n            },\n            // {\n            //     type:         \"website\",\n            //     name:         \"Website\",\n            //     match_str:     \"https?://\",\n            //     cls:         TL.Media.Website\n            // },\n            {\n                type:         \"video\",\n                name:         \"Video\",\n                match_str:     /(mp4)(\\?.*)?$/i,\n                cls:         TL.Media.Video\n            },\n            {\n              type:         \"wistia\",\n              name:         \"Wistia\",\n              match_str:     /https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/.*/i,\n              cls:         TL.Media.Wistia\n            },\n            {\n                type:         \"audio\",\n                name:         \"Audio\",\n                match_str:     /(mp3|wav|m4a)(\\?.*)?$/i,\n                cls:         TL.Media.Audio\n            },\n            {\n                type:         \"imageblank\",\n                name:         \"Imageblank\",\n                match_str:     \"\",\n                cls:         TL.Media.Image\n            }\n        ];\n\n    if(image_only) {\n        if (m instanceof Array) {\n            return false;\n        }\n        for (var i = 0; i < media_types.length; i++) {\n            switch(media_types[i].type) {\n                case \"flickr\":\n                case \"image\":\n                case \"instagram\":\n                    if (m.url.match(media_types[i].match_str)) {\n                        media = media_types[i];\n                        return media;\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n    } else {\n        for (var i = 0; i < media_types.length; i++) {\n            if (m instanceof Array) {\n                return media = {\n                    type:         \"slider\",\n                    cls:         TL.Media.Slider\n                };\n            } else if (m.url.match(media_types[i].match_str)) {\n                media         = media_types[i];\n                return media;\n            }\n        }\n    }\n    return false;\n}\n\n\n/* **********************************************\n     Begin TL.Media.js\n********************************************** */\n\n/*\tTL.Media\n\tMain media template for media assets.\n\tTakes a data object and populates a dom object\n================================================== */\n// TODO add link\n\nTL.Media = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.I18NMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options, add_to_container) {\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tcontent_container: {},\n\t\t\tcontent: {},\n\t\t\tcontent_item: {},\n\t\t\tcontent_link: {},\n\t\t\tcaption: null,\n\t\t\tcredit: null,\n\t\t\tparent: {},\n\t\t\tlink: null\n\t\t};\n\n\t\t// Player (If Needed)\n\t\tthis.player = null;\n\n\t\t// Timer (If Needed)\n\t\tthis.timer = null;\n\t\tthis.load_timer = null;\n\n\t\t// Message\n\t\tthis.message = null;\n\n\t\t// Media ID\n\t\tthis.media_id = null;\n\n\t\t// State\n\t\tthis._state = {\n\t\t\tloaded: false,\n\t\t\tshow_meta: false,\n\t\t\tmedia_loaded: false\n\t\t};\n\n\t\t// Data\n\t\tthis.data = {\n\t\t\tunique_id: \t\t\tnull,\n\t\t\turl: \t\t\t\tnull,\n\t\t\tcredit:\t\t\t\tnull,\n\t\t\tcaption:\t\t\tnull,\n\t\t\tcredit_alternate: \tnull,\n\t\t\tcaption_alternate: \tnull,\n\t\t\tlink: \t\t\t\tnull,\n\t\t\tlink_target: \t\tnull\n\t\t};\n\n\t\t//Options\n\t\tthis.options = {\n\t\t\tapi_key_flickr: \t\t\"f2cc870b4d233dd0a5bfe73fd0d64ef0\",\n\t\t\tapi_key_googlemaps: \"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI\",\n\t\t\tapi_key_embedly: \t\t\"\", // ae2da610d1454b66abdf2e6a4c44026d\n\t\t\tcredit_height: \t\t\t0,\n\t\t\tcaption_height: \t\t0,\n\t\t\tbackground:         0   // is background media (for slide)\n\t\t};\n\n\t\tthis.animator = {};\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\n        // Don't create DOM elements if this is background media\n        if(!this.options.background) {\n            this._el.container = TL.Dom.create(\"div\", \"tl-media\");\n\n            if (this.data.unique_id) {\n                this._el.container.id = this.data.unique_id;\n            }\n\n            this._initLayout();\n\n            if (add_to_container) {\n                add_to_container.appendChild(this._el.container);\n                this._el.parent = add_to_container;\n            }\n        }\n\t},\n\n\tloadMedia: function() {\n\t\tvar self = this;\n\n\t\tif (!this._state.loaded) {\n\t\t\ttry {\n\t\t\t\tthis.load_timer = setTimeout(function() {\n\t\t            self.loadingMessage();\n\t\t\t\t\tself._loadMedia();\n\t\t\t\t\t// self._state.loaded = true; handled in onLoaded()\n\t\t\t\t\tself._updateDisplay();\n\t\t\t\t}, 1200);\n\t\t\t} catch (e) {\n\t\t\t\ttrace(\"Error loading media for \", this._media);\n\t\t\t\ttrace(e);\n\t\t\t}\n\t\t}\n\t},\n\n  _updateMessage: function(msg) {\n      if(this.message) {\n          this.message.updateMessage(msg);\n      }\n  },\n\n\tloadingMessage: function() {\n\t    this._updateMessage(this._('loading') + \" \" + this.options.media_name);\n\t},\n\n\terrorMessage: function(msg) {\n\t\tif (msg) {\n\t\t\tmsg = this._('error') + \": \" + msg;\n\t\t} else {\n\t\t\tmsg = this._('error');\n\t\t}\n\t\tthis._updateMessage(msg);\n\t},\n\n\tupdateMediaDisplay: function(layout) {\n\t\tif (this._state.loaded && !this.options.background) {\n\n\t\t\tif (TL.Browser.mobile) {\n\t\t\t\tthis._el.content_item.style.maxHeight = (this.options.height/2) + \"px\";\n\t\t\t} else {\n\t\t\t\tthis._el.content_item.style.maxHeight = this.options.height - this.options.credit_height - this.options.caption_height - 30 + \"px\";\n\t\t\t}\n\n\t\t\t//this._el.content_item.style.maxWidth = this.options.width + \"px\";\n\t\t\tthis._el.container.style.maxWidth = this.options.width + \"px\";\n\t\t\t// Fix for max-width issues in Firefox\n\t\t\tif (TL.Browser.firefox) {\n\t\t\t\tif (this._el.content_item.offsetWidth > this._el.content_item.offsetHeight) {\n\t\t\t\t\t//this._el.content_item.style.width = \"100%\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._updateMediaDisplay(layout);\n\n\t\t\tif (this._state.media_loaded) {\n\t\t\t\tif (this._el.credit) {\n\t\t\t\t\tthis._el.credit.style.width\t\t= this._el.content_item.offsetWidth + \"px\";\n\t\t\t\t}\n\t\t\t\tif (this._el.caption) {\n\t\t\t\t\tthis._el.caption.style.width\t\t= this._el.content_item.offsetWidth + \"px\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\n\t/*\tMedia Specific\n\t================================================== */\n    _loadMedia: function() {\n        // All overrides must call this.onLoaded() to set state\n        this.onLoaded();\n    },\n\n    _updateMediaDisplay: function(l) {\n        //this._el.content_item.style.maxHeight = (this.options.height - this.options.credit_height - this.options.caption_height - 16) + \"px\";\n        if(TL.Browser.firefox) {\n            this._el.content_item.style.maxWidth = this.options.width + \"px\";\n            this._el.content_item.style.width = \"auto\";\n        }\n    },\n\n    _getMeta: function() {\n\n    },\n\n    _getImageURL: function(w, h) {\n        // Image-based media types should return <img>-compatible src url\n        return \"\";\n    },\n\n\t/*\tPublic\n\t================================================== */\n\tshow: function() {\n\n\t},\n\n\thide: function() {\n\n\t},\n\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t\tthis.onAdd();\n\t},\n\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t\tthis.onRemove();\n\t},\n\n  getImageURL: function(w, h) {\n      return this._getImageURL(w, h);\n  },\n\n\t// Update Display\n\tupdateDisplay: function(w, h, l) {\n\t\tthis._updateDisplay(w, h, l);\n\t},\n\n\tstopMedia: function() {\n\t\tthis._stopMedia();\n\t},\n\n\tloadErrorDisplay: function(message) {\n\t\ttry {\n\t\t\tthis._el.content.removeChild(this._el.content_item);\n\t\t} catch(e) {\n\t\t\t// if this._el.content_item isn't a child of this._el then just keep truckin\n\t\t}\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-loaderror\", this._el.content);\n\t\tthis._el.content_item.innerHTML = \"<div class='tl-icon-\" + this.options.media_type + \"'></div><p>\" + message + \"</p>\";\n\n\t\t// After Loaded\n\t\tthis.onLoaded(true);\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\tonLoaded: function(error) {\n\t\tthis._state.loaded = true;\n\t\tthis.fire(\"loaded\", this.data);\n\t\tif (this.message) {\n\t\t\tthis.message.hide();\n\t\t}\n\t\tif (!(error || this.options.background)) {\n\t\t\tthis.showMeta();\n\t\t}\n\t\tthis.updateDisplay();\n\t},\n\n\tonMediaLoaded: function(e) {\n\t\tthis._state.media_loaded = true;\n\t\tthis.fire(\"media_loaded\", this.data);\n\t\tif (this._el.credit) {\n\t\t\tthis._el.credit.style.width\t\t= this._el.content_item.offsetWidth + \"px\";\n\t\t}\n\t\tif (this._el.caption) {\n\t\t\tthis._el.caption.style.width\t\t= this._el.content_item.offsetWidth + \"px\";\n\t\t}\n\t},\n\n\tshowMeta: function(credit, caption) {\n\t\tthis._state.show_meta = true;\n\t\t// Credit\n\t\tif (this.data.credit && this.data.credit != \"\") {\n\t\t\tthis._el.credit\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-credit\", this._el.content_container);\n\t\t\tthis._el.credit.innerHTML\t\t= this.options.autolink == true ? TL.Util.linkify(this.data.credit) : this.data.credit;\n\t\t\tthis.options.credit_height \t\t= this._el.credit.offsetHeight;\n\t\t}\n\n\t\t// Caption\n\t\tif (this.data.caption && this.data.caption != \"\") {\n\t\t\tthis._el.caption\t\t\t\t= TL.Dom.create(\"div\", \"tl-caption\", this._el.content_container);\n\t\t\tthis._el.caption.innerHTML\t\t= this.options.autolink == true ? TL.Util.linkify(this.data.caption) : this.data.caption;\n\t\t\tthis.options.caption_height \t= this._el.caption.offsetHeight;\n\t\t}\n\n\t\tif (!this.data.caption || !this.data.credit) {\n\t\t\tthis.getMeta();\n\t\t}\n\n\t},\n\n\tgetMeta: function() {\n\t\tthis._getMeta();\n\t},\n\n\tupdateMeta: function() {\n\t\tif (!this.data.credit && this.data.credit_alternate) {\n\t\t\tthis._el.credit\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-credit\", this._el.content_container);\n\t\t\tthis._el.credit.innerHTML\t\t= this.data.credit_alternate;\n\t\t\tthis.options.credit_height \t\t= this._el.credit.offsetHeight;\n\t\t}\n\n\t\tif (!this.data.caption && this.data.caption_alternate) {\n\t\t\tthis._el.caption\t\t\t\t= TL.Dom.create(\"div\", \"tl-caption\", this._el.content_container);\n\t\t\tthis._el.caption.innerHTML\t\t= this.data.caption_alternate;\n\t\t\tthis.options.caption_height \t= this._el.caption.offsetHeight;\n\t\t}\n\n\t\tthis.updateDisplay();\n\t},\n\n\tonAdd: function() {\n\t\tthis.fire(\"added\", this.data);\n\t},\n\n\tonRemove: function() {\n\t\tthis.fire(\"removed\", this.data);\n\t},\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\n\t\t// Message\n\t\tthis.message = new TL.Message({}, this.options);\n\t\tthis.message.addTo(this._el.container);\n\n\t\t// Create Layout\n\t\tthis._el.content_container = TL.Dom.create(\"div\", \"tl-media-content-container\", this._el.container);\n\n\t\t// Link\n\t\tif (this.data.link && this.data.link != \"\") {\n\n\t\t\tthis._el.link = TL.Dom.create(\"a\", \"tl-media-link\", this._el.content_container);\n\t\t\tthis._el.link.href = this.data.link;\n\t\t\tif (this.data.link_target && this.data.link_target != \"\") {\n\t\t\t\tthis._el.link.target = this.data.link_target;\n\t\t\t} else {\n\t\t\t\tthis._el.link.target = \"_blank\";\n\t\t\t}\n\n\t\t\tthis._el.content = TL.Dom.create(\"div\", \"tl-media-content\", this._el.link);\n\n\t\t} else {\n\t\t\tthis._el.content = TL.Dom.create(\"div\", \"tl-media-content\", this._el.content_container);\n\t\t}\n\n\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(w, h, l) {\n\t\tif (w) {\n\t\t\tthis.options.width = w;\n\n\t\t}\n\t\t//this._el.container.style.width = this.options.width + \"px\";\n\t\tif (h) {\n\t\t\tthis.options.height = h;\n\t\t}\n\n\t\tif (l) {\n\t\t\tthis.options.layout = l;\n\t\t}\n\n\t\tif (this._el.credit) {\n\t\t\tthis.options.credit_height \t\t= this._el.credit.offsetHeight;\n\t\t}\n\t\tif (this._el.caption) {\n\t\t\tthis.options.caption_height \t= this._el.caption.offsetHeight + 5;\n\t\t}\n\n\t\tthis.updateMediaDisplay(this.options.layout);\n\n\t},\n\n\t_stopMedia: function() {\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Blockquote.js\n********************************************** */\n\n/*\tTL.Media.Blockquote\n================================================== */\n\nTL.Media.Blockquote = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-blockquote\", this._el.content);\n\t\tthis._el.content_container.className = \"tl-media-content-container tl-media-content-container-text\";\n\t\t\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\t\t\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = this.media_id;\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\t\n\tupdateMediaDisplay: function() {\n\t\t\n\t},\n\t\n\t_updateMediaDisplay: function() {\n\t\t\n\t}\n\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.DailyMotion.js\n********************************************** */\n\n/*\tTL.Media.DailyMotion\n================================================== */\n\nTL.Media.DailyMotion = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-dailymotion\", this._el.content);\n\n\t\t// Get Media ID\n\t\tif (this.data.url.match(\"video\")) {\n\t\t\tthis.media_id = this.data.url.split(\"video\\/\")[1].split(/[?&]/)[0];\n\t\t} else {\n\t\t\tthis.media_id = this.data.url.split(\"embed\\/\")[1].split(/[?&]/)[0];\n\t\t}\n\n\t\t// API URL\n\t\tapi_url = \"https://www.dailymotion.com/embed/video/\" + this.media_id+\"?api=postMessage\";\n\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = \"<iframe autostart='false' frameborder='0' width='100%' height='100%' src='\" + api_url + \"'></iframe>\"\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = TL.Util.ratio.r16_9({w:this._el.content_item.offsetWidth}) + \"px\";\n\t},\n\n\t_stopMedia: function() {\n\t\tthis._el.content_item.querySelector(\"iframe\").contentWindow.postMessage('{\"command\":\"pause\",\"parameters\":[]}', \"*\");\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.DocumentCloud.js\n********************************************** */\n\n/*\tTL.Media.DocumentCloud\n================================================== */\n\nTL.Media.DocumentCloud = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar self = this;\n\n\t\t// Create Dom elements\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-documentcloud tl-media-shadow\", this._el.content);\n\t\tthis._el.content_item.id = TL.Util.unique_ID(7)\n\n\t\t// Check url\n\t\tif(this.data.url.match(/\\.html$/)) {\n\t\t    this.data.url = this._transformURL(this.data.url);\n\t\t} else if(!(this.data.url.match(/.(json|js)$/))) {\n\t\t    trace(\"DOCUMENT CLOUD IN URL BUT INVALID SUFFIX\");\n\t\t}\n\n\t\t// Load viewer API\n        TL.Load.js([\n\t\t\t\t\t'https://assets.documentcloud.org/viewer/loader.js',\n\t\t\t\t\t'https://assets.documentcloud.org/viewer/viewer.js'],\n            function() {\t\n\t            self.createMedia();\n\t\t\t}\n\t\t);\n\t},\n\n\t// Viewer API needs js, not html\n\t_transformURL: function(url) {\n        return url.replace(/(.*)\\.html$/, '$1.js')\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n        this._el.content_item.style.height = this.options.height + \"px\";\n\t\t//this._el.content_item.style.width = this.options.width + \"px\";\n\t},\n\n\tcreateMedia: function() {\n\t\t// DocumentCloud API call\n\t\tDV.load(this.data.url, {\n\t\t    container: '#'+this._el.content_item.id,\n\t\t    showSidebar: false\n\t\t});\n\t\tthis.onLoaded();\n\t},\n\n\n\n\t/*\tEvents\n\t================================================== */\n\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Flickr.js\n********************************************** */\n\n/*\tTL.Media.Flickr\n\n================================================== */\n\nTL.Media.Flickr = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\ttry {\n\t\t    // Get Media ID\n\t\t    this.establishMediaID();\n\n            // API URL\n            api_url = \"https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=\" + this.options.api_key_flickr + \"&photo_id=\" + this.media_id + \"&format=json&jsoncallback=?\";\n\n            // API Call\n            TL.getJSON(api_url, function(d) {\n                if (d.stat == \"ok\") {\n                    self.sizes = d.sizes.size; // store sizes info\n\n                    if(!self.options.background) {\n                        self.createMedia();\n                    }\n\n                    self.onLoaded();\n                } else {\n                    self.loadErrorDisplay(self._(\"flickr_notfound_err\"));\n                }\n            });\n\t\t} catch(e) {\n\t\t    self.loadErrorDisplay(self._(e.message_key));\n\t\t}\n\t},\n\n\testablishMediaID: function() {\n\t\tif (this.data.url.match(/flic.kr\\/.+/i)) {\n\t\t\tvar encoded = this.data.url.split('/').slice(-1)[0];\n\t\t\tthis.media_id = TL.Util.base58.decode(encoded);\n\t\t} else {\n\t\t\tvar marker = 'flickr.com/photos/';\n\t\t\tvar idx = this.data.url.indexOf(marker);\n\t\t\tif (idx == -1) { throw new TL.Error(\"flickr_invalidurl_err\"); }\n\t\t\tvar pos = idx + marker.length;\n\t\t\tthis.media_id = this.data.url.substr(pos).split(\"/\")[1];\n\t\t}\n\t},\n\n\tcreateMedia: function() {\n\t    var self = this;\n\n\t\t// Link\n\t\tthis._el.content_link = TL.Dom.create(\"a\", \"\", this._el.content);\n\t\tthis._el.content_link.href = this.data.url;\n\t\tthis._el.content_link.target = \"_blank\";\n\n\t\t// Photo\n\t\tthis._el.content_item = TL.Dom.create(\"img\", \"tl-media-item tl-media-image tl-media-flickr tl-media-shadow\", this._el.content_link);\n\n\t\tif (this.data.alt) {\n\t\t\tthis._el.content_item.alt = this.data.alt;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.alt = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\tif (this.data.title) {\n\t\t\tthis._el.content_item.title = this.data.title;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.title = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\t// Media Loaded Event\n\t\tthis._el.content_item.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\t// Set Image Source\n\t\tthis._el.content_item.src = this.getImageURL(this.options.width, this.options.height);\n\t},\n\n    getImageURL: function(w, h) {\n        var best_size \t= this.size_label(h),\n            source = this.sizes[this.sizes.length - 2].source;\n\n\t\tfor(var i = 0; i < this.sizes.length; i++) {\n\t\t\tif (this.sizes[i].label == best_size) {\n\t\t\t\tsource = this.sizes[i].source;\n\t\t\t}\n\t\t}\n\n\t\treturn source;\n    },\n\n\t_getMeta: function() {\n\t\tvar self = this,\n\t\tapi_url;\n\n\t\t// API URL\n\t\tapi_url = \"https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=\" + this.options.api_key_flickr + \"&photo_id=\" + this.media_id + \"&format=json&jsoncallback=?\";\n\n\t\t// API Call\n\t\tTL.getJSON(api_url, function(d) {\n\t\t\tself.data.credit_alternate = \"<a href='\" + self.data.url + \"' target='_blank'>\" + d.photo.owner.realname + \"</a>\";\n\t\t\tself.data.caption_alternate = d.photo.title._content + \" \" + d.photo.description._content;\n\t\t\tself.updateMeta();\n\t\t});\n\t},\n\n\tsize_label: function(s) {\n\t\tvar _size = \"\";\n\n\t\tif (s <= 75) {\n\t\t\tif (s <= 0) {\n\t\t\t\t_size = \"Large\";\n\t\t\t} else {\n\t\t\t\t_size = \"Thumbnail\";\n\t\t\t}\n\t\t} else if (s <= 180) {\n\t\t\t_size = \"Small\";\n\t\t} else if (s <= 240) {\n\t\t\t_size = \"Small 320\";\n\t\t} else if (s <= 375) {\n\t\t\t_size = \"Medium\";\n\t\t} else if (s <= 480) {\n\t\t\t_size = \"Medium 640\";\n\t\t} else if (s <= 600) {\n\t\t\t_size = \"Large\";\n\t\t} else {\n\t\t\t_size = \"Large\";\n\t\t}\n\n\t\treturn _size;\n\t}\n\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.GoogleDoc.js\n********************************************** */\n\n/*\tTL.Media.GoogleDoc\n\n================================================== */\n\nTL.Media.GoogleDoc = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar url,\n\t\t\tself = this;\n\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe\", this._el.content);\n\t\t\n\t\t// Get Media ID\n\t\tif (this.data.url.match(\"open\\?id\\=\")) {\n\t\t\tthis.media_id = this.data.url.split(\"open\\?id\\=\")[1];\n\t\t\tif (this.data.url.match(\"\\&authuser\\=0\")) {\n\t\t\t\turl = this.media_id.match(\"\\&authuser\\=0\")[0];\n\t\t\t};\n\t\t} else if (this.data.url.match(/file\\/d\\/([^/]*)\\/?/)) {\n\t\t\tvar doc_id = this.data.url.match(/file\\/d\\/([^/]*)\\/?/)[1];\n\t\t\turl = 'https://drive.google.com/file/d/' + doc_id + '/preview'\n\t\t} else {\n\t\t\turl = this.data.url;\n\t\t}\n\t\t\n\t\t// this URL makes something suitable for an img src but what if it's not an image?\n\t\t// api_url = \"http://www.googledrive.com/host/\" + this.media_id + \"/\";\n\t\t\n\t\tthis._el.content_item.innerHTML\t=\t\"<iframe class='doc' frameborder='0' width='100%' height='100%' src='\" + url + \"'></iframe>\";\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\t\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = this.options.height + \"px\";\n\t}\n\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.GooglePlus.js\n********************************************** */\n\n/*\tTL.Media.GooglePlus\n================================================== */\n\nTL.Media.GooglePlus = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-googleplus\", this._el.content);\n\t\t\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\t\t\n\t\t// API URL\n\t\tapi_url = this.media_id;\n\t\t\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = \"<iframe frameborder='0' width='100%' height='100%' src='\" + api_url + \"'></iframe>\"\t\t\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\t\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = this.options.height + \"px\";\n\t}\n\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.IFrame.js\n********************************************** */\n\n/*\tTL.Media.IFrame\n================================================== */\n\nTL.Media.IFrame = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\t\t\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe\", this._el.content);\n\t\t\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\t\t\n\t\t// API URL\n\t\tapi_url = this.media_id;\n\t\t\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = api_url;\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\t\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = this.options.height + \"px\";\n\t}\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.Image.js\n********************************************** */\n\n/*\tTL.Media.Image\n\tProduces image assets.\n\tTakes a data object and populates a dom object\n================================================== */\n\nTL.Media.Image = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t// Loading Message\n\t\tthis.loadingMessage();\n\n        // Create media?\n        if(!this.options.background) {\n            this.createMedia();\n        }\n\n        // After loaded\n\t\tthis.onLoaded();\n\t},\n\n    createMedia: function() {\n        var self = this,\n            image_class = \"tl-media-item tl-media-image tl-media-shadow\";\n\n\t\tif (this.data.url.match(/.png(\\?.*)?$/) || this.data.url.match(/.svg(\\?.*)?$/)) {\n\t\t\timage_class = \"tl-media-item tl-media-image\"\n\t\t}\n\n \t\t// Link\n\t\tif (this.data.link) {\n\t\t\tthis._el.content_link \t\t\t\t= TL.Dom.create(\"a\", \"\", this._el.content);\n\t\t\tthis._el.content_link.href \t\t\t= this.data.link;\n\t\t\tthis._el.content_link.target \t\t= \"_blank\";\n\t\t\tthis._el.content_item\t\t\t\t= TL.Dom.create(\"img\", image_class, this._el.content_link);\n\t\t} else {\n\t\t\tthis._el.content_item\t\t\t\t= TL.Dom.create(\"img\", image_class, this._el.content);\n\t\t}\n\n\t\tif (this.data.alt) {\n\t\t\tthis._el.content_item.alt = this.data.alt;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.alt = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\tif (this.data.title) {\n\t\t\tthis._el.content_item.title = this.data.title;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.title = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\t// Media Loaded Event\n\t\tthis._el.content_item.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\tthis._el.content_item.src\t\t\t= this.getImageURL();\n    },\n\n    getImageURL: function(w, h) {\n        return TL.Util.transformImageURL(this.data.url);\n    },\n\n\t_updateMediaDisplay: function(layout) {\n\t\tif(TL.Browser.firefox) {\n\t\t\t//this._el.content_item.style.maxWidth = (this.options.width/2) - 40 + \"px\";\n\t\t\tthis._el.content_item.style.width = \"auto\";\n\t\t}\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Imgur.js\n********************************************** */\n\n/*\tTL.Media.Flickr\n\n================================================== */\n\nTL.Media.Imgur = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\ttry {\n\t\t\tvar self = this;\n\n\t\t\tif (this.data.url.match(\"<blockquote class=['\\\"]imgur-embed-pub['\\\"]\")){\n\t\t\t\tvar found = this.data.url.match(/(imgur\\.com)\\/(\\w+)/);\n\t\t\t\tthis.media_id = found[2];\n\t\t\t\tthis.data.url = \"http://imgur.com/gallery/\" + this.media_id;\n\t\t\t}\n\t\t\telse if (this.data.url){\n\t\t\t\tthis.media_id = this.data.url.split('/').slice(-1)[0];\n\t\t\t}\n\n\t        TL.Load.js([\n\t\t\t\t\t\t'https://s.imgur.com/min/embed.js'], \n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tself.createMedia();\n\t\t\t\t\t}\n\t\t\t);\n\n\t\t} catch(e) {\n\t\t    this.loadErrorDisplay(this._(\"imgur_invalidurl_err\"));\n\t\t}\n\t},\n\n\tcreateMedia: function() {\n\t    var self = this;\n\t\tvar api_url = \"https://api.imgur.com/oembed.json?url=\" + this.data.url;\n\n\t\t// Content div\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-image tl-media-imgur\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis._el.content);\n\n\t\t// API Call\n\n          TL.ajax({\n          \ttype: 'GET',\n            url: api_url,\n            dataType: 'json',\n            success: function(data){\n            try {\n                self._el.content_item.innerHTML\t= data.html;\n            \tsetInterval(function(){\n            \t\tif(document.querySelector(\"blockquote.imgur-embed-pub\") == null){\n            \t\t\tclearInterval();\n            \t\t}\n            \t\telse{\n            \t\t\timgurEmbed.createIframe();\n            \t\t\tdocument.getElementById(\"imageElement\").removeAttribute(\"style\");\n            \t\t\tdocument.getElementById(\"image\").removeAttribute(\"style\");\n            \t\t}\n            \t}, 2000);\n            } catch(e) {\n            }\n            },\n            error: function(xhr, errorType, error) {\n              tc = new TL.TimelineConfig();\n              if (errorType == 'parsererror') {\n                var error = new TL.Error(\"invalid_url_err\");\n              } else {\n                var error = new TL.Error(\"unknown_read_err\", errorType);\n              }\n              self.loadErrorDisplay(self._(\"imgur_invalidurl_err\"));\n              tc.logError(error);\n            }\n          });\n\n         this.onLoaded();\n\n\t},\n\n\n\n\t_updateMediaDisplay: function() {\n\t\t//this.el.content_item = document.getElementById(this._el.content_item.id);\n\t\tthis._el.content_item.style.width = this.options.width + \"px\";\n\t\tthis._el.content_item.style.height = TL.Util.ratio.r16_9({w:this.options.width}) + \"px\";\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Instagram.js\n********************************************** */\n\n/*\tTL.Media.Instagram\n\n================================================== */\n\nTL.Media.Instagram = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url.split(\"\\/p\\/\")[1].split(\"/\")[0];\n\n\t\tif(!this.options.background) {\n\t\t    this.createMedia();\n\t\t}\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n    createMedia: function() {\n        var self = this;\n\n\t\t// Link\n\t\tthis._el.content_link \t\t\t\t= TL.Dom.create(\"a\", \"\", this._el.content);\n\t\tthis._el.content_link.href \t\t\t= this.data.url;\n\t\tthis._el.content_link.target \t\t= \"_blank\";\n\n\t\t// Photo\n\t\tthis._el.content_item\t\t\t\t= TL.Dom.create(\"img\", \"tl-media-item tl-media-image tl-media-instagram tl-media-shadow\", this._el.content_link);\n\n\t\tif (this.data.alt) {\n\t\t\tthis._el.content_item.alt = this.data.alt;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.alt = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\tif (this.data.title) {\n\t\t\tthis._el.content_item.title = this.data.title;\n\t\t} else if (this.data.caption) {\n\t\t\tthis._el.content_item.title = TL.Util.unhtmlify(this.data.caption);\n\t\t}\n\n\t\t// Media Loaded Event\n\t\tthis._el.content_item.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t    this._el.content_item.src = this.getImageURL(this._el.content.offsetWidth);\n    },\n\n    getImageURL: function(w, h) {\n        return \"https://instagram.com/p/\" + this.media_id + \"/media/?size=\" + this.sizes(w);\n    },\n\n\t_getMeta: function() {\n\t\tvar self = this,\n\t\t    api_url;\n\n\t\t// API URL\n\t\tapi_url = \"https://api.instagram.com/oembed?url=https://instagr.am/p/\" + this.media_id + \"&callback=?\";\n\n\t\t// API Call\n\t\tTL.getJSON(api_url, function(d) {\n\t\t\tself.data.credit_alternate = \"<a href='\" + d.author_url + \"' target='_blank'>\" + d.author_name + \"</a>\";\n\t\t\tself.data.caption_alternate = d.title;\n\t\t\tself.updateMeta();\n\t\t});\n\t},\n\n\tsizes: function(s) {\n\t\tvar _size = \"\";\n\t\tif (s <= 150) {\n\t\t\t_size = \"t\";\n\t\t} else if (s <= 306) {\n\t\t\t_size = \"m\";\n\t\t} else {\n\t\t\t_size = \"l\";\n\t\t}\n\n\t\treturn _size;\n\t}\n\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.GoogleMap.js\n********************************************** */\n\n/*  TL.Media.Map\n================================================== */\n\nTL.Media.GoogleMap = TL.Media.extend({\n\tincludes: [TL.Events],\n\n\t/*  Load the media\n\t================================================== */\n\t_loadMedia: function() {\n\n\t\t// Create Dom element\n\t\tthis._el.content_item   = TL.Dom.create(\"div\", \"tl-media-item tl-media-map tl-media-shadow\", this._el.content);\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\n\t\t// API Call\n\t\tthis.mapframe = TL.Dom.create(\"iframe\", \"\", this._el.content_item);\n\t\twindow.stash = this;\n\t\tthis.mapframe.width       = \"100%\";\n\t\tthis.mapframe.height      = \"100%\";\n\t\tthis.mapframe.frameBorder = \"0\";\n\t\tthis.mapframe.src         = this.makeGoogleMapsEmbedURL(this.media_id, this.options.api_key_googlemaps);\n\t\t\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t_updateMediaDisplay: function() {\n\t\tif (this._state.loaded) {\n\t\t\tvar dimensions = TL.Util.ratio.square({w:this._el.content_item.offsetWidth});\n\t\t\tthis._el.content_item.style.height = dimensions.h + \"px\";\n\t\t}\n\t},\n\t\n\tmakeGoogleMapsEmbedURL: function(url,api_key) {\n\t\t// Test with https://docs.google.com/spreadsheets/d/1zCpvtRdftlR5fBPppmy_-SkGIo7RMwoPUiGFZDAXbTc/edit\n\t\tvar Streetview = false;\n\n\t\tfunction determineMapMode(url){\n\t\t\tfunction parseDisplayMode(display_mode, param_string) {\n\t\t\t\t// Set the zoom param\n\t\t\t\tif (display_mode.slice(-1) == \"z\") {\n\t\t\t\t\tparam_string[\"zoom\"] = display_mode;\n\t\t\t\t\t// Set the maptype to something other than \"roadmap\"\n\t\t\t\t} else if (display_mode.slice(-1) == \"m\") {\n\t\t\t\t\t// TODO: make this somehow interpret the correct zoom level\n\t\t\t\t\t// until then fake it by using Google's default zoom level\n\t\t\t\t\tparam_string[\"zoom\"] = 14;\n\t\t\t\t\tparam_string[\"maptype\"] = \"satellite\";\n\t\t\t\t\t// Set all the fun streetview params\n\t\t\t\t} else if (display_mode.slice(-1) == \"t\") {\n\t\t\t\t\tStreetview = true;\n\t\t\t\t\t// streetview uses \"location\" instead of \"center\"\n\t\t\t\t\t// \"place\" mode doesn't have the center param, so we may need to grab that now\n\t\t\t\t\tif (mapmode == \"place\") {\n\t\t\t\t\t\tvar center = url.match(regexes[\"place\"])[3] + \",\" + url.match(regexes[\"place\"])[4];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar center = param_string[\"center\"];\n\t\t\t\t\t\tdelete param_string[\"center\"];\n\t\t\t\t\t}\n\t\t\t\t\t// Clear out all the other params -- this is so hacky\n\t\t\t\t\tparam_string = {};\n\t\t\t\t\tparam_string[\"location\"] = center;\n\t\t\t\t\tstreetview_params = display_mode.split(\",\");\n\t\t\t\t\tfor (param in param_defs[\"streetview\"]) {\n\t\t\t\t\t\tvar i = parseInt(param) + 1;\n\t\t\t\t\t\tif (param_defs[\"streetview\"][param] == \"pitch\" && streetview_params[i] == \"90t\"){\n\t\t\t\t\t\t\t// Although 90deg is the horizontal default in the URL, 0 is horizontal default for embed URL. WHY??\n\t\t\t\t\t\t\t// https://developers.google.com/maps/documentation/javascript/streetview\n\t\t\t\t\t\t\tparam_string[param_defs[\"streetview\"][param]] = 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparam_string[param_defs[\"streetview\"][param]] = streetview_params[i].slice(0,-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn param_string;\n\t\t\t}\n\t\t\tfunction determineMapModeURL(mapmode, match) {\n\t\t\t\tvar param_string = {};\n\t\t\t\tvar url_root = match[1], display_mode = match[match.length - 1];\n\t\t\t\tfor (param in param_defs[mapmode]) {\n\t\t\t\t\t// skip first 2 matches, because they reflect the URL and not params\n\t\t\t\t\tvar i = parseInt(param)+2;\n\t\t\t\t\tif (param_defs[mapmode][param] == \"center\") {\n\t\t\t\t\t\tparam_string[param_defs[mapmode][param]] = match[i] + \",\" + match[++i];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparam_string[param_defs[mapmode][param]] = match[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparam_string = parseDisplayMode(display_mode, param_string);\n\t\t\t\tparam_string[\"key\"] = api_key;\n\t\t\t\tif (Streetview == true) {\n\t\t\t\t\tmapmode = \"streetview\";\n\t\t\t\t} else {\n\t\t\t\t}\n\t\t\t\treturn (url_root + \"/embed/v1/\" + mapmode + TL.Util.getParamString(param_string));\n\t\t\t}\n\n\n\t\t\tmapmode = \"view\";\n\t\t\tif (url.match(regexes[\"place\"])) {\n\t\t\t\tmapmode = \"place\";\n\t\t\t} else if (url.match(regexes[\"directions\"])) {\n\t\t\t\tmapmode = \"directions\";\n\t\t\t} else if (url.match(regexes[\"search\"])) {\n\t\t\t\tmapmode = \"search\";\n\t\t\t}\n\t\t\treturn determineMapModeURL(mapmode, url.match(regexes[mapmode]));\n\n\t\t}\n\n\t\t// These must be in the order they appear in the original URL\n\t\t// \"key\" param not included since it's not in the URL structure\n\t\t// Streetview \"location\" param not included since it's captured as \"center\"\n\t\t// Place \"center\" param ...um...\n\t\tvar param_defs = {\n\t\t\t\"view\": [\"center\"],\n\t\t\t\"place\": [\"q\", \"center\"],\n\t\t\t\"directions\": [\"origin\", \"destination\", \"center\"],\n\t\t\t\"search\": [\"q\", \"center\"],\n\t\t\t\"streetview\": [\"fov\", \"heading\", \"pitch\"]\n\t\t};\n\t\t// Set up regex parts to make updating these easier if Google changes them\n\t\tvar root_url_regex = /(https:\\/\\/.+google.+?\\/maps)/;\n\t\tvar coords_regex = /@([-\\d.]+),([-\\d.]+)/;\n\t\tvar address_regex = /([\\w\\W]+)/;\n\n\t\t// Data doesn't seem to get used for anything\n\t\tvar data_regex = /data=[\\S]*/;\n\n\t\t// Capture the parameters that determine what map tiles to use\n\t\t// In roadmap view, mode URLs include zoom paramater (e.g. \"14z\")\n\t\t// In satellite (or \"earth\") view, URLs include a distance parameter (e.g. \"84511m\")\n\t\t// In streetview, URLs include paramaters like \"3a,75y,49.76h,90t\" -- see http://stackoverflow.com/a/22988073\n\t\tvar display_mode_regex = /,((?:[-\\d.]+[zmayht],?)*)/;\n\n\t\tvar regexes = {\n\t\t\tview: new RegExp(root_url_regex.source + \"/\" + coords_regex.source + display_mode_regex.source),\n\t\t\tplace: new RegExp(root_url_regex.source + \"/place/\" + address_regex.source + \"/\" + coords_regex.source + display_mode_regex.source),\n\t\t\tdirections: new RegExp(root_url_regex.source + \"/dir/\" + address_regex.source + \"/\" + address_regex.source + \"/\" + coords_regex.source + display_mode_regex.source),\n\t\t\tsearch: new RegExp(root_url_regex.source + \"/search/\" + address_regex.source + \"/\" + coords_regex.source + display_mode_regex.source)\n\t\t};\n\t\treturn determineMapMode(url);\n\t}\n   \n});\n\n\n/* **********************************************\n     Begin TL.Media.PDF.js\n********************************************** */\n\n/*\tTL.Media.PDF\n * Chrome and Firefox on both OSes and Safari all support PDFs as iframe src.\n * This prompts for a download on IE10/11. We should investigate using\n * https://mozilla.github.io/pdf.js/ to support showing PDFs on IE.\n================================================== */\n\nTL.Media.PDF = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar url = TL.Util.transformImageURL(this.data.url),\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe\", this._el.content);\n\t\tvar markup = \"\";\n\t\t// not assigning media_id attribute. Seems like a holdover which is no longer used.\n\t\tif (TL.Browser.ie || TL.Browser.edge || url.match(/dl.dropboxusercontent.com/)) {\n\t\t\tmarkup = \"<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url=\" + url + \"&amp;embedded=true'></iframe>\";\n\t\t} else {\n\t\t\tmarkup = \"<iframe class='doc' frameborder='0' width='100%' height='100%' src='\" + url + \"'></iframe>\"\n\t\t}\n\t\tthis._el.content_item.innerHTML\t= markup\n\t\tthis.onLoaded();\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = this.options.height + \"px\";\n\t}\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Profile.js\n********************************************** */\n\n/*\tTL.Media.Profile\n\n================================================== */\n\nTL.Media.Profile = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t\n\t\tthis._el.content_item\t\t\t\t= TL.Dom.create(\"img\", \"tl-media-item tl-media-image tl-media-profile tl-media-shadow\", this._el.content);\n\t\tthis._el.content_item.src\t\t\t= this.data.url;\n\t\t\n\t\tthis.onLoaded();\n\t},\n\t\n\t_updateMediaDisplay: function(layout) {\n\t\t\n\t\t\n\t\tif(TL.Browser.firefox) {\n\t\t\tthis._el.content_item.style.maxWidth = (this.options.width/2) - 40 + \"px\";\n\t\t}\n\t}\n\t\n});\n\n/* **********************************************\n     Begin TL.Media.Slider.js\n********************************************** */\n\n/*\tTL.Media.SLider\n\tProduces a Slider\n\tTakes a data object and populates a dom object\n\tTODO\n\tPlaceholder\n================================================== */\n\nTL.Media.Slider = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t\n\t\tthis._el.content_item\t\t\t\t= TL.Dom.create(\"img\", \"tl-media-item tl-media-image\", this._el.content);\n\t\tthis._el.content_item.src\t\t\t= this.data.url;\n\t\t\n\t\tthis.onLoaded();\n\t}\n\t\n});\n\n/* **********************************************\n     Begin TL.Media.SoundCloud.js\n********************************************** */\n\n/*\tTL.Media.SoundCloud\n================================================== */\n\nvar soundCoudCreated = false;\n\nTL.Media.SoundCloud = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow\", this._el.content);\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\n\t\t// API URL\n\t\tapi_url = \"https://soundcloud.com/oembed?url=\" + this.media_id + \"&format=js&callback=?\"\n\n\t\t// API Call\n\t\tTL.getJSON(api_url, function(d) {\n\t\t\tTL.Load.js(\"https://w.soundcloud.com/player/api.js\", function() {//load soundcloud api for pausing.\n\t\t\t\tself.createMedia(d);\n\t\t\t});\n\t\t});\n\n\t},\n\n\tcreateMedia: function(d) {\n\t\tthis._el.content_item.innerHTML = d.html;\n\n\t\tthis.soundCloudCreated = true;\n\n\t\tself.widget = SC.Widget(this._el.content_item.querySelector(\"iframe\"));//create widget for api use\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t_stopMedia: function() {\n\t\tif (this.soundCloudCreated)\n\t\t{\n\t\t\tself.widget.pause();\n\t\t}\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Spotify.js\n********************************************** */\n\n/*\tTL.Media.Spotify\n================================================== */\n\nTL.Media.Spotify = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-spotify\", this._el.content);\n\n\t\t// Get Media ID\n\t\tif (this.data.url.match(/^spotify:track/) || this.data.url.match(/^spotify:album/) || this.data.url.match(/^spotify:user:.+:playlist:/)) {\n\t\t\tthis.media_id = this.data.url;\n\t\t}\n\n\t\tif (this.data.url.match(/spotify\\.com\\/track\\/(.+)/)) {\n\t\t\tthis.media_id = \"spotify:track:\" + this.data.url.match(/spotify\\.com\\/track\\/(.+)/)[1];\n\t\t} else if (this.data.url.match(/spotify\\.com\\/album\\/(.+)/)) {\n\t\t\tthis.media_id = \"spotify:album:\" + this.data.url.match(/spotify\\.com\\/album\\/(.+)/)[1];\n\t\t} else if (this.data.url.match(/spotify\\.com\\/user\\/(.+?)\\/playlist\\/(.+)/)) {\n\t\t\tvar user = this.data.url.match(/spotify\\.com\\/user\\/(.+?)\\/playlist\\/(.+)/)[1];\n\t\t\tvar playlist = this.data.url.match(/spotify\\.com\\/user\\/(.+?)\\/playlist\\/(.+)/)[2];\n\t\t\tthis.media_id = \"spotify:user:\" + user + \":playlist:\" + playlist;\n\t\t} else if (this.data.url.match(/spotify\\.com\\/artist\\/(.+)/)) {\n\t\t\tvar artist = this.data.url.match(/spotify\\.com\\/artist\\/(.+)/)[1];\n\t\t\tthis.media_id = \"spotify:artist:\" + artist;\n\t\t}\n\n\n\t\tif (this.media_id) {\n\t\t\t// API URL\n\t\t\tapi_url = \"https://embed.spotify.com/?uri=\" + this.media_id + \"&theme=white&view=coverart\";\n\n\t\t\tthis.player = TL.Dom.create(\"iframe\", \"tl-media-shadow\", this._el.content_item);\n\t\t\tthis.player.width \t\t= \"100%\";\n\t\t\tthis.player.height \t\t= \"100%\";\n\t\t\tthis.player.frameBorder = \"0\";\n\t\t\tthis.player.src \t\t= api_url;\n\n\t\t\t// After Loaded\n\t\t\tthis.onLoaded();\n\n\t\t} else {\n\t\t\t\tthis.loadErrorDisplay(this._('spotify_invalid_url'));\n\t\t}\n\t},\n\n\t// Update Media Display\n\n\t_updateMediaDisplay: function(l) {\n\t\tvar _height = this.options.height,\n\t\t\t_player_height = 0,\n\t\t\t_player_width = 0;\n\n\t\tif (TL.Browser.mobile) {\n\t\t\t_height = (this.options.height/2);\n\t\t} else {\n\t\t\t_height = this.options.height - this.options.credit_height - this.options.caption_height - 30;\n\t\t}\n\n\t\tthis._el.content_item.style.maxHeight = \"none\";\n\t\ttrace(_height);\n\t\ttrace(this.options.width)\n\t\tif (_height > this.options.width) {\n\t\t\ttrace(\"height is greater\")\n\t\t\t_player_height = this.options.width + 80 + \"px\";\n\t\t\t_player_width = this.options.width + \"px\";\n\t\t} else {\n\t\t\ttrace(\"width is greater\")\n\t\t\ttrace(this.options.width)\n\t\t\t_player_height = _height + \"px\";\n\t\t\t_player_width = _height - 80 + \"px\";\n\t\t}\n\n\n\t\tthis.player.style.width = _player_width;\n\t\tthis.player.style.height = _player_height;\n\n\t\tif (this._el.credit) {\n\t\t\tthis._el.credit.style.width\t\t= _player_width;\n\t\t}\n\t\tif (this._el.caption) {\n\t\t\tthis._el.caption.style.width\t\t= _player_width;\n\t\t}\n\t},\n\n\n\t_stopMedia: function() {\n\t\t// Need spotify stop code\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Storify.js\n********************************************** */\n\n/*\tTL.Media.Storify\n================================================== */\n\nTL.Media.Storify = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar content;\n\t\t\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-storify\", this._el.content);\n\t\t\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url;\n\t\t\n\t\t// Content\n\t\tcontent =\t\"<iframe frameborder='0' width='100%' height='100%' src='\" + this.media_id + \"/embed'></iframe>\";\n\t\tcontent +=\t\"<script src='\" + this.media_id + \".js'></script>\";\n\t\t\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = content;\n\t\t\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\t\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = this.options.height + \"px\";\n\t}\n\t\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.Text.js\n********************************************** */\n\nTL.Media.Text = TL.Class.extend({\n\t\n\tincludes: [TL.Events],\n\t\n\t// DOM ELEMENTS\n\t_el: {\n\t\tcontainer: {},\n\t\tcontent_container: {},\n\t\tcontent: {},\n\t\theadline: {},\n\t\tdate: {}\n\t},\n\t\n\t// Data\n\tdata: {\n\t\tunique_id: \t\t\t\"\",\n\t\theadline: \t\t\t\"headline\",\n\t\ttext: \t\t\t\t\"text\"\n\t},\n\t\n\t// Options\n\toptions: {\n\t\ttitle: \t\t\tfalse\n\t},\n\t\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options, add_to_container) {\n\t\t\n\t\tTL.Util.setData(this, data);\n\t\t\n\t\t// Merge Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\t\n\t\tthis._el.container = TL.Dom.create(\"div\", \"tl-text\");\n\t\tthis._el.container.id = this.data.unique_id;\n\t\t\n\t\tthis._initLayout();\n\t\t\n\t\tif (add_to_container) {\n\t\t\tadd_to_container.appendChild(this._el.container);\n\t\t};\n\t\t\n\t},\n\t\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function() {\n\t\t\n\t},\n\t\n\thide: function() {\n\t\t\n\t},\n\t\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t\t//this.onAdd();\n\t},\n\t\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t},\n\t\n\theadlineHeight: function() {\n\t\treturn this._el.headline.offsetHeight + 40;\n\t},\n\t\n\taddDateText: function(str) {\n\t\tthis._el.date.innerHTML = str;\n\t},\n\t\n\t/*\tEvents\n\t================================================== */\n\tonLoaded: function() {\n\t\tthis.fire(\"loaded\", this.data);\n\t},\n\t\n\tonAdd: function() {\n\t\tthis.fire(\"added\", this.data);\n\t},\n\n\tonRemove: function() {\n\t\tthis.fire(\"removed\", this.data);\n\t},\n\t\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t\n\t\t// Create Layout\n\t\tthis._el.content_container\t\t\t= TL.Dom.create(\"div\", \"tl-text-content-container\", this._el.container);\n\t\t\n\t\t// Date\n\t\tthis._el.date \t\t\t\t= TL.Dom.create(\"h3\", \"tl-headline-date\", this._el.content_container);\n\t\t\n\t\t// Headline\n\t\tif (this.data.headline != \"\") {\n\t\t\tvar headline_class = \"tl-headline\";\n\t\t\tif (this.options.title) {\n\t\t\t\theadline_class = \"tl-headline tl-headline-title\";\n\t\t\t}\n\t\t\tthis._el.headline\t\t\t\t= TL.Dom.create(\"h2\", headline_class, this._el.content_container);\n\t\t\tthis._el.headline.innerHTML\t\t= this.data.headline;\n\t\t}\n\n\t\t// Text\n\t\tif (this.data.text != \"\") {\n\t\t\tvar text_content = \"\";\n\n\t\t\ttext_content += TL.Util.htmlify(this.options.autolink == true ? TL.Util.linkify(this.data.text) : this.data.text);\n\t\t\ttrace(this.data.text);\n\t\t\tthis._el.content\t\t\t\t= TL.Dom.create(\"div\", \"tl-text-content\", this._el.content_container);\n\t\t\tthis._el.content.innerHTML\t\t= text_content;\n\t\t\ttrace(text_content);\n\t\t\ttrace(this._el.content)\n\t\t}\n\n\t\t// Fire event that the slide is loaded\n\t\tthis.onLoaded();\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Twitter.js\n********************************************** */\n\n/*\tTL.Media.Twitter\n\tProduces Twitter Display\n================================================== */\n\nTL.Media.Twitter = TL.Media.extend({\n\t\n\tincludes: [TL.Events],\n    \n\n\t\n\t/*\tLoad the media\n\t================================================== */\n\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\t\t\t\t\t\n\t\t// Create Dom element\n\t\tthis._el.content_item = TL.Dom.create(\"div\", \"tl-media-twitter\", this._el.content);\n\t\tthis._el.content_container.className = \"tl-media-content-container tl-media-content-container-text\";\n        \t\t\n\t\t// Get Media ID\n        if(this.data.url.match(\"^(https?:)?\\/*(www.)?twitter\\.com\"))\n        {\n\t\tif (this.data.url.match(\"status\\/\")) {\n\t\t\tthis.media_id = this.data.url.split(\"status\\/\")[1];\n\t\t} else if (this.data.url.match(\"statuses\\/\")) {\n\t\t\tthis.media_id = this.data.url.split(\"statuses\\/\")[1];\n\t\t} else {\n\t\t\tthis.media_id = \"\";\n\t\t}\n        }\n        \n        else if(this.data.url.match(\"<blockquote class=['\\\"]twitter-tweet['\\\"]\")) {\n\t\t\n        var found = this.data.url.match(/(status|statuses)\\/(\\d+)/);\n\t\tif (found && found.length > 2) {\n\t\t    this.media_id = found[2];\n\t\t} else {\n\t\t    self.loadErrorDisplay(self._(\"twitterembed_invalidurl_err\"));\n\t\t    return;\n\t\t}\n    }\n        \n\t\t// API URL\n\t\tapi_url = \"https://api.twitter.com/1/statuses/oembed.json?id=\" + this.media_id + \"&omit_script=true&include_entities=true&callback=?\";\n\t\t\n\t\t// API Call\n\t\tTL.ajax({\n\t\t\ttype: 'GET',\n\t\t\turl: api_url,\n\t\t\tdataType: 'json', //json data type\n\t\t\tsuccess: function(d){\n\t\t\t\tself.createMedia(d);\n\t\t\t},\n\t\t\terror:function(xhr, type){\n\t\t\t\tvar error_text = \"\";\n\t\t\t\terror_text += self._(\"twitter_load_err\") + \"<br/>\" + self.media_id + \"<br/>\" + type;\n\t\t\t\tself.loadErrorDisplay(error_text);\n\t\t\t}\n\t\t});\n\t\t \n\t},\n\t\n\tcreateMedia: function(d) {\n        trace(\"create_media\")\t\n\t\tvar tweet\t\t\t\t= \"\",\n\t\t\ttweet_text\t\t\t= \"\",\n\t\t\ttweetuser\t\t\t= \"\",\n\t\t\ttweet_status_temp \t= \"\",\n\t\t\ttweet_status_url \t= \"\",\n\t\t\ttweet_status_date \t= \"\",\n            self = this;\n\t\t\t\n\t\t//\tTWEET CONTENT\n\t\ttweet_text \t\t\t= d.html.split(\"<\\/p>\\&mdash;\")[0] + \"</p></blockquote>\";\n\t\ttweetuser\t\t\t= d.author_url.split(\"twitter.com\\/\")[1];\n\t\ttweet_status_temp \t= d.html.split(\"<\\/p>\\&mdash;\")[1].split(\"<a href=\\\"\")[1];\n\t\ttweet_status_url \t= tweet_status_temp.split(\"\\\"\\>\")[0];\n\t\ttweet_status_date \t= tweet_status_temp.split(\"\\\"\\>\")[1].split(\"<\\/a>\")[0];\n\t\t\n\t\t// Open links in new window\n\t\ttweet_text = tweet_text.replace(/<a href/ig, '<a target=\"_blank\" href');\n        \n        if (tweet_text.includes(\"pic.twitter.com\")) {\n            \n            TL.Load.js('https://platform.twitter.com/widgets.js', function() {\n                twttr.widgets.createTweet(self.media_id, self._el.content_item,\n                {\n                    conversation : 'none',    // or all\n                    linkColor    : '#cc0000', // default is blue\n                    theme        : 'light'    // or dark\n                })\n            });\n            \n            this.onLoaded();\n            \n        } else {\n\n            // \tTWEET CONTENT\n            tweet += tweet_text;\n\n            //\tTWEET AUTHOR\n            tweet += \"<div class='vcard'>\";\n            tweet += \"<a href='\" + tweet_status_url + \"' class='twitter-date' target='_blank'>\" + tweet_status_date + \"</a>\";\n            tweet += \"<img src='\" + \"' class='tl-media-item tl-media-image' target='_blank'>\" + \"</a>\";\n            tweet += \"<div class='author'>\";\n            tweet += \"<a class='screen-name url' href='\" + d.author_url + \"' target='_blank'>\";\n            tweet += \"<span class='avatar'></span>\";\n            tweet += \"<span class='fn'>\" + d.author_name + \" <span class='tl-icon-twitter'></span></span>\";\n            tweet += \"<span class='nickname'>@\" + tweetuser + \"<span class='thumbnail-inline'></span></span>\";\n            tweet += \"</a>\";\n            tweet += \"</div>\";\n            tweet += \"</div>\";\n\n\n            // Add to DOM\n            this._el.content_item.innerHTML\t= tweet;\n\n            // After Loaded\n            this.onLoaded();\n        }\n    },\n\t\n    \n\tupdateMediaDisplay: function() {\n\t\t\n\t},\n\t\n\t_updateMediaDisplay: function() {\n\t\t\n\t},\n    \n\t\n\t\n\t\n});\n\n\n/* **********************************************\n     Begin TL.Media.TwitterEmbed.js\n********************************************** */\n\n/*\tTL.Media.TwitterEmbed\r\n\tProduces Twitter Display\r\n================================================== */\r\n\r\n        var mediaID;\r\n\r\nTL.Media.TwitterEmbed = TL.Media.extend({\r\n\tincludes: [TL.Events],\r\n    \r\n\r\n\t\r\n\t/*\tLoad the media\r\n\t================================================== */\r\n\t_loadMedia: function() {\r\n\t\tvar api_url,\r\n\t\t\tself = this;\r\n\t\t\t\t\t\r\n\t\t// Create Dom element\r\n\t\tthis._el.content_item = TL.Dom.create(\"div\", \"tl-media-twitter\", this._el.content);\r\n\t\tthis._el.content_container.className = \"tl-media-content-container tl-media-content-container-text\";\r\n\t\t\r\n\t\t// Get Media ID\r\n\t\tvar found = this.data.url.match(/(status|statuses)\\/(\\d+)/);\r\n\t\tif (found && found.length > 2) {\r\n\t\t    this.media_id = found[2];\r\n\t\t} else {\r\n\t\t    self.loadErrorDisplay(self._(\"twitterembed_invalidurl_err\"));\r\n\t\t    return;\r\n\t\t}\r\n\r\n\t\t// API URL\r\n\t\tapi_url = \"https://api.twitter.com/1/statuses/oembed.json?id=\" + this.media_id + \"&omit_script=true&include_entities=true&callback=?\";\r\n        \r\n        window.twttr = (function(d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0],\r\n            t = window.twttr || {};\r\n            if (d.getElementById(id)) return t;\r\n            js = d.createElement(s);\r\n            js.id = id;\r\n            js.src = \"https://platform.twitter.com/widgets.js\";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n\r\n            t._e = [];\r\n            t.ready = function(f) {\r\n            t._e.push(f);\r\n            };\r\n\r\n            return t;\r\n        }(document, \"script\", \"twitter-wjs\"));\r\n        \r\n        mediaID = this.media_id;\r\n\t\t\r\n\t\t// API Call\r\n\t\tTL.ajax({\r\n\t\t\ttype: 'GET',\r\n\t\t\turl: api_url,\r\n\t\t\tdataType: 'json', //json data type\r\n\t\t\tsuccess: function(d){\r\n\t\t\t\tself.createMedia(d);\r\n\t\t\t},\r\n\t\t\terror:function(xhr, type){\r\n\t\t\t\tvar error_text = \"\";\r\n\t\t\t\terror_text += self._(\"twitter_load_err\") + \"<br/>\" + self.media_id + \"<br/>\" + type;\r\n\t\t\t\tself.loadErrorDisplay(error_text);\r\n\t\t\t}\r\n\t\t});\r\n\t\t \r\n\t},\r\n\t\r\n\tcreateMedia: function(d) {\t\r\n\t\ttrace(\"create_media\")\t\r\n\t\tvar tweet\t\t\t\t= \"\",\r\n\t\t\ttweet_text\t\t\t= \"\",\r\n\t\t\ttweetuser\t\t\t= \"\",\r\n\t\t\ttweet_status_temp \t= \"\",\r\n\t\t\ttweet_status_url \t= \"\",\r\n\t\t\ttweet_status_date \t= \"\";\r\n\t\t\t\r\n\t\t//\tTWEET CONTENT\r\n\t\ttweet_text \t\t\t= d.html.split(\"<\\/p>\\&mdash;\")[0] + \"</p></blockquote>\";\r\n        console.log(tweet_text);\r\n\t\ttweetuser\t\t\t= d.author_url.split(\"twitter.com\\/\")[1];\r\n\t\ttweet_status_temp \t= d.html.split(\"<\\/p>\\&mdash;\")[1].split(\"<a href=\\\"\")[1];\r\n\t\ttweet_status_url \t= tweet_status_temp.split(\"\\\"\\>\")[0];\r\n\t\ttweet_status_date \t= tweet_status_temp.split(\"\\\"\\>\")[1].split(\"<\\/a>\")[0];\r\n\t\t\r\n\t\t// Open links in new window\r\n\t\ttweet_text = tweet_text.replace(/<a href/ig, '<a target=\"_blank\" href');\r\n        \r\n        if (tweet_text.includes(\"pic.twitter.com\")) {\r\n            twttr.ready(\r\n                function(evt) {\r\n                    tweet = document.getElementsByClassName(\"tl-media-twitter\")[0];\r\n                    var id = String(mediaID);\r\n                    twttr.widgets.createTweet(id, tweet,\r\n                        {\r\n                            conversation : 'none',    // or all\r\n                            linkColor    : '#cc0000', // default is blue\r\n                            theme        : 'light'    // or dark\r\n                        })\r\n                    .then(function (evt) {\r\n                        this.onLoaded();\r\n                    });\r\n                }\r\n            );\r\n            this._el.content_item.innerHTML\t= tweet;\r\n            this.onLoaded();\r\n        } else{\r\n            // \tTWEET CONTENT\r\n            tweet += tweet_text;\r\n\r\n            //\tTWEET AUTHOR\r\n            tweet += \"<div class='vcard'>\";\r\n            tweet += \"<a href='\" + tweet_status_url + \"' class='twitter-date' target='_blank'>\" + tweet_status_date + \"</a>\";\r\n            tweet += \"<div class='author'>\";\r\n            tweet += \"<a class='screen-name url' href='\" + d.author_url + \"' target='_blank'>\";\r\n            tweet += \"<span class='avatar'></span>\";\r\n            tweet += \"<span class='fn'>\" + d.author_name + \" <span class='tl-icon-twitter'></span></span>\";\r\n            tweet += \"<span class='nickname'>@\" + tweetuser + \"<span class='thumbnail-inline'></span></span>\";\r\n            tweet += \"</a>\";\r\n            tweet += \"</div>\";\r\n            tweet += \"</div>\";\r\n\r\n\r\n            // Add to DOM\r\n            this._el.content_item.innerHTML\t= tweet;\r\n\r\n            // After Loaded\r\n            this.onLoaded();\r\n        }\r\n\t\t\t\r\n\t},\r\n\t\r\n\tupdateMediaDisplay: function() {\r\n\t\t\r\n\t},\r\n\t\r\n\t_updateMediaDisplay: function() {\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n});\n\n/* **********************************************\n     Begin TL.Media.Vimeo.js\n********************************************** */\n\n/*\tTL.Media.Vimeo\n================================================== */\n\nTL.Media.Vimeo = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow\", this._el.content);\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url.split(/video\\/|\\/\\/vimeo\\.com\\//)[1].split(/[?&]/)[0];\n\t\tvar start_time = null;\n\n\t\t// Get start time\n\t\tif (this.data.url.match(/#t=([^&]+).*/)) {\n\t\t\tstart_time = this.data.url.match(/#t=([^&]+).*/)[1];\n\t\t}\n\n\t\t// API URL\n\t\tapi_url = \"https://player.vimeo.com/video/\" + this.media_id + \"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff\";\n\t\tif (start_time) {\n\t\t\tapi_url = api_url += '&amp;#t=' + start_time;\n\t\t}\n\n\t\tthis.player = TL.Dom.create(\"iframe\", \"\", this._el.content_item);\n\n\t\t// Media Loaded Event\n\t\tthis.player.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\tthis.player.width \t\t= \"100%\";\n\t\tthis.player.height \t\t= \"100%\";\n\t\tthis.player.frameBorder = \"0\";\n\t\tthis.player.src \t\t= api_url;\n\n\t\tthis.player.setAttribute('allowfullscreen', '');\n\t\tthis.player.setAttribute('webkitallowfullscreen', '');\n\t\tthis.player.setAttribute('mozallowfullscreen', '');\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = TL.Util.ratio.r16_9({w:this._el.content_item.offsetWidth}) + \"px\";\n\t},\n\n\t_stopMedia: function() {\n\n\t\ttry {\n\t\t\tthis.player.contentWindow.postMessage(JSON.stringify({method: \"pause\"}), \"https://player.vimeo.com\");\n\t\t}\n\t\tcatch(err) {\n\t\t\ttrace(err);\n\t\t}\n\t}\n});\n\n\n/* **********************************************\n     Begin TL.Media.Vine.js\n********************************************** */\n\n/*\tTL.Media.Vine\n\n================================================== */\n\nTL.Media.Vine = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-vine tl-media-shadow\", this._el.content);\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url.split(\"vine.co/v/\")[1];\n\n\t\t// API URL\n\t\tapi_url = \"https://vine.co/v/\" + this.media_id + \"/embed/simple\";\n\n\t\t// API Call\n\t\tthis._el.content_item.innerHTML = \"<iframe frameborder='0' width='100%' height='100%' src='\" + api_url + \"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>\"\t\t\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tvar size = TL.Util.ratio.square({w:this._el.content_item.offsetWidth , h:this.options.height});\n\t\tthis._el.content_item.style.height = size.h + \"px\";\n\t},\n\n\t_stopMedia: function() {\n\t\tthis._el.content_item.querySelector(\"iframe\").contentWindow.postMessage('pause', '*');\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Website.js\n********************************************** */\n\n/*\tTL.Media.Website\n\tUses Embedly\n\thttp://embed.ly/docs/api/extract/endpoints/1/extract\n================================================== */\n\nTL.Media.Website = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar self = this;\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url.replace(/.*?:\\/\\//g, \"\");\n\n\t\tif (this.options.api_key_embedly) {\n\t\t\t// API URL\n\t\t\tapi_url = \"https://api.embed.ly/1/extract?key=\" + this.options.api_key_embedly + \"&url=\" + this.media_id + \"&callback=?\";\n\n\t\t\t// API Call\n\t\t\tTL.getJSON(api_url, function(d) {\n\t\t\t\tself.createMedia(d);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.createCardContent();\n\t\t}\n\t},\n\n\tcreateCardContent: function() {\n\t\t(function(w, d){\n\t\t\tvar id='embedly-platform', n = 'script';\n\t\t\tif (!d.getElementById(id)){\n\t\t\t w.embedly = w.embedly || function() {(w.embedly.q = w.embedly.q || []).push(arguments);};\n\t\t\t var e = d.createElement(n); e.id = id; e.async=1;\n\t\t\t e.src = ('https:' === document.location.protocol ? 'https' : 'http') + '://cdn.embedly.com/widgets/platform.js';\n\t\t\t var s = d.getElementsByTagName(n)[0];\n\t\t\t s.parentNode.insertBefore(e, s);\n\t\t\t}\n\t\t})(window, document);\n\n\t\tvar content = \"<a href=\\\"\" + this.data.url + \"\\\" class=\\\"embedly-card\\\">\" + this.data.url + \"</a>\";\n\t\tthis._setContent(content);\n\n\t},\n\tcreateMedia: function(d) { // this costs API credits...\n\t\tvar content = \"\";\n\n\n\t\tcontent\t\t+=\t\"<h4><a href='\" + this.data.url + \"' target='_blank'>\" + d.title + \"</a></h4>\";\n\t\tif (d.images) {\n\t\t\tif (d.images[0]) {\n\t\t\t\ttrace(d.images[0].url);\n\t\t\t\tcontent\t\t+=\t\"<img src='\" + d.images[0].url + \"' />\";\n\t\t\t}\n\t\t}\n\t\tif (d.favicon_url) {\n\t\t\tcontent\t\t+=\t\"<img class='tl-media-website-icon' src='\" + d.favicon_url + \"' />\";\n\t\t}\n\t\tcontent\t\t+=\t\"<span class='tl-media-website-description'>\" + d.provider_name + \"</span><br/>\";\n\t\tcontent\t\t+=\t\"<p>\" + d.description + \"</p>\";\n\n\t\tthis._setContent(content);\n\t},\n\n\t_setContent: function(content) {\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-website\", this._el.content);\n\t\tthis._el.content_container.className = \"tl-media-content-container tl-media-content-container-text\";\n\t\tthis._el.content_item.innerHTML = content;\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\n\t},\n\n\tupdateMediaDisplay: function() {\n\n\t},\n\n\t_updateMediaDisplay: function() {\n\n\t}\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Wikipedia.js\n********************************************** */\n\n/*\tTL.Media.Wikipedia\n================================================== */\n\nTL.Media.Wikipedia = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tapi_language,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-wikipedia\", this._el.content);\n\t\tthis._el.content_container.className = \"tl-media-content-container tl-media-content-container-text\";\n\n\t\t// Get Media ID\n\t\tthis.media_id\t = this.data.url.split(\"wiki\\/\")[1].split(\"#\")[0].replace(\"_\", \" \");\n\t\tthis.media_id\t = this.media_id.replace(\" \", \"%20\");\n\t\tapi_language\t = this.data.url.split(\"//\")[1].split(\".wikipedia\")[0];\n\n\t\t// API URL\n\t\tapi_url = \"https://\" + api_language + \".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles=\" + this.media_id + \"&exintro=1&format=json&callback=?\";\n\n\t\t// API Call\n\t\tTL.ajax({\n\t\t\ttype: 'GET',\n\t\t\turl: api_url,\n\t\t\tdataType: 'json', //json data type\n\n\t\t\tsuccess: function(d){\n\t\t\t\tself.createMedia(d);\n\t\t\t},\n\t\t\terror:function(xhr, type){\n\t\t\t\tvar error_text = \"\";\n\t\t\t\terror_text += self._(\"wikipedia_load_err\") + \"<br/>\" + self.media_id + \"<br/>\" + type;\n\t\t\t\tself.loadErrorDisplay(error_text);\n\t\t\t}\n\t\t});\n\n\t},\n\n\tcreateMedia: function(d) {\n\t\tvar wiki = \"\";\n\n\t\tif (d.query) {\n\t\t\tvar content = \"\",\n\t\t\t\twiki = {\n\t\t\t\t\tentry: {},\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\ttext: \"\",\n\t\t\t\t\textract: \"\",\n\t\t\t\t\tparagraphs: 1,\n\t\t\t\t\tpage_image: \"\",\n\t\t\t\t\ttext_array: []\n\t\t\t\t};\n\n\t\t\twiki.entry\t\t = TL.Util.getObjectAttributeByIndex(d.query.pages, 0);\n\t\t\twiki.extract\t = wiki.entry.extract;\n\t\t\twiki.title\t\t = wiki.entry.title;\n\t\t\twiki.page_image\t = wiki.entry.thumbnail;\n\n\t\t\tif (wiki.extract.match(\"<p>\")) {\n\t\t\t\twiki.text_array = wiki.extract.split(\"<p>\");\n\t\t\t} else {\n\t\t\t\twiki.text_array.push(wiki.extract);\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < wiki.text_array.length; i++) {\n\t\t\t\tif (i+1 <= wiki.paragraphs && i+1 < wiki.text_array.length) {\n\t\t\t\t\twiki.text\t+= \"<p>\" + wiki.text_array[i+1];\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tcontent\t\t+=\t\"<span class='tl-icon-wikipedia'></span>\";\n\t\t\tcontent\t\t+=\t\"<div class='tl-wikipedia-title'><h4><a href='\" + this.data.url + \"' target='_blank'>\" + wiki.title + \"</a></h4>\";\n\t\t\tcontent\t\t+=\t\"<span class='tl-wikipedia-source'>\" + this._('wikipedia') + \"</span></div>\";\n\n\t\t\tif (wiki.page_image) {\n\t\t\t\t//content \t+= \t\"<img class='tl-wikipedia-pageimage' src='\" + wiki.page_image.source +\"'>\";\n\t\t\t}\n\n\t\t\tcontent\t\t+=\twiki.text;\n\n\t\t\tif (wiki.extract.match(\"REDIRECT\")) {\n\n\t\t\t} else {\n\t\t\t\t// Add to DOM\n\t\t\t\tthis._el.content_item.innerHTML\t= content;\n\t\t\t\t// After Loaded\n\t\t\t\tthis.onLoaded();\n\t\t\t}\n\n\n\t\t}\n\n\t},\n\n\tupdateMediaDisplay: function() {\n\n\t},\n\n\t_updateMediaDisplay: function() {\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Wistia.js\n********************************************** */\n\n/*\tTL.Media.Wistia\n================================================== */\n\nTL.Media.Wistia = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar api_url,\n\t\t\tself = this;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow\", this._el.content);\n\n\t\t// Get Media ID\n\t\tthis.media_id = this.data.url.split(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/medias\\/(.*)/)[3];\n\n\t\t// API URL\n\t\tapi_url = \"https://fast.wistia.com/embed/iframe/\" + this.media_id + \"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8\";\n\n    this.player = TL.Dom.create(\"iframe\", \"\", this._el.content_item);\n\n    // Media Loaded Event\n\t\tthis.player.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\tthis.player.width \t\t= \"100%\";\n\t\tthis.player.height \t\t= \"100%\";\n\t\tthis.player.frameBorder = \"0\";\n\t\tthis.player.src \t\t= api_url;\n\n\t\tthis.player.setAttribute('allowfullscreen', '');\n\t\tthis.player.setAttribute('webkitallowfullscreen', '');\n\t\tthis.player.setAttribute('mozallowfullscreen', '');\n\n\t\t// After Loaded\n\t\tthis.onLoaded();\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\tthis._el.content_item.style.height = TL.Util.ratio.r16_9({w:this._el.content_item.offsetWidth}) + \"px\";\n\t},\n\n\t_stopMedia: function() {\n\t\ttry {\n\t\t\tthis.player.contentWindow.postMessage(JSON.stringify({method: \"pause\"}), \"https://player.vimeo.com\");\n\t\t}\n\t\tcatch(err) {\n\t\t\ttrace(err);\n\t\t}\n\t}\n});\n\n\n/* **********************************************\n     Begin TL.Media.YouTube.js\n********************************************** */\n\n/*\tTL.Media.YouTube\n================================================== */\n\nTL.Media.YouTube = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\tvar self = this,\n\t\t\turl_vars;\n\n\t\tthis.youtube_loaded = false;\n\n\t\t// Create Dom element\n\t\tthis._el.content_item\t= TL.Dom.create(\"div\", \"tl-media-item tl-media-youtube tl-media-shadow\", this._el.content);\n\t\tthis._el.content_item.id = TL.Util.unique_ID(7)\n\n\t\t// URL Vars\n\t\turl_vars = TL.Util.getUrlVars(this.data.url);\n\n\t\t// Get Media ID\n\t\tthis.media_id = {};\n\n\t\tif (this.data.url.match('v=')) {\n\t\t\tthis.media_id.id\t= url_vars[\"v\"];\n\t\t} else if (this.data.url.match('\\/embed\\/')) {\n\t\t\tthis.media_id.id\t= this.data.url.split(\"embed\\/\")[1].split(/[?&]/)[0];\n\t\t} else if (this.data.url.match(/v\\/|v=|youtu\\.be\\//)){\n\t\t\tthis.media_id.id\t= this.data.url.split(/v\\/|v=|youtu\\.be\\//)[1].split(/[?&]/)[0];\n\t\t} else {\n\t\t\ttrace(\"YOUTUBE IN URL BUT NOT A VALID VIDEO\");\n\t\t}\n\n\t\t// Get start second\n\t\tif (this.data.url.match(\"start=\")) {\n\t\t\tthis.media_id.start = parseInt(this.data.url.split(\"start=\")[1], 10);\n\t\t}\n\t\telse if (this.data.url.match(\"t=\")) {\n\t\t\tthis.media_id.start = parseInt(this.data.url.split(\"t=\")[1], 10);\n\t\t}\n\n\t\t//Get end second\n\t\tif (this.data.url.match(\"end=\")) {\n\t\t\tthis.media_id.end = parseInt(this.data.url.split(\"end=\")[1], 10);\n\t\t}\n\n\t\tthis.media_id.hd\t\t= Boolean(typeof(url_vars[\"hd\"]) != 'undefined');\n\n\n\t\t// API Call\n\t\tTL.Load.js('https://www.youtube.com/iframe_api', function() {\n\t\t\tself.createMedia();\n\t\t});\n\n\t},\n\n\t// Update Media Display\n\t_updateMediaDisplay: function() {\n\t\t//this.el.content_item = document.getElementById(this._el.content_item.id);\n\t\tthis._el.content_item.style.height = TL.Util.ratio.r16_9({w:this.options.width}) + \"px\";\n\t\tthis._el.content_item.style.width = this.options.width + \"px\";\n\t},\n\n\t_stopMedia: function() {\n\t\tif (this.youtube_loaded) {\n\t\t\ttry {\n\t\t\t    if(this.player.getPlayerState() == YT.PlayerState.PLAYING) {\n\t\t\t        this.player.pauseVideo();\n\t\t\t    }\n\t\t\t}\n\t\t\tcatch(err) {\n\t\t\t\ttrace(err);\n\t\t\t}\n\n\t\t}\n\t},\n\tcreateMedia: function() {\n\t\tvar self = this;\n\n\t\tclearTimeout(this.timer);\n\n\t\tif(typeof YT != 'undefined' && typeof YT.Player != 'undefined') {\n\t\t\t// Create Player\n\t\t\tthis.player = new YT.Player(this._el.content_item.id, {\n\t\t\t\tplayerVars: {\n\t\t\t\t\tenablejsapi:\t\t1,\n\t\t\t\t\tcolor: \t\t\t\t'white',\n\t\t\t\t\tcontrols: 1, \n\t\t\t\t\tstart:\t\t\t\tthis.media_id.start,\n\t\t\t\t\tend:  \t\t\t\tthis.media_id.end,\n\t\t\t\t\tfs: \t\t\t\t1\n\t\t\t\t},\n\t\t\t\tvideoId: this.media_id.id,\n\t\t\t\tevents: {\n\t\t\t\t\tonReady: \t\t\tfunction() {\n\t\t\t\t\t\tself.onPlayerReady();\n\t\t\t\t\t\t// After Loaded\n\t\t\t\t\t\tself.onLoaded();\n\t\t\t\t\t},\n\t\t\t\t\t'onStateChange': \tself.onStateChange\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.timer = setTimeout(function() {\n\t\t\t\tself.createMedia();\n\t\t\t}, 1000);\n\t\t}\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\tonPlayerReady: function(e) {\n\t\tthis.youtube_loaded = true;\n\t\tthis._el.content_item = document.getElementById(this._el.content_item.id);\n\t\tthis.onMediaLoaded();\n\n\t},\n\n\tonStateChange: function(e) {\n        if(e.data == YT.PlayerState.ENDED) {\n            e.target.seekTo(0);\n            e.target.pauseVideo();\n        }\n\t}\n\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Audio.js\n********************************************** */\n\n/*\tTL.Media.Audio\n\tProduces audio assets.\n\tTakes a data object and populates a dom object\n================================================== */\n\nTL.Media.Audio = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t// Loading Message\n\t\tthis.loadingMessage();\n\n        // Create media?\n        if(!this.options.background) {\n            this.createMedia();\n        }\n\n        // After loaded\n\t\tthis.onLoaded();\n\t},\n\n  createMedia: function() {\n    var self = this,\n        audio_class = \"tl-media-item tl-media-audio tl-media-shadow\";\n\n \t\t// Link\n\t\tif (this.data.link) {\n\t\t\tthis._el.content_link \t\t\t\t= TL.Dom.create(\"a\", \"\", this._el.content);\n\t\t\tthis._el.content_link.href \t\t= this.data.link;\n\t\t\tthis._el.content_link.target \t= \"_blank\";\n\t\t\tthis._el.content_item\t\t\t\t\t= TL.Dom.create(\"audio\", audio_class, this._el.content_link);\n\t\t} else {\n\t\t\tthis._el.content_item\t\t\t\t\t= TL.Dom.create(\"audio\", audio_class, this._el.content);\n\t\t}\n\n\t\tthis._el.content_item.controls = true;\n\t\tthis._el.source_item = TL.Dom.create(\"source\", \"\", this._el.content_item);\n\n\t\t// Media Loaded Event\n\t\tthis._el.content_item.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\tthis._el.source_item.src = this.data.url;\n\t\tthis._el.source_item.type = this._getType(this.data.url, this.data.mediatype.match_str);\n\t\tthis._el.content_item.innerHTML += \"Your browser doesn't support HTML5 audio with \" + this._el.source_item.type;\n  },\n\n\t_updateMediaDisplay: function(layout) {\n\t\tif(TL.Browser.firefox) {\n\t\t\tthis._el.content_item.style.width = \"auto\";\n\t\t}\n\t},\n\n\t_getType: function(url, reg) {\n\t\tvar ext = url.match(reg);\n\t\tvar type = \"audio/\"\n\t\tswitch(ext[1]) {\n\t\t\tcase \"mp3\":\n\t\t\t\ttype += \"mpeg\";\n\t\t\t\tbreak;\n\t\t\tcase \"wav\":\n\t\t\t\ttype += \"wav\";\n\t\t\t\tbreak;\n\t\t\tcase \"m4a\":\n\t\t\t\ttype += \"mp4\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttype = \"audio\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn type\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Media.Video.js\n********************************************** */\n\n/*\tTL.Media.Video\n\tProduces video assets.\n\tTakes a data object and populates a dom object\n================================================== */\n\nTL.Media.Video = TL.Media.extend({\n\n\tincludes: [TL.Events],\n\n\t/*\tLoad the media\n\t================================================== */\n\t_loadMedia: function() {\n\t\t// Loading Message\n\t\tthis.loadingMessage();\n\n        // Create media?\n        if(!this.options.background) {\n            this.createMedia();\n        }\n\n        // After loaded\n\t\tthis.onLoaded();\n\t},\n\n  createMedia: function() {\n    var self = this,\n        video_class = \"tl-media-item tl-media-video tl-media-shadow\";\n\n \t\t// Link\n\t\tif (this.data.link) {\n\t\t\tthis._el.content_link \t\t\t\t= TL.Dom.create(\"a\", \"\", this._el.content);\n\t\t\tthis._el.content_link.href \t\t= this.data.link;\n\t\t\tthis._el.content_link.target \t= \"_blank\";\n\t\t\tthis._el.content_item\t\t\t\t\t= TL.Dom.create(\"video\", video_class, this._el.content_link);\n\t\t} else {\n\t\t\tthis._el.content_item\t\t\t\t\t= TL.Dom.create(\"video\", video_class, this._el.content);\n\t\t}\n\n\t\tthis._el.content_item.controls = true;\n\t\tthis._el.source_item = TL.Dom.create(\"source\", \"\", this._el.content_item);\n\n\t\t// Media Loaded Event\n\t\tthis._el.content_item.addEventListener('load', function(e) {\n\t\t\tself.onMediaLoaded();\n\t\t});\n\n\t\tthis._el.source_item.src = this.data.url;\n\t\tthis._el.source_item.type = this._getType(this.data.url, this.data.mediatype.match_str);\n\t\tthis._el.content_item.innerHTML += \"Your browser doesn't support HTML5 video with \" + this._el.source_item.type;\n  },\n\n\t_updateMediaDisplay: function(layout) {\n\t\tif(TL.Browser.firefox) {\n\t\t\tthis._el.content_item.style.width = \"auto\";\n\t\t}\n\t},\n\n\t_getType: function(url, reg) {\n\t\tvar ext = url.match(reg);\n\t\tvar type = \"video/\"\n\t\tswitch(ext[1]) {\n\t\t\tcase \"mp4\":\n\t\t\t\ttype += \"mp4\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttype = \"video\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn type\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.Slide.js\n********************************************** */\n\n/*\tTL.Slide\n\tCreates a slide. Takes a data object and\n\tpopulates the slide with content.\n================================================== */\n\nTL.Slide = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins, TL.I18NMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options, title_slide) {\n\t\t// DOM Elements\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tscroll_container: {},\n\t\t\tbackground: {},\n\t\t\tcontent_container: {},\n\t\t\tcontent: {}\n\t\t};\n\n\t\t// Components\n\t\tthis._media \t\t= null;\n\t\tthis._mediaclass\t= {};\n\t\tthis._text\t\t\t= {};\n\t\tthis._background_media = null;\n\n\t\t// State\n\t\tthis._state = {\n\t\t\tloaded: \t\tfalse\n\t\t};\n\n\t\tthis.has = {\n\t\t\theadline: \tfalse,\n\t\t\ttext: \t\tfalse,\n\t\t\tmedia: \t\tfalse,\n\t\t\ttitle: \t\tfalse,\n\t\t\tbackground: {\n\t\t\t\timage: false,\n\t\t\t\tcolor: false,\n\t\t\t\tcolor_value :\"\"\n\t\t\t}\n\t\t}\n\n\t\tthis.has.title = title_slide;\n\n\t\t// Data\n\t\tthis.data = {\n\t\t\tunique_id: \t\t\t\tnull,\n\t\t\tbackground: \t\t\tnull,\n\t\t\tstart_date: \t\t\tnull,\n\t\t\tend_date: \t\t\t\tnull,\n\t\t\tlocation: \t\t\t\tnull,\n\t\t\ttext: \t\t\t\t\tnull,\n\t\t\tmedia: \t\t\t\t\tnull,\n            autolink: true\n\t\t};\n\n\t\t// Options\n\t\tthis.options = {\n\t\t\t// animation\n\t\t\tduration: \t\t\t1000,\n\t\t\tslide_padding_lr: \t40,\n\t\t\tease: \t\t\t\tTL.Ease.easeInSpline,\n\t\t\twidth: \t\t\t\t600,\n\t\t\theight: \t\t\t600,\n\t\t\tskinny_size: \t\t650,\n\t\t\tmedia_name: \t\t\"\"\n\t\t};\n\n\t\t// Actively Displaying\n\t\tthis.active = false;\n\n\t\t// Animation Object\n\t\tthis.animator = {};\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\n\n\t},\n\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function() {\n\t\tthis.animator = TL.Animate(this._el.slider_container, {\n\t\t\tleft: \t\t-(this._el.container.offsetWidth * n) + \"px\",\n\t\t\tduration: \tthis.options.duration,\n\t\t\teasing: \tthis.options.ease\n\t\t});\n\t},\n\n\thide: function() {\n\n\t},\n\n\tsetActive: function(is_active) {\n\t\tthis.active = is_active;\n\n\t\tif (this.active) {\n\t\t\tif (this.data.background) {\n\t\t\t\tthis.fire(\"background_change\", this.has.background);\n\t\t\t}\n\t\t\tthis.loadMedia();\n\t\t} else {\n\t\t\tthis.stopMedia();\n\t\t}\n\t},\n\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t\t//this.onAdd();\n\t},\n\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t},\n\n\tupdateDisplay: function(w, h, l) {\n\t\tthis._updateDisplay(w, h, l);\n\t},\n\n\tloadMedia: function() {\n        var self = this;\n\n\t\tif (this._media && !this._state.loaded) {\n\t\t\tthis._media.loadMedia();\n\t\t\tthis._state.loaded = true;\n\t\t}\n\n\t\tif(this._background_media && !this._background_media._state.loaded) {\n\t\t    this._background_media.on(\"loaded\", function() {\n\t\t        self._updateBackgroundDisplay();\n\t\t    });\n\t\t    this._background_media.loadMedia();\n\t\t}\n\t},\n\n\tstopMedia: function() {\n\t\tif (this._media && this._state.loaded) {\n\t\t\tthis._media.stopMedia();\n\t\t}\n\t},\n\n\tgetBackground: function() {\n\t\treturn this.has.background;\n\t},\n\n\tscrollToTop: function() {\n\t\tthis._el.container.scrollTop = 0;\n\t},\n\n\tgetFormattedDate: function() {\n\n\t\tif (TL.Util.trim(this.data.display_date).length > 0) {\n\t\t\treturn this.data.display_date;\n\t\t}\n\t\tvar date_text = \"\";\n\n\t\tif(!this.has.title) {\n            if (this.data.end_date) {\n                date_text = \" &mdash; \" + this.data.end_date.getDisplayDate(this.getLanguage());\n            }\n            if (this.data.start_date) {\n                date_text = this.data.start_date.getDisplayDate(this.getLanguage()) + date_text;\n            }\n        }\n\t\treturn date_text;\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t// Create Layout\n\t\tthis._el.container \t\t\t\t= TL.Dom.create(\"div\", \"tl-slide\");\n\n\t\tif (this.has.title) {\n\t\t\tthis._el.container.className = \"tl-slide tl-slide-titleslide\";\n\t\t}\n\n\t\tif (this.data.unique_id) {\n\t\t\tthis._el.container.id \t\t= this.data.unique_id;\n\t\t}\n\t\tthis._el.scroll_container \t\t= TL.Dom.create(\"div\", \"tl-slide-scrollable-container\", this._el.container);\n\t\tthis._el.content_container\t\t= TL.Dom.create(\"div\", \"tl-slide-content-container\", this._el.scroll_container);\n\t\tthis._el.content\t\t\t\t= TL.Dom.create(\"div\", \"tl-slide-content\", this._el.content_container);\n\t\tthis._el.background\t\t\t\t= TL.Dom.create(\"div\", \"tl-slide-background\", this._el.container);\n\t\t// Style Slide Background\n\t\tif (this.data.background) {\n\t\t\tif (this.data.background.url) {\n\t\t    var media_type = TL.MediaType(this.data.background, true);\n\t\t    if(media_type) {\n          this._background_media = new media_type.cls(this.data.background, {background: 1});\n\n          this.has.background.image \t\t\t\t\t= true;\n          this._el.container.className \t\t\t\t+= ' tl-full-image-background';\n          this.has.background.color_value \t\t= \"#000\";\n          this._el.background.style.display \t= \"block\";\n        }\n\t\t\t}\n\t\t\tif (this.data.background.color) {\n\t\t\t\tthis.has.background.color \t\t\t\t\t= true;\n\t\t\t\tthis._el.container.className \t\t\t\t+= ' tl-full-color-background';\n\t\t\t\tthis.has.background.color_value \t\t\t= this.data.background.color;\n\t\t\t\t//this._el.container.style.backgroundColor = this.data.background.color;\n\t\t\t\t//this._el.background.style.backgroundColor \t= this.data.background.color;\n\t\t\t\t//this._el.background.style.display \t\t\t= \"block\";\n\t\t\t}\n\t\t\tif (this.data.background.text_background) {\n\t\t\t\tthis._el.container.className \t\t\t\t+= ' tl-text-background';\n\t\t\t}\n\n\t\t}\n\n\n\n\t\t// Determine Assets for layout and loading\n\t\tif (this.data.media && this.data.media.url && this.data.media.url != \"\") {\n\t\t\tthis.has.media = true;\n\t\t}\n\t\tif (this.data.text && this.data.text.text) {\n\t\t\tthis.has.text = true;\n\t\t}\n\t\tif (this.data.text && this.data.text.headline) {\n\t\t\tthis.has.headline = true;\n\t\t}\n\n\t\t// Create Media\n\t\tif (this.has.media) {\n\t\t\t// Determine the media type\n\t\t\tthis.data.media.mediatype = TL.MediaType(this.data.media);\n\t\t\tthis.options.media_name \t= this.data.media.mediatype.name;\n\t\t\tthis.options.media_type \t= this.data.media.mediatype.type;\n      this.options.autolink \t\t= this.data.autolink;\n\n\t\t\t// Create a media object using the matched class name\n\t\t\tthis._media = new this.data.media.mediatype.cls(this.data.media, this.options);\n\t\t}\n\n\t\t// Create Text\n\t\tif (this.has.text || this.has.headline) {\n\t\t\tthis._text = new TL.Media.Text(this.data.text, {title:this.has.title,language: this.options.language, autolink: this.data.autolink });\n\t\t\tthis._text.addDateText(this.getFormattedDate());\n\t\t}\n\n\n\n\t\t// Add to DOM\n\t\tif (!this.has.text && !this.has.headline && this.has.media) {\n\t\t\tTL.DomUtil.addClass(this._el.container, 'tl-slide-media-only');\n\t\t\tthis._media.addTo(this._el.content);\n\t\t} else if (this.has.headline && this.has.media && !this.has.text) {\n\t\t\tTL.DomUtil.addClass(this._el.container, 'tl-slide-media-only');\n\t\t\tthis._text.addTo(this._el.content);\n\t\t\tthis._media.addTo(this._el.content);\n\t\t} else if (this.has.text && this.has.media) {\n\t\t\tthis._media.addTo(this._el.content);\n\t\t\tthis._text.addTo(this._el.content);\n\t\t} else if (this.has.text || this.has.headline) {\n\t\t\tTL.DomUtil.addClass(this._el.container, 'tl-slide-text-only');\n\t\t\tthis._text.addTo(this._el.content);\n\t\t}\n\n\t\t// Fire event that the slide is loaded\n\t\tthis.onLoaded();\n\n\t},\n\n\t_initEvents: function() {\n\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(width, height, layout) {\n\t\tvar content_width,\n\t\t\tcontent_padding_left = this.options.slide_padding_lr,\n\t\t\tcontent_padding_right = this.options.slide_padding_lr;\n\n\t\tif (width) {\n\t\t\tthis.options.width \t\t\t\t\t= width;\n\t\t} else {\n\t\t\tthis.options.width \t\t\t\t\t= this._el.container.offsetWidth;\n\t\t}\n\n\t\tcontent_width = this.options.width - (this.options.slide_padding_lr * 2);\n\n\t\tif(TL.Browser.mobile && (this.options.width <= this.options.skinny_size)) {\n\t\t\tcontent_padding_left = 0;\n\t\t\tcontent_padding_right = 0;\n\t\t\tcontent_width = this.options.width;\n\t\t} else if (layout == \"landscape\") {\n\n\t\t} else if (this.options.width <= this.options.skinny_size) {\n\t\t\tcontent_padding_left = 50;\n\t\t\tcontent_padding_right = 50;\n\t\t\tcontent_width = this.options.width - content_padding_left - content_padding_right;\n\t\t} else {\n\n\t\t}\n\n\t\tthis._el.content.style.paddingLeft \t= content_padding_left + \"px\";\n\t\tthis._el.content.style.paddingRight = content_padding_right + \"px\";\n\t\tthis._el.content.style.width\t\t= content_width + \"px\";\n\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t\t//this._el.scroll_container.style.height\t\t= this.options.height + \"px\";\n\n\t\t} else {\n\t\t\tthis.options.height = this._el.container.offsetHeight;\n\t\t}\n\n\t\tif (this._media) {\n\n\t\t\tif (!this.has.text && this.has.headline) {\n\t\t\t\tthis._media.updateDisplay(content_width, (this.options.height - this._text.headlineHeight()), layout);\n\t\t\t} else if (!this.has.text && !this.has.headline) {\n\t\t\t\tthis._media.updateDisplay(content_width, this.options.height, layout);\n\t\t\t} else if (this.options.width <= this.options.skinny_size) {\n\t\t\t\tthis._media.updateDisplay(content_width, this.options.height, layout);\n\t\t\t} else {\n\t\t\t\tthis._media.updateDisplay(content_width/2, this.options.height, layout);\n\t\t\t}\n\t\t}\n\n\t\tthis._updateBackgroundDisplay();\n\t},\n\n\t_updateBackgroundDisplay: function() {\n\t    if(this._background_media && this._background_media._state.loaded) {\n\t        this._el.background.style.backgroundImage \t= \"url('\" + this._background_media.getImageURL(this.options.width, this.options.height) + \"')\";\n\t    }\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.SlideNav.js\n********************************************** */\n\n/*\tTL.SlideNav\n\tencapsulate DOM display/events for the \n\t'next' and 'previous' buttons on a slide.\n================================================== */\n// TODO null out data\n\nTL.SlideNav = TL.Class.extend({\n\t\n\tincludes: [TL.Events, TL.DomMixins],\n\t\n\t_el: {},\n\t\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options, add_to_container) {\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tcontent_container: {},\n\t\t\ticon: {},\n\t\t\ttitle: {},\n\t\t\tdescription: {}\n\t\t};\n\t\n\t\t// Media Type\n\t\tthis.mediatype = {};\n\t\t\n\t\t// Data\n\t\tthis.data = {\n\t\t\ttitle: \"Navigation\",\n\t\t\tdescription: \"Description\",\n\t\t\tdate: \"Date\"\n\t\t};\n\t\n\t\t//Options\n\t\tthis.options = {\n\t\t\tdirection: \t\t\t\"previous\"\n\t\t};\n\t\n\t\tthis.animator = null;\n\t\t\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\t\t\n\t\t\n\t\tthis._el.container = TL.Dom.create(\"div\", \"tl-slidenav-\" + this.options.direction);\n\t\t\n\t\tif (TL.Browser.mobile) {\n\t\t\tthis._el.container.setAttribute(\"ontouchstart\",\" \");\n\t\t}\n\t\t\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t\t\n\t\tif (add_to_container) {\n\t\t\tadd_to_container.appendChild(this._el.container);\n\t\t};\n\t\t\n\t},\n\t\n\t/*\tUpdate Content\n\t================================================== */\n\tupdate: function(slide) {\n\t\tvar d = {\n\t\t\ttitle: \"\",\n\t\t\tdescription: \"\",\n\t\t\tdate: slide.getFormattedDate()\n\t\t};\n\t\t\n\t\tif (slide.data.text) {\n\t\t\tif (slide.data.text.headline) {\n\t\t\t\td.title = slide.data.text.headline;\n\t\t\t}\n\t\t}\n\n\t\tthis._update(d);\n\t},\n\t\n\t/*\tColor\n\t================================================== */\n\tsetColor: function(inverted) {\n\t\tif (inverted) {\n\t\t\tthis._el.content_container.className = 'tl-slidenav-content-container tl-slidenav-inverted';\n\t\t} else {\n\t\t\tthis._el.content_container.className = 'tl-slidenav-content-container';\n\t\t}\n\t},\n\t\n\t/*\tEvents\n\t================================================== */\n\t_onMouseClick: function() {\n\t\tthis.fire(\"clicked\", this.options);\n\t},\n\t\n\t/*\tPrivate Methods\n\t================================================== */\n\t_update: function(d) {\n\t\t// update data\n\t\tthis.data = TL.Util.mergeData(this.data, d);\n\t\t\n\t\t// Title\n\t\tthis._el.title.innerHTML = TL.Util.unlinkify(this.data.title);\n\t\t\n\t\t// Date\n\t\tthis._el.description.innerHTML\t= TL.Util.unlinkify(this.data.date);\n\t},\n\t\n\t_initLayout: function () {\n\t\t\n\t\t// Create Layout\n\t\tthis._el.content_container\t\t\t= TL.Dom.create(\"div\", \"tl-slidenav-content-container\", this._el.container);\n\t\tthis._el.icon\t\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-slidenav-icon\", this._el.content_container);\n\t\tthis._el.title\t\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-slidenav-title\", this._el.content_container);\n\t\tthis._el.description\t\t\t\t= TL.Dom.create(\"div\", \"tl-slidenav-description\", this._el.content_container);\n\t\t\n\t\tthis._el.icon.innerHTML\t\t\t\t= \"&nbsp;\"\n\t\t\n\t\tthis._update();\n\t},\n\t\n\t_initEvents: function () {\n\t\tTL.DomEvent.addListener(this._el.container, 'click', this._onMouseClick, this);\n\t}\n\t\n\t\n});\n\n/* **********************************************\n     Begin TL.StorySlider.js\n********************************************** */\n\n/*\tStorySlider\n\tis the central class of the API - it is used to create a StorySlider\n\n\tEvents:\n\tnav_next\n\tnav_previous\n\tslideDisplayUpdate\n\tloaded\n\tslideAdded\n\tslideLoaded\n\tslideRemoved\n\n\n================================================== */\n\nTL.StorySlider = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.I18NMixins],\n\n\t/*\tPrivate Methods\n\t================================================== */\n\tinitialize: function (elem, data, options, init) {\n\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tbackground: {},\n\t\t\tslider_container_mask: {},\n\t\t\tslider_container: {},\n\t\t\tslider_item_container: {}\n\t\t};\n\n\t\tthis._nav = {};\n\t\tthis._nav.previous = {};\n\t\tthis._nav.next = {};\n\n\t\t// Slide Spacing\n\t\tthis.slide_spacing = 0;\n\n\t\t// Slides Array\n\t\tthis._slides = [];\n\n\t\t// Swipe Object\n\t\tthis._swipable;\n\n\t\t// Preload Timer\n\t\tthis.preloadTimer;\n\n\t\t// Message\n\t\tthis._message;\n\n\t\t// Current Slide\n\t\tthis.current_id = '';\n\n\t\t// Data Object\n\t\tthis.data = {};\n\n\t\tthis.options = {\n\t\t\tid: \t\t\t\t\t\"\",\n\t\t\tlayout: \t\t\t\t\"portrait\",\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600,\n\t\t\tdefault_bg_color: \t\t{r:255, g:255, b:255},\n\t\t\tslide_padding_lr: \t\t40, \t\t\t// padding on slide of slide\n\t\t\tstart_at_slide: \t\t1,\n\t\t\tslide_default_fade: \t\"0%\", \t\t\t// landscape fade\n\t\t\t// animation\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInOutQuint,\n\t\t\t// interaction\n\t\t\tdragging: \t\t\t\ttrue,\n\t\t\ttrackResize: \t\t\ttrue\n\t\t};\n\n\t\t// Main element ID\n\t\tif (typeof elem === 'object') {\n\t\t\tthis._el.container = elem;\n\t\t\tthis.options.id = TL.Util.unique_ID(6, \"tl\");\n\t\t} else {\n\t\t\tthis.options.id = elem;\n\t\t\tthis._el.container = TL.Dom.get(elem);\n\t\t}\n\n\t\tif (!this._el.container.id) {\n\t\t\tthis._el.container.id = this.options.id;\n\t\t}\n\n\t\t// Animation Object\n\t\tthis.animator = null;\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\n\t\tif (init) {\n\t\t\tthis.init();\n\t\t}\n\t},\n\n\tinit: function() {\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t\tthis._initData();\n\t\tthis._updateDisplay();\n\n\t\t// Go to initial slide\n\t\tthis.goTo(this.options.start_at_slide);\n\n\t\tthis._onLoaded();\n\t},\n\n\t/* Slides\n\t================================================== */\n\t_addSlide:function(slide) {\n\t\tslide.addTo(this._el.slider_item_container);\n\t\tslide.on('added', this._onSlideAdded, this);\n\t\tslide.on('background_change', this._onBackgroundChange, this);\n\t},\n\n\t_createSlide: function(d, title_slide, n) {\n\t\tvar slide = new TL.Slide(d, this.options, title_slide);\n\t\tthis._addSlide(slide);\n\t\tif(n < 0) {\n\t\t    this._slides.push(slide);\n\t\t} else {\n\t\t    this._slides.splice(n, 0, slide);\n\t\t}\n\t},\n\n\t_createSlides: function(array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tif (array[i].unique_id == \"\") {\n\t\t\t\tarray[i].unique_id = TL.Util.unique_ID(6, \"tl-slide\");\n\t\t\t}\n            this._createSlide(array[i], false, -1);\n\t\t}\n\t},\n\n\t_removeSlide: function(slide) {\n\t\tslide.removeFrom(this._el.slider_item_container);\n\t\tslide.off('added', this._onSlideRemoved, this);\n\t\tslide.off('background_change', this._onBackgroundChange);\n\t},\n\n\t_destroySlide: function(n) {\n\t\tthis._removeSlide(this._slides[n]);\n\t\tthis._slides.splice(n, 1);\n\t},\n\n    _findSlideIndex: function(n) {\n        var _n = n;\n\t\tif (typeof n == 'string' || n instanceof String) {\n\t\t\t_n = TL.Util.findArrayNumberByUniqueID(n, this._slides, \"unique_id\");\n\t\t}\n\t\treturn _n;\n    },\n\n\t/*\tPublic\n\t================================================== */\n\tupdateDisplay: function(w, h, a, l) {\n\t\tthis._updateDisplay(w, h, a, l);\n\t},\n\n\t// Create a slide\n\tcreateSlide: function(d, n) {\n\t\tthis._createSlide(d, false, n);\n\t},\n\n\t// Create Many Slides from an array\n\tcreateSlides: function(array) {\n\t\tthis._createSlides(array);\n\t},\n\n\t// Destroy slide by index\n\tdestroySlide: function(n) {\n\t    this._destroySlide(n);\n\t},\n\n\t// Destroy slide by id\n\tdestroySlideId: function(id) {\n\t    this.destroySlide(this._findSlideIndex(id));\n\t},\n\n\t/*\tNavigation\n\t================================================== */\n\tgoTo: function(n, fast, displayupdate) {\n\t\tn = parseInt(n);\n\t\tif (isNaN(n)) n = 0;\n\n\t\tvar self = this;\n\n\t\tthis.changeBackground({color_value:\"\", image:false});\n\n\t\t// Clear Preloader Timer\n\t\tif (this.preloadTimer) {\n\t\t\tclearTimeout(this.preloadTimer);\n\t\t}\n\n\t\t// Set Slide Active State\n\t\tfor (var i = 0; i < this._slides.length; i++) {\n\t\t\tthis._slides[i].setActive(false);\n\t\t}\n\n\t\tif (n < this._slides.length && n >= 0) {\n\t\t\tthis.current_id = this._slides[n].data.unique_id;\n\n\t\t\t// Stop animation\n\t\t\tif (this.animator) {\n\t\t\t\tthis.animator.stop();\n\t\t\t}\n\t\t\tif (this._swipable) {\n\t\t\t\tthis._swipable.stopMomentum();\n\t\t\t}\n\n\t\t\tif (fast) {\n\t\t\t\tthis._el.slider_container.style.left = -(this.slide_spacing * n) + \"px\";\n\t\t\t\tthis._onSlideChange(displayupdate);\n\t\t\t} else {\n\t\t\t\tthis.animator = TL.Animate(this._el.slider_container, {\n\t\t\t\t\tleft: \t\t-(this.slide_spacing * n) + \"px\",\n\t\t\t\t\tduration: \tthis.options.duration,\n\t\t\t\t\teasing: \tthis.options.ease,\n\t\t\t\t\tcomplete: \tthis._onSlideChange(displayupdate)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set Slide Active State\n\t\t\tthis._slides[n].setActive(true);\n\n\t\t\t// Update Navigation and Info\n\t\t\tif (this._slides[n + 1]) {\n\t\t\t\tthis.showNav(this._nav.next, true);\n\t\t\t\tthis._nav.next.update(this._slides[n + 1]);\n\t\t\t} else {\n\t\t\t\tthis.showNav(this._nav.next, false);\n\t\t\t}\n\t\t\tif (this._slides[n - 1]) {\n\t\t\t\tthis.showNav(this._nav.previous, true);\n\t\t\t\tthis._nav.previous.update(this._slides[n - 1]);\n\t\t\t} else {\n\t\t\t\tthis.showNav(this._nav.previous, false);\n\t\t\t}\n\n\t\t\t// Preload Slides\n\t\t\tthis.preloadTimer = setTimeout(function() {\n\t\t\t\tself.preloadSlides(n);\n\t\t\t}, this.options.duration);\n\t\t}\n\t},\n\n\tgoToId: function(id, fast, displayupdate) {\n\t\tthis.goTo(this._findSlideIndex(id), fast, displayupdate);\n\t},\n\n\tpreloadSlides: function(n) {\n\t\tif (this._slides[n + 1]) {\n\t\t\tthis._slides[n + 1].loadMedia();\n\t\t\tthis._slides[n + 1].scrollToTop();\n\t\t}\n\t\tif (this._slides[n + 2]) {\n\t\t\tthis._slides[n + 2].loadMedia();\n\t\t\tthis._slides[n + 2].scrollToTop();\n\t\t}\n\t\tif (this._slides[n - 1]) {\n\t\t\tthis._slides[n - 1].loadMedia();\n\t\t\tthis._slides[n - 1].scrollToTop();\n\t\t}\n\t\tif (this._slides[n - 2]) {\n\t\t\tthis._slides[n - 2].loadMedia();\n\t\t\tthis._slides[n - 2].scrollToTop();\n\t\t}\n\t},\n\n\tnext: function() {\n\t    var n = this._findSlideIndex(this.current_id);\n\t\tif ((n + 1) < (this._slides.length)) {\n\t\t\tthis.goTo(n + 1);\n\t\t} else {\n\t\t\tthis.goTo(n);\n\t\t}\n\t},\n\n\tprevious: function() {\n\t    var n = this._findSlideIndex(this.current_id);\n\t\tif (n - 1 >= 0) {\n\t\t\tthis.goTo(n - 1);\n\t\t} else {\n\t\t\tthis.goTo(n);\n\t\t}\n\t},\n\n\tshowNav: function(nav_obj, show) {\n\n\t\tif (this.options.width <= 500 && TL.Browser.mobile) {\n\n\t\t} else {\n\t\t\tif (show) {\n\t\t\t\tnav_obj.show();\n\t\t\t} else {\n\t\t\t\tnav_obj.hide();\n\t\t\t}\n\n\t\t}\n\t},\n\n\n\n\tchangeBackground: function(bg) {\n\t\tvar bg_color = {r:256, g:256, b:256},\n\t\t\tbg_color_rgb;\n\n\t\tif (bg.color_value && bg.color_value != \"\") {\n\t\t\tbg_color = TL.Util.hexToRgb(bg.color_value);\n\t\t\tif (!bg_color) {\n\t\t\t\ttrace(\"Invalid color value \" + bg.color_value);\n\t\t\t\tbg_color = this.options.default_bg_color;\n\t\t\t}\n\t\t} else {\n\t\t\tbg_color = this.options.default_bg_color;\n\t\t\tbg.color_value = \"rgb(\" + bg_color.r + \" , \" + bg_color.g + \", \" + bg_color.b + \")\";\n\t\t}\n\n\t\tbg_color_rgb \t= bg_color.r + \",\" + bg_color.g + \",\" + bg_color.b;\n\t\tthis._el.background.style.backgroundImage = \"none\";\n\n\n\t\tif (bg.color_value) {\n\t\t\tthis._el.background.style.backgroundColor = bg.color_value;\n\t\t} else {\n\t\t\tthis._el.background.style.backgroundColor = \"transparent\";\n\t\t}\n\n\t\tif (bg_color.r < 255 || bg_color.g < 255 || bg_color.b < 255 || bg.image) {\n\t\t\tthis._nav.next.setColor(true);\n\t\t\tthis._nav.previous.setColor(true);\n\t\t} else {\n\t\t\tthis._nav.next.setColor(false);\n\t\t\tthis._nav.previous.setColor(false);\n\t\t}\n\t},\n\t/*\tPrivate Methods\n\t================================================== */\n\n\t// Update Display\n\t_updateDisplay: function(width, height, animate, layout) {\n\t\tvar nav_pos, _layout;\n\n\t\tif(typeof layout === 'undefined'){\n\t\t\t_layout = this.options.layout;\n\t\t} else {\n\t\t\t_layout = layout;\n\t\t}\n\n\t\tthis.options.layout = _layout;\n\n\t\tthis.slide_spacing = this.options.width*2;\n\n\t\tif (width) {\n\t\t\tthis.options.width = width;\n\t\t} else {\n\t\t\tthis.options.width = this._el.container.offsetWidth;\n\t\t}\n\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t} else {\n\t\t\tthis.options.height = this._el.container.offsetHeight;\n\t\t}\n\n\t\t//this._el.container.style.height = this.options.height;\n\n\t\t// position navigation\n\t\tnav_pos = (this.options.height/2);\n\t\tthis._nav.next.setPosition({top:nav_pos});\n\t\tthis._nav.previous.setPosition({top:nav_pos});\n\n\n\t\t// Position slides\n\t\tfor (var i = 0; i < this._slides.length; i++) {\n\t\t\tthis._slides[i].updateDisplay(this.options.width, this.options.height, _layout);\n\t\t\tthis._slides[i].setPosition({left:(this.slide_spacing * i), top:0});\n\n\t\t};\n\n\t\t// Go to the current slide\n\t\tthis.goToId(this.current_id, true, true);\n\t},\n\n\t// Reposition and redraw slides\n    _updateDrawSlides: function() {\n\t    var _layout = this.options.layout;\n\n\t\tfor (var i = 0; i < this._slides.length; i++) {\n\t\t\tthis._slides[i].updateDisplay(this.options.width, this.options.height, _layout);\n\t\t\tthis._slides[i].setPosition({left:(this.slide_spacing * i), top:0});\n\t\t};\n\n\t\tthis.goToId(this.current_id, true, false);\n\t},\n\n\n\t/*\tInit\n\t================================================== */\n\t_initLayout: function () {\n\n\t\tTL.DomUtil.addClass(this._el.container, 'tl-storyslider');\n\n\t\t// Create Layout\n\t\tthis._el.slider_container_mask\t\t= TL.Dom.create('div', 'tl-slider-container-mask', this._el.container);\n\t\tthis._el.background \t\t\t\t= TL.Dom.create('div', 'tl-slider-background tl-animate', this._el.container);\n\t\tthis._el.slider_container\t\t\t= TL.Dom.create('div', 'tl-slider-container tlanimate', this._el.slider_container_mask);\n\t\tthis._el.slider_item_container\t\t= TL.Dom.create('div', 'tl-slider-item-container', this._el.slider_container);\n\n\n\t\t// Update Size\n\t\tthis.options.width = this._el.container.offsetWidth;\n\t\tthis.options.height = this._el.container.offsetHeight;\n\n\t\t// Create Navigation\n\t\tthis._nav.previous = new TL.SlideNav({title: \"Previous\", description: \"description\"}, {direction:\"previous\"});\n\t\tthis._nav.next = new TL.SlideNav({title: \"Next\",description: \"description\"}, {direction:\"next\"});\n\n\t\t// add the navigation to the dom\n\t\tthis._nav.next.addTo(this._el.container);\n\t\tthis._nav.previous.addTo(this._el.container);\n\n\n\n\t\tthis._el.slider_container.style.left=\"0px\";\n\n\t\tif (TL.Browser.touch) {\n\t\t\t//this._el.slider_touch_mask = TL.Dom.create('div', 'tl-slider-touch-mask', this._el.slider_container_mask);\n\t\t\tthis._swipable = new TL.Swipable(this._el.slider_container_mask, this._el.slider_container, {\n\t\t\t\tenable: {x:true, y:false},\n\t\t\t\tsnap: \ttrue\n\t\t\t});\n\t\t\tthis._swipable.enable();\n\n\t\t\t// Message\n\t\t\tthis._message = new TL.Message({}, {\n\t\t\t\tmessage_class: \t\t\"tl-message-full\",\n\t\t\t\tmessage_icon_class: \"tl-icon-swipe-left\"\n\t\t\t});\n\t\t\tthis._message.updateMessage(this._(\"swipe_to_navigate\"));\n\t\t\tthis._message.addTo(this._el.container);\n\t\t}\n\n\t},\n\n\t_initEvents: function () {\n\t\tthis._nav.next.on('clicked', this._onNavigation, this);\n\t\tthis._nav.previous.on('clicked', this._onNavigation, this);\n\n\t\tif (this._message) {\n\t\t\tthis._message.on('clicked', this._onMessageClick, this);\n\t\t}\n\n\t\tif (this._swipable) {\n\t\t\tthis._swipable.on('swipe_left', this._onNavigation, this);\n\t\t\tthis._swipable.on('swipe_right', this._onNavigation, this);\n\t\t\tthis._swipable.on('swipe_nodirection', this._onSwipeNoDirection, this);\n\t\t}\n\n\n\t},\n\n\t_initData: function() {\n\t    if(this.data.title) {\n\t        this._createSlide(this.data.title, true, -1);\n\t    }\n        this._createSlides(this.data.events);\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\t_onBackgroundChange: function(e) {\n\t    var n = this._findSlideIndex(this.current_id);\n\t\tvar slide_background = this._slides[n].getBackground();\n\t\tthis.changeBackground(e);\n\t\tthis.fire(\"colorchange\", slide_background);\n\t},\n\n\t_onMessageClick: function(e) {\n\t\tthis._message.hide();\n\t},\n\n\t_onSwipeNoDirection: function(e) {\n\t\tthis.goToId(this.current_id);\n\t},\n\n\t_onNavigation: function(e) {\n\n\t\tif (e.direction == \"next\" || e.direction == \"left\") {\n\t\t\tthis.next();\n\t\t} else if (e.direction == \"previous\" || e.direction == \"right\") {\n\t\t\tthis.previous();\n\t\t}\n\t\tthis.fire(\"nav_\" + e.direction, this.data);\n\t},\n\n\t_onSlideAdded: function(e) {\n\t\ttrace(\"slideadded\")\n\t\tthis.fire(\"slideAdded\", this.data);\n\t},\n\n\t_onSlideRemoved: function(e) {\n\t\tthis.fire(\"slideRemoved\", this.data);\n\t},\n\n\t_onSlideChange: function(displayupdate) {\n\t\tif (!displayupdate) {\n\t\t\tthis.fire(\"change\", {unique_id: this.current_id});\n\t\t}\n\t},\n\n\t_onMouseClick: function(e) {\n\n\t},\n\n\t_fireMouseEvent: function (e) {\n\t\tif (!this._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = e.type;\n\t\ttype = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));\n\n\t\tif (!this.hasEventListeners(type)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (type === 'contextmenu') {\n\t\t\tTL.DomEvent.preventDefault(e);\n\t\t}\n\n\t\tthis.fire(type, {\n\t\t\tlatlng: \"something\", //this.mouseEventToLatLng(e),\n\t\t\tlayerPoint: \"something else\" //this.mouseEventToLayerPoint(e)\n\t\t});\n\t},\n\n\t_onLoaded: function() {\n\t\tthis.fire(\"loaded\", this.data);\n\t}\n\n\n});\n\n\n/* **********************************************\n     Begin TL.TimeNav.js\n********************************************** */\n\n/*\tTL.TimeNav\n\n================================================== */\n\nTL.TimeNav = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function (elem, timeline_config, options, init) {\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tparent: {},\n\t\t\tcontainer: {},\n\t\t\tslider: {},\n\t\t\tslider_background: {},\n\t\t\tline: {},\n\t\t\tmarker_container_mask: {},\n\t\t\tmarker_container: {},\n\t\t\tmarker_item_container: {},\n\t\t\ttimeaxis: {},\n\t\t\ttimeaxis_background: {},\n\t\t\tattribution: {}\n\t\t};\n\n\t\tthis.collapsed = false;\n\n\t\tif (typeof elem === 'object') {\n\t\t\tthis._el.container = elem;\n\t\t} else {\n\t\t\tthis._el.container = TL.Dom.get(elem);\n\t\t}\n\n\t\tthis.config = timeline_config;\n\n\t\t//Options\n\t\tthis.options = {\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600,\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInOutQuint,\n\t\t\thas_groups: \t\t\tfalse,\n\t\t\toptimal_tick_width: \t50,\n\t\t\tscale_factor: \t\t\t2, \t\t\t\t// How many screen widths wide should the timeline be\n\t\t\tmarker_padding: \t\t5,\n\t\t\ttimenav_height_min: \t150, \t\t\t// Minimum timenav height\n\t\t\tmarker_height_min: \t\t30, \t\t\t// Minimum Marker Height\n\t\t\tmarker_width_min: \t\t100, \t\t\t// Minimum Marker Width\n\t\t\tzoom_sequence:          [0.5, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89] // Array of Fibonacci numbers for TimeNav zoom levels http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibtable.html\n\t\t};\n\n\t\t// Animation\n\t\tthis.animator = null;\n\n\t\t// Ready state\n\t\tthis.ready = false;\n\n\t\t// Markers Array\n\t\tthis._markers = [];\n\n\t\t// Eras Array\n\t\tthis._eras = [];\n\t\tthis.has_eras = false;\n\n\t\t// Groups Array\n\t\tthis._groups = [];\n\n\t\t// Row Height\n\t\tthis._calculated_row_height = 100;\n\n\t\t// Current Marker\n\t\tthis.current_id = \"\";\n\n\t\t// TimeScale\n\t\tthis.timescale = {};\n\n\t\t// TimeAxis\n\t\tthis.timeaxis = {};\n\t\tthis.axishelper = {};\n\n\t\t// Max Rows\n\t\tthis.max_rows = 6;\n\n\t\t// Animate CSS\n\t\tthis.animate_css = false;\n\n\t\t// Swipe Object\n\t\tthis._swipable;\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\n\t\tif (init) {\n\t\t\tthis.init();\n\t\t}\n\t},\n\n\tinit: function() {\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t\tthis._initData();\n\t\tthis._updateDisplay();\n\n\t\tthis._onLoaded();\n\t},\n\n\t/*\tPublic\n\t================================================== */\n\tpositionMarkers: function() {\n\t\tthis._positionMarkers();\n\t},\n\n\t/*\tUpdate Display\n\t================================================== */\n\tupdateDisplay: function(w, h, a, l) {\n\t\tthis._updateDisplay(w, h, a, l);\n\t},\n\n\n\t/*\tTimeScale\n\t================================================== */\n\t_getTimeScale: function() {\n\t\t/* maybe the establishing config values (marker_height_min and max_rows) should be\n\t\tseparated from making a TimeScale object, which happens in another spot in this file with duplicate mapping of properties of this TimeNav into the TimeScale options object? */\n\t\t// Set Max Rows\n\t\tvar marker_height_min = 0;\n\t\ttry {\n\t\t\tmarker_height_min = parseInt(this.options.marker_height_min);\n\t\t} catch(e) {\n\t\t\ttrace(\"Invalid value for marker_height_min option.\");\n\t\t\tmarker_height_min = 30;\n\t\t}\n\t\tif (marker_height_min == 0) {\n\t\t\ttrace(\"marker_height_min option must not be zero.\")\n\t\t\tmarker_height_min = 30;\n\t\t}\n\t\tthis.max_rows = Math.round((this.options.height - this._el.timeaxis_background.offsetHeight - (this.options.marker_padding)) / marker_height_min);\n\t\tif (this.max_rows < 1) {\n\t\t\tthis.max_rows = 1;\n\t\t}\n\t\treturn new TL.TimeScale(this.config, {\n            display_width: this._el.container.offsetWidth,\n            screen_multiplier: this.options.scale_factor,\n            max_rows: this.max_rows\n\n\t\t});\n\t},\n\n\t_updateTimeScale: function(new_scale) {\n\t\tthis.options.scale_factor = new_scale;\n\t\tthis._updateDrawTimeline();\n\t},\n\n\tzoomIn: function() { // move the the next \"higher\" scale factor\n\t\tvar new_scale = TL.Util.findNextGreater(this.options.zoom_sequence, this.options.scale_factor);\n\t\tthis.setZoomFactor(new_scale);\n\t},\n\n\tzoomOut: function() { // move the the next \"lower\" scale factor\n\t\tvar new_scale = TL.Util.findNextLesser(this.options.zoom_sequence, this.options.scale_factor);\n\t\tthis.setZoomFactor(new_scale);\n\t},\n\n\tsetZoom: function(level) {\n\t\tvar zoom_factor = this.options.zoom_sequence[level];\n\t\tif (typeof(zoom_factor) == 'number') {\n\t\t\tthis.setZoomFactor(zoom_factor);\n\t\t} else {\n\t\t\tconsole.warn(\"Invalid zoom level. Please use an index number between 0 and \" + (this.options.zoom_sequence.length - 1));\n\t\t}\n\t},\n\n\tsetZoomFactor: function(factor) {\n\t\tif (factor <= this.options.zoom_sequence[0]) {\n\t\t\tthis.fire(\"zoomtoggle\", {zoom:\"out\", show:false});\n\t\t} else {\n\t\t\tthis.fire(\"zoomtoggle\", {zoom:\"out\", show:true});\n\t\t}\n\n\t\tif (factor >= this.options.zoom_sequence[this.options.zoom_sequence.length-1]) {\n\t\t\tthis.fire(\"zoomtoggle\", {zoom:\"in\", show:false});\n\t\t} else {\n\t\t\tthis.fire(\"zoomtoggle\", {zoom:\"in\", show:true});\n\t\t}\n\n\t\tif (factor == 0) {\n\t\t\tconsole.warn(\"Zoom factor must be greater than zero. Using 0.1\");\n\t\t\tfactor = 0.1;\n\t\t}\n\t\tthis.options.scale_factor = factor;\n\t\t//this._updateDrawTimeline(true);\n\t\tthis.goToId(this.current_id, !this._updateDrawTimeline(true), true);\n\t},\n\n\t/*\tGroups\n\t================================================== */\n\t_createGroups: function() {\n\t\tthis._groups = [];\n\t\tvar group_labels = this.timescale.getGroupLabels();\n\n\t\tif (group_labels) {\n\t\t\tthis.options.has_groups = true;\n\t\t\tfor (var i = 0; i < group_labels.length; i++) {\n\t\t\t\tthis._createGroup(group_labels[i]);\n\t\t\t}\n\t\t}\n\n\t},\n\n\t_createGroup: function(group_label) {\n\t\tvar group = new TL.TimeGroup(group_label);\n\t\tthis._addGroup(group);\n\t\tthis._groups.push(group);\n\t},\n\n\t_addGroup:function(group) {\n\t\tgroup.addTo(this._el.container);\n\n\t},\n\n\t_positionGroups: function() {\n\t\tif (this.options.has_groups) {\n\t\t\tvar available_height \t= (this.options.height - this._el.timeaxis_background.offsetHeight ),\n\t\t\t\tgroup_height \t\t= Math.floor((available_height /this.timescale.getNumberOfRows()) - this.options.marker_padding),\n\t\t\t\tgroup_labels\t\t= this.timescale.getGroupLabels();\n\n\t\t\tfor (var i = 0, group_rows = 0; i < this._groups.length; i++) {\n\t\t\t\tvar group_y = Math.floor(group_rows * (group_height + this.options.marker_padding));\n\t\t\t\tvar group_hide = false;\n\t\t\t\tif (group_y > (available_height- this.options.marker_padding)) {\n\t\t\t\t\tgroup_hide = true;\n\t\t\t\t}\n\n\t\t\t\tthis._groups[i].setRowPosition(group_y, this._calculated_row_height + this.options.marker_padding/2);\n\t\t\t\tthis._groups[i].setAlternateRowColor(TL.Util.isEven(i), group_hide);\n\n\t\t\t\tgroup_rows += this._groups[i].data.rows;    // account for groups spanning multiple rows\n\t\t\t}\n\t\t}\n\t},\n\n\t/*\tMarkers\n\t================================================== */\n\t_addMarker:function(marker) {\n\t\tmarker.addTo(this._el.marker_item_container);\n\t\tmarker.on('markerclick', this._onMarkerClick, this);\n\t\tmarker.on('added', this._onMarkerAdded, this);\n\t},\n\n\t_createMarker: function(data, n) {\n\t\tvar marker = new TL.TimeMarker(data, this.options);\n\t\tthis._addMarker(marker);\n\t\tif(n < 0) {\n\t\t    this._markers.push(marker);\n\t\t} else {\n\t\t    this._markers.splice(n, 0, marker);\n\t\t}\n\t},\n\n\t_createMarkers: function(array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tthis._createMarker(array[i], -1);\n\t\t}\n\t},\n\n\t_removeMarker: function(marker) {\n\t\tmarker.removeFrom(this._el.marker_item_container);\n\t\t//marker.off('added', this._onMarkerRemoved, this);\n\t},\n\n\t_destroyMarker: function(n) {\n\t    this._removeMarker(this._markers[n]);\n\t    this._markers.splice(n, 1);\n\t},\n\n\t_positionMarkers: function(fast) {\n\t\t// POSITION X\n\t\tfor (var i = 0; i < this._markers.length; i++) {\n\t\t\tvar pos = this.timescale.getPositionInfo(i);\n\t\t\tif (fast) {\n\t\t\t\tthis._markers[i].setClass(\"tl-timemarker tl-timemarker-fast\");\n\t\t\t} else {\n\t\t\t\tthis._markers[i].setClass(\"tl-timemarker\");\n\t\t\t}\n\t\t\tthis._markers[i].setPosition({left:pos.start});\n\t\t\tthis._markers[i].setWidth(pos.width);\n\t\t};\n\n\t},\n\n\t_calculateMarkerHeight: function(h) {\n\t\treturn ((h /this.timescale.getNumberOfRows()) - this.options.marker_padding);\n\t},\n\n\t_calculateRowHeight: function(h) {\n\t\treturn (h /this.timescale.getNumberOfRows());\n\t},\n\n\t_calculateAvailableHeight: function() {\n\t\treturn (this.options.height - this._el.timeaxis_background.offsetHeight - (this.options.marker_padding));\n\t},\n\n\t_calculateMinimumTimeNavHeight: function() {\n\t\treturn (this.timescale.getNumberOfRows() * this.options.marker_height_min) + this._el.timeaxis_background.offsetHeight + (this.options.marker_padding);\n\n\t},\n\n\tgetMinimumHeight: function() {\n\t\treturn this._calculateMinimumTimeNavHeight();\n\t},\n\n\t_assignRowsToMarkers: function() {\n\t\tvar available_height \t= this._calculateAvailableHeight(),\n\t\t\tmarker_height \t\t= this._calculateMarkerHeight(available_height);\n\n\n\t\tthis._positionGroups();\n\n\t\tthis._calculated_row_height = this._calculateRowHeight(available_height);\n\n\t\tfor (var i = 0; i < this._markers.length; i++) {\n\n\t\t\t// Set Height\n\t\t\tthis._markers[i].setHeight(marker_height);\n\n\t\t\t//Position by Row\n\t\t\tvar row = this.timescale.getPositionInfo(i).row;\n\n\t\t\tvar marker_y = Math.floor(row * (marker_height + this.options.marker_padding)) + this.options.marker_padding;\n\n\t\t\tvar remainder_height = available_height - marker_y + this.options.marker_padding;\n\t\t\tthis._markers[i].setRowPosition(marker_y, remainder_height);\n\t\t};\n\n\t},\n\n\t_resetMarkersActive: function() {\n\t\tfor (var i = 0; i < this._markers.length; i++) {\n\t\t\tthis._markers[i].setActive(false);\n\t\t};\n\t},\n\n\t_findMarkerIndex: function(n) {\n\t    var _n = -1;\n\t\tif (typeof n == 'string' || n instanceof String) {\n\t\t\t_n = TL.Util.findArrayNumberByUniqueID(n, this._markers, \"unique_id\", _n);\n\t\t}\n\t\treturn _n;\n\t},\n\n\t/*\tERAS\n\t================================================== */\n\t_createEras: function(array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tthis._createEra(array[i], -1);\n\t\t}\n\t},\n\n\t_createEra: function(data, n) {\n\t\tvar era = new TL.TimeEra(data, this.options);\n\t\tthis._addEra(era);\n\t\tif(n < 0) {\n\t\t    this._eras.push(era);\n\t\t} else {\n\t\t    this._eras.splice(n, 0, era);\n\t\t}\n\t},\n\n\t_addEra:function(era) {\n\t\tera.addTo(this._el.marker_item_container);\n\t\tera.on('added', this._onEraAdded, this);\n\t},\n\n\t_removeEra: function(era) {\n\t\tera.removeFrom(this._el.marker_item_container);\n\t\t//marker.off('added', this._onMarkerRemoved, this);\n\t},\n\n\t_destroyEra: function(n) {\n\t    this._removeEra(this._eras[n]);\n\t    this._eras.splice(n, 1);\n\t},\n\n\t_positionEras: function(fast) {\n\n\t\tvar era_color = 0;\n\t\t// POSITION X\n\t\tfor (var i = 0; i < this._eras.length; i++) {\n\t\t\tvar pos = {\n\t\t\t\tstart:0,\n\t\t\t\tend:0,\n\t\t\t\twidth:0\n\t\t\t};\n\n\t\t\tpos.start = this.timescale.getPosition(this._eras[i].data.start_date.getTime());\n\t\t\tpos.end = this.timescale.getPosition(this._eras[i].data.end_date.getTime());\n\t\t\tpos.width = pos.end - pos.start;\n\n\t\t\tif (fast) {\n\t\t\t\tthis._eras[i].setClass(\"tl-timeera tl-timeera-fast\");\n\t\t\t} else {\n\t\t\t\tthis._eras[i].setClass(\"tl-timeera\");\n\t\t\t}\n\t\t\tthis._eras[i].setPosition({left:pos.start});\n\t\t\tthis._eras[i].setWidth(pos.width);\n\n\t\t\tera_color++;\n\t\t\tif (era_color > 5) {\n\t\t\t\tera_color = 0;\n\t\t\t}\n\t\t\tthis._eras[i].setColor(era_color);\n\t\t};\n\n\t},\n\n\t/*\tPublic\n\t================================================== */\n\n\t// Create a marker\n\tcreateMarker: function(d, n) {\n\t    this._createMarker(d, n);\n\t},\n\n\t// Create many markers from an array\n\tcreateMarkers: function(array) {\n\t    this._createMarkers(array);\n\t},\n\n\t// Destroy marker by index\n\tdestroyMarker: function(n) {\n\t    this._destroyMarker(n);\n\t},\n\n\t// Destroy marker by id\n\tdestroyMarkerId: function(id) {\n\t    this.destroyMarker(this._findMarkerIndex(id));\n\t},\n\n\t/*\tNavigation\n\t================================================== */\n\tgoTo: function(n, fast, css_animation) {\n\t\tvar self = \tthis,\n\t\t\t_ease = this.options.ease,\n\t\t\t_duration = this.options.duration,\n\t\t\t_n = (n < 0) ? 0 : n;\n\n\t\t// Set Marker active state\n\t\tthis._resetMarkersActive();\n\t\tif(n >= 0 && n < this._markers.length) {\n\t\t    this._markers[n].setActive(true);\n\t\t}\n\t\t// Stop animation\n\t\tif (this.animator) {\n\t\t\tthis.animator.stop();\n\t\t}\n\n\t\tif (fast) {\n\t\t\tthis._el.slider.className = \"tl-timenav-slider\";\n\t\t\tthis._el.slider.style.left = -this._markers[_n].getLeft() + (this.options.width/2) + \"px\";\n\t\t} else {\n\t\t\tif (css_animation) {\n\t\t\t\tthis._el.slider.className = \"tl-timenav-slider tl-timenav-slider-animate\";\n\t\t\t\tthis.animate_css = true;\n\t\t\t\tthis._el.slider.style.left = -this._markers[_n].getLeft() + (this.options.width/2) + \"px\";\n\t\t\t} else {\n\t\t\t\tthis._el.slider.className = \"tl-timenav-slider\";\n\t\t\t\tthis.animator = TL.Animate(this._el.slider, {\n\t\t\t\t\tleft: \t\t-this._markers[_n].getLeft() + (this.options.width/2) + \"px\",\n\t\t\t\t\tduration: \t_duration,\n\t\t\t\t\teasing: \t_ease\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif(n >= 0 && n < this._markers.length) {\n\t\t    this.current_id = this._markers[n].data.unique_id;\n\t\t} else {\n\t\t    this.current_id = '';\n\t\t}\n\t},\n\n\tgoToId: function(id, fast, css_animation) {\n\t\tthis.goTo(this._findMarkerIndex(id), fast, css_animation);\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\t_onLoaded: function() {\n\t\tthis.ready = true;\n\t\tthis.fire(\"loaded\", this.config);\n\t},\n\n\t_onMarkerAdded: function(e) {\n\t\tthis.fire(\"dateAdded\", this.config);\n\t},\n\n\t_onEraAdded: function(e) {\n\t\tthis.fire(\"eraAdded\", this.config);\n\t},\n\n\t_onMarkerRemoved: function(e) {\n\t\tthis.fire(\"dateRemoved\", this.config);\n\t},\n\n\t_onMarkerClick: function(e) {\n\t\t// Go to the clicked marker\n\t\tthis.goToId(e.unique_id);\n\t\tthis.fire(\"change\", {unique_id: e.unique_id});\n\t},\n\n\t_onMouseScroll: function(e) {\n\n\t\tvar delta\t\t= 0,\n\t\t\tscroll_to\t= 0,\n\t\t\tconstraint \t= {\n\t\t\t\tright: \t-(this.timescale.getPixelWidth() - (this.options.width/2)),\n\t\t\t\tleft: \tthis.options.width/2\n\t\t\t};\n\t\tif (!e) {\n\t\t\te = window.event;\n\t\t}\n\t\tif (e.originalEvent) {\n\t\t\te = e.originalEvent;\n\t\t}\n\n\t\t// Webkit and browsers able to differntiate between up/down and left/right scrolling\n\t\tif (typeof e.wheelDeltaX != 'undefined' ) {\n\t\t\tdelta = e.wheelDeltaY/6;\n\t\t\tif (Math.abs(e.wheelDeltaX) > Math.abs(e.wheelDeltaY)) {\n\t\t\t\tdelta = e.wheelDeltaX/6;\n\t\t\t} else {\n\t\t\t\t//delta = e.wheelDeltaY/6;\n\t\t\t\tdelta = 0;\n\t\t\t}\n\t\t}\n\t\tif (delta) {\n\t\t\tif (e.preventDefault) {\n\t\t\t\t e.preventDefault();\n\t\t\t}\n\t\t\te.returnValue = false;\n\t\t}\n\t\t// Stop from scrolling too far\n\t\tscroll_to = parseInt(this._el.slider.style.left.replace(\"px\", \"\")) + delta;\n\n\n\t\tif (scroll_to > constraint.left) {\n\t\t\tscroll_to = constraint.left;\n\t\t} else if (scroll_to < constraint.right) {\n\t\t\tscroll_to = constraint.right;\n\t\t}\n\n\t\tif (this.animate_css) {\n\t\t\tthis._el.slider.className = \"tl-timenav-slider\";\n\t\t\tthis.animate_css = false;\n\t\t}\n\n\t\tthis._el.slider.style.left = scroll_to + \"px\";\n\n\t},\n\n\t_onDragMove: function(e) {\n\t\tif (this.animate_css) {\n\t\t\tthis._el.slider.className = \"tl-timenav-slider\";\n\t\t\tthis.animate_css = false;\n\t\t}\n\n\t},\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t// Update Display\n\t_updateDisplay: function(width, height, animate) {\n\n\t\tif (width) {\n\t\t\tthis.options.width = width;\n\t\t}\n\t\tif (height && height != this.options.height) {\n\t\t\tthis.options.height = height;\n\t\t\tthis.timescale = this._getTimeScale();\n\t\t}\n\n\t\t// Size Markers\n\t\tthis._assignRowsToMarkers();\n\n\t\t// Size swipable area\n\t\tthis._el.slider_background.style.width = this.timescale.getPixelWidth() + this.options.width + \"px\";\n\t\tthis._el.slider_background.style.left = -(this.options.width/2) + \"px\";\n\t\tthis._el.slider.style.width = this.timescale.getPixelWidth() + this.options.width + \"px\";\n\n\t\t// Update Swipable constraint\n\t\tthis._swipable.updateConstraint({top: false,bottom: false,left: (this.options.width/2),right: -(this.timescale.getPixelWidth() - (this.options.width/2))});\n\n\t\t// Go to the current slide\n\t\tthis.goToId(this.current_id, true);\n\t},\n\n\t_drawTimeline: function(fast) {\n\t\tthis.timescale = this._getTimeScale();\n\t\tthis.timeaxis.drawTicks(this.timescale, this.options.optimal_tick_width);\n\t\tthis._positionMarkers(fast);\n\t\tthis._assignRowsToMarkers();\n\t\tthis._createGroups();\n\t\tthis._positionGroups();\n\n\t\tif (this.has_eras) {\n\n\t\t\tthis._positionEras(fast);\n\t\t}\n\t},\n\n\t_updateDrawTimeline: function(check_update) {\n\t\tvar do_update = false;\n\n\t\t// Check to see if redraw is needed\n\t\tif (check_update) {\n\t\t\t/* keep this aligned with _getTimeScale or reduce code duplication */\n\t\t\tvar temp_timescale = new TL.TimeScale(this.config, {\n\t            display_width: this._el.container.offsetWidth,\n\t            screen_multiplier: this.options.scale_factor,\n\t            max_rows: this.max_rows\n\n\t\t\t});\n\n\t\t\tif (this.timescale.getMajorScale() == temp_timescale.getMajorScale()\n\t\t\t && this.timescale.getMinorScale() == temp_timescale.getMinorScale()) {\n\t\t\t\tdo_update = true;\n\t\t\t}\n\t\t} else {\n\t\t\tdo_update = true;\n\t\t}\n\n\t\t// Perform update or redraw\n\t\tif (do_update) {\n\t\t\tthis.timescale = this._getTimeScale();\n\t\t\tthis.timeaxis.positionTicks(this.timescale, this.options.optimal_tick_width);\n\t\t\tthis._positionMarkers();\n\t\t\tthis._assignRowsToMarkers();\n\t\t\tthis._positionGroups();\n\t\t\tif (this.has_eras) {\n\t\t\t\tthis._positionEras();\n\t\t\t}\n\t\t\tthis._updateDisplay();\n\t\t} else {\n\t\t\tthis._drawTimeline(true);\n\t\t}\n\n\t\treturn do_update;\n\n\t},\n\n\n\t/*\tInit\n\t================================================== */\n\t_initLayout: function () {\n\t\t// Create Layout\n\t\tthis._el.attribution \t\t\t\t= TL.Dom.create('div', 'tl-attribution', this._el.container);\n\t\tthis._el.line\t\t\t\t\t\t= TL.Dom.create('div', 'tl-timenav-line', this._el.container);\n\t\tthis._el.slider\t\t\t\t\t\t= TL.Dom.create('div', 'tl-timenav-slider', this._el.container);\n\t\tthis._el.slider_background\t\t\t= TL.Dom.create('div', 'tl-timenav-slider-background', this._el.slider);\n\t\tthis._el.marker_container_mask\t\t= TL.Dom.create('div', 'tl-timenav-container-mask', this._el.slider);\n\t\tthis._el.marker_container\t\t\t= TL.Dom.create('div', 'tl-timenav-container', this._el.marker_container_mask);\n\t\tthis._el.marker_item_container\t\t= TL.Dom.create('div', 'tl-timenav-item-container', this._el.marker_container);\n\t\tthis._el.timeaxis \t\t\t\t\t= TL.Dom.create('div', 'tl-timeaxis', this._el.slider);\n\t\tthis._el.timeaxis_background \t\t= TL.Dom.create('div', 'tl-timeaxis-background', this._el.container);\n\n\n\t\t// Knight Lab Logo\n\t\tthis._el.attribution.innerHTML = \"<a href='http://timeline.knightlab.com' target='_blank'><span class='tl-knightlab-logo'></span>Timeline JS</a>\"\n\n\t\t// Time Axis\n\t\tthis.timeaxis = new TL.TimeAxis(this._el.timeaxis, this.options);\n\n\t\t// Swipable\n\t\tthis._swipable = new TL.Swipable(this._el.slider_background, this._el.slider, {\n\t\t\tenable: {x:true, y:false},\n\t\t\tconstraint: {top: false,bottom: false,left: (this.options.width/2),right: false},\n\t\t\tsnap: \tfalse\n\t\t});\n\t\tthis._swipable.enable();\n\n\t},\n\n\t_initEvents: function () {\n\t\t// Drag Events\n\t\tthis._swipable.on('dragmove', this._onDragMove, this);\n\n\t\t// Scroll Events\n\t\tTL.DomEvent.addListener(this._el.container, 'mousewheel', this._onMouseScroll, this);\n\t\tTL.DomEvent.addListener(this._el.container, 'DOMMouseScroll', this._onMouseScroll, this);\n\t},\n\n\t_initData: function() {\n\t\t// Create Markers and then add them\n\t\tthis._createMarkers(this.config.events);\n\n\t\tif (this.config.eras) {\n\t\t\tthis.has_eras = true;\n\t\t\tthis._createEras(this.config.eras);\n\t\t}\n\n\t\tthis._drawTimeline();\n\n\t}\n\n\n});\n\n\n/* **********************************************\n     Begin TL.TimeMarker.js\n********************************************** */\n\n/*\tTL.TimeMarker\n\n================================================== */\n\nTL.TimeMarker = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options) {\n\n\t\t// DOM Elements\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tcontent_container: {},\n\t\t\tmedia_container: {},\n\t\t\ttimespan: {},\n\t\t\tline_left: {},\n\t\t\tline_right: {},\n\t\t\tcontent: {},\n\t\t\ttext: {},\n\t\t\tmedia: {},\n\t\t};\n\n\t\t// Components\n\t\tthis._text\t\t\t= {};\n\n\t\t// State\n\t\tthis._state = {\n\t\t\tloaded: \t\tfalse\n\t\t};\n\n\n\t\t// Data\n\t\tthis.data = {\n\t\t\tunique_id: \t\t\t\"\",\n\t\t\tbackground: \t\tnull,\n\t\t\tdate: {\n\t\t\t\tyear:\t\t\t0,\n\t\t\t\tmonth:\t\t\t0,\n\t\t\t\tday: \t\t\t0,\n\t\t\t\thour: \t\t\t0,\n\t\t\t\tminute: \t\t0,\n\t\t\t\tsecond: \t\t0,\n\t\t\t\tmillisecond: \t0,\n\t\t\t\tthumbnail: \t\t\"\",\n\t\t\t\tformat: \t\t\"\"\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\theadline: \t\t\"\",\n\t\t\t\ttext: \t\t\t\"\"\n\t\t\t},\n\t\t\tmedia: \t\t\t\tnull\n\t\t};\n\n\t\t// Options\n\t\tthis.options = {\n\t\t\tduration: \t\t\t1000,\n\t\t\tease: \t\t\t\tTL.Ease.easeInSpline,\n\t\t\twidth: \t\t\t\t600,\n\t\t\theight: \t\t\t600,\n\t\t\tmarker_width_min: \t100 \t\t\t// Minimum Marker Width\n\t\t};\n\n\t\t// Actively Displaying\n\t\tthis.active = false;\n\n\t\t// Animation Object\n\t\tthis.animator = {};\n\n\t\t// End date\n\t\tthis.has_end_date = false;\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\n\n\t},\n\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function() {\n\n\t},\n\n\thide: function() {\n\n\t},\n\n\tsetActive: function(is_active) {\n\t\tthis.active = is_active;\n\n\t\tif (this.active && this.has_end_date) {\n\t\t\tthis._el.container.className = 'tl-timemarker tl-timemarker-with-end tl-timemarker-active';\n\t\t} else if (this.active){\n\t\t\tthis._el.container.className = 'tl-timemarker tl-timemarker-active';\n\t\t} else if (this.has_end_date){\n\t\t\tthis._el.container.className = 'tl-timemarker tl-timemarker-with-end';\n\t\t} else {\n\t\t\tthis._el.container.className = 'tl-timemarker';\n\t\t}\n\t},\n\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t},\n\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t},\n\n\tupdateDisplay: function(w, h) {\n\t\tthis._updateDisplay(w, h);\n\t},\n\n\tloadMedia: function() {\n\n\t\tif (this._media && !this._state.loaded) {\n\t\t\tthis._media.loadMedia();\n\t\t\tthis._state.loaded = true;\n\t\t}\n\t},\n\n\tstopMedia: function() {\n\t\tif (this._media && this._state.loaded) {\n\t\t\tthis._media.stopMedia();\n\t\t}\n\t},\n\n\tgetLeft: function() {\n\t\treturn this._el.container.style.left.slice(0, -2);\n\t},\n\n\tgetTime: function() { // TODO does this need to know about the end date?\n\t\treturn this.data.start_date.getTime();\n\t},\n\n\tgetEndTime: function() {\n\n\t\tif (this.data.end_date) {\n\t\t\treturn this.data.end_date.getTime();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tsetHeight: function(h) {\n\t\tvar text_line_height = 12,\n\t\t\ttext_lines = 1;\n\n\t\tthis._el.content_container.style.height = h  + \"px\";\n\t\tthis._el.timespan_content.style.height = h + \"px\";\n\t\t// Handle Line height for better display of text\n\t\tif (h <= 30) {\n\t\t\tthis._el.content.className = \"tl-timemarker-content tl-timemarker-content-small\";\n\t\t} else {\n\t\t\tthis._el.content.className = \"tl-timemarker-content\";\n\t\t}\n\n\t\tif (h <= 56) {\n\t\t\tTL.DomUtil.addClass(this._el.content_container, \"tl-timemarker-content-container-small\");\n\t\t} else {\n\t\t\tTL.DomUtil.removeClass(this._el.content_container, \"tl-timemarker-content-container-small\");\n\t\t}\n\n\t\t// Handle number of lines visible vertically\n\n\t\tif (TL.Browser.webkit) {\n\t\t\ttext_lines = Math.floor(h / (text_line_height + 2));\n\t\t\tif (text_lines < 1) {\n\t\t\t\ttext_lines = 1;\n\t\t\t}\n\t\t\tthis._text.className = \"tl-headline\";\n\t\t\tthis._text.style.webkitLineClamp = text_lines;\n\t\t} else {\n\t\t\ttext_lines = h / text_line_height;\n\t\t\tif (text_lines > 1) {\n\t\t\t\tthis._text.className = \"tl-headline tl-headline-fadeout\";\n\t\t\t} else {\n\t\t\t\tthis._text.className = \"tl-headline\";\n\t\t\t}\n\t\t\tthis._text.style.height = (text_lines * text_line_height)  + \"px\";\n\t\t}\n\n\t},\n\n\tsetWidth: function(w) {\n\t\tif (this.data.end_date) {\n\t\t\tthis._el.container.style.width = w + \"px\";\n\n\t\t\tif (w > this.options.marker_width_min) {\n\t\t\t\tthis._el.content_container.style.width = w + \"px\";\n\t\t\t\tthis._el.content_container.className = \"tl-timemarker-content-container tl-timemarker-content-container-long\";\n\t\t\t} else {\n\t\t\t\tthis._el.content_container.style.width = this.options.marker_width_min + \"px\";\n\t\t\t\tthis._el.content_container.className = \"tl-timemarker-content-container\";\n\t\t\t}\n\t\t}\n\n\t},\n\n\tsetClass: function(n) {\n\t\tthis._el.container.className = n;\n\t},\n\n\tsetRowPosition: function(n, remainder) {\n\t\tthis.setPosition({top:n});\n\t\tthis._el.timespan.style.height = remainder + \"px\";\n\n\t\tif (remainder < 56) {\n\t\t\t//TL.DomUtil.removeClass(this._el.content_container, \"tl-timemarker-content-container-small\");\n\t\t}\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\t_onMarkerClick: function(e) {\n\t\tthis.fire(\"markerclick\", {unique_id:this.data.unique_id});\n\t},\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t//trace(this.data)\n\t\t// Create Layout\n\t\tthis._el.container \t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker\");\n\t\tif (this.data.unique_id) {\n\t\t\tthis._el.container.id \t\t= this.data.unique_id + \"-marker\";\n\t\t}\n\n\t\tif (this.data.end_date) {\n\t\t\tthis.has_end_date = true;\n\t\t\tthis._el.container.className = 'tl-timemarker tl-timemarker-with-end';\n\t\t}\n\n\t\tthis._el.timespan\t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker-timespan\", this._el.container);\n\t\tthis._el.timespan_content\t\t= TL.Dom.create(\"div\", \"tl-timemarker-timespan-content\", this._el.timespan);\n\t\tthis._el.content_container\t\t= TL.Dom.create(\"div\", \"tl-timemarker-content-container\", this._el.container);\n\n\t\tthis._el.content\t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker-content\", this._el.content_container);\n\n\t\tthis._el.line_left\t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker-line-left\", this._el.timespan);\n\t\tthis._el.line_right\t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker-line-right\", this._el.timespan);\n\n\t\t// Thumbnail or Icon\n\t\tif (this.data.media) {\n\t\t\tthis._el.media_container\t= TL.Dom.create(\"div\", \"tl-timemarker-media-container\", this._el.content);\n\t\t\t// ugh. needs an overhaul\n\t\t\tvar mtd = {url: this.data.media.thumbnail};\n\t\t\tvar thumbnail_media_type = (this.data.media.thumbnail) ? TL.MediaType(mtd, true) : null;\n\t\t\tif (thumbnail_media_type) {\n\t\t\t\tvar thumbnail_media = new thumbnail_media_type.cls(mtd);\n\t\t\t\tthumbnail_media.on(\"loaded\", function() {\n\t\t\t\t\tthis._el.media\t\t\t\t= TL.Dom.create(\"img\", \"tl-timemarker-media\", this._el.media_container);\n\t\t\t\t\tthis._el.media.src\t\t\t= thumbnail_media.getImageURL();\n\t\t\t\t}.bind(this));\n\t\t\t\tthumbnail_media.loadMedia();\n\t\t\t} else {\n\t\t\t\tvar media_type = TL.MediaType(this.data.media).type;\n\t\t\t\tthis._el.media\t\t\t\t= TL.Dom.create(\"span\", \"tl-icon-\" + media_type, this._el.media_container);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Text\n\t\tthis._el.text\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-timemarker-text\", this._el.content);\n\t\tthis._text\t\t\t\t\t\t= TL.Dom.create(\"h2\", \"tl-headline\", this._el.text);\n\t\tif (this.data.text.headline && this.data.text.headline != \"\") {\n\t\t\tthis._text.innerHTML\t\t= TL.Util.unlinkify(this.data.text.headline);\n\t\t} else if (this.data.text.text && this.data.text.text != \"\") {\n\t\t\tthis._text.innerHTML\t\t= TL.Util.unlinkify(this.data.text.text);\n\t\t} else if (this.data.media && this.data.media.caption && this.data.media.caption != \"\") {\n\t\t\tthis._text.innerHTML\t\t= TL.Util.unlinkify(this.data.media.caption);\n\t\t}\n\n\n\n\t\t// Fire event that the slide is loaded\n\t\tthis.onLoaded();\n\n\t},\n\n\t_initEvents: function() {\n\t\tTL.DomEvent.addListener(this._el.container, 'click', this._onMarkerClick, this);\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(width, height, layout) {\n\n\t\tif (width) {\n\t\t\tthis.options.width \t\t\t\t\t= width;\n\t\t}\n\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t}\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.TimeEra.js\n********************************************** */\n\n/*\tTL.TimeMarker\n\n================================================== */\n\nTL.TimeEra = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data, options) {\n\n\t\t// DOM Elements\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tbackground: {},\n\t\t\tcontent_container: {},\n\t\t\tcontent: {},\n\t\t\ttext: {}\n\t\t};\n\n\t\t// Components\n\t\tthis._text\t\t\t= {};\n\n\t\t// State\n\t\tthis._state = {\n\t\t\tloaded: \t\tfalse\n\t\t};\n\n\n\t\t// Data\n\t\tthis.data = {\n\t\t\tunique_id: \t\t\t\"\",\n\t\t\tdate: {\n\t\t\t\tyear:\t\t\t0,\n\t\t\t\tmonth:\t\t\t0,\n\t\t\t\tday: \t\t\t0,\n\t\t\t\thour: \t\t\t0,\n\t\t\t\tminute: \t\t0,\n\t\t\t\tsecond: \t\t0,\n\t\t\t\tmillisecond: \t0,\n\t\t\t\tthumbnail: \t\t\"\",\n\t\t\t\tformat: \t\t\"\"\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\theadline: \t\t\"\",\n\t\t\t\ttext: \t\t\t\"\"\n\t\t\t}\n\t\t};\n\n\t\t// Options\n\t\tthis.options = {\n\t\t\tduration: \t\t\t1000,\n\t\t\tease: \t\t\t\tTL.Ease.easeInSpline,\n\t\t\twidth: \t\t\t\t600,\n\t\t\theight: \t\t\t600,\n\t\t\tmarker_width_min: \t100 \t\t\t// Minimum Marker Width\n\t\t};\n\n\t\t// Actively Displaying\n\t\tthis.active = false;\n\n\t\t// Animation Object\n\t\tthis.animator = {};\n\n\t\t// End date\n\t\tthis.has_end_date = false;\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\t\tTL.Util.mergeData(this.data, data);\n\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\n\n\t},\n\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function() {\n\n\t},\n\n\thide: function() {\n\n\t},\n\n\tsetActive: function(is_active) {\n\n\t},\n\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t},\n\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t},\n\n\tupdateDisplay: function(w, h) {\n\t\tthis._updateDisplay(w, h);\n\t},\n\n\tgetLeft: function() {\n\t\treturn this._el.container.style.left.slice(0, -2);\n\t},\n\n\tgetTime: function() { // TODO does this need to know about the end date?\n\t\treturn this.data.start_date.getTime();\n\t},\n\n\tgetEndTime: function() {\n\n\t\tif (this.data.end_date) {\n\t\t\treturn this.data.end_date.getTime();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tsetHeight: function(h) {\n\t\tvar text_line_height = 12,\n\t\t\ttext_lines = 1;\n\n\t\tthis._el.content_container.style.height = h  + \"px\";\n\t\tthis._el.content.className = \"tl-timeera-content\";\n\n\t\t// Handle number of lines visible vertically\n\n\t\tif (TL.Browser.webkit) {\n\t\t\ttext_lines = Math.floor(h / (text_line_height + 2));\n\t\t\tif (text_lines < 1) {\n\t\t\t\ttext_lines = 1;\n\t\t\t}\n\t\t\tthis._text.className = \"tl-headline\";\n\t\t\tthis._text.style.webkitLineClamp = text_lines;\n\t\t} else {\n\t\t\ttext_lines = h / text_line_height;\n\t\t\tif (text_lines > 1) {\n\t\t\t\tthis._text.className = \"tl-headline tl-headline-fadeout\";\n\t\t\t} else {\n\t\t\t\tthis._text.className = \"tl-headline\";\n\t\t\t}\n\t\t\tthis._text.style.height = (text_lines * text_line_height)  + \"px\";\n\t\t}\n\n\t},\n\n\tsetWidth: function(w) {\n\t\tif (this.data.end_date) {\n\t\t\tthis._el.container.style.width = w + \"px\";\n\n\t\t\tif (w > this.options.marker_width_min) {\n\t\t\t\tthis._el.content_container.style.width = w + \"px\";\n\t\t\t\tthis._el.content_container.className = \"tl-timeera-content-container tl-timeera-content-container-long\";\n\t\t\t} else {\n\t\t\t\tthis._el.content_container.style.width = this.options.marker_width_min + \"px\";\n\t\t\t\tthis._el.content_container.className = \"tl-timeera-content-container\";\n\t\t\t}\n\t\t}\n\n\t},\n\n\tsetClass: function(n) {\n\t\tthis._el.container.className = n;\n\t},\n\n\tsetRowPosition: function(n, remainder) {\n\t\tthis.setPosition({top:n});\n\n\t\tif (remainder < 56) {\n\t\t\t//TL.DomUtil.removeClass(this._el.content_container, \"tl-timeera-content-container-small\");\n\t\t}\n\t},\n\n\tsetColor: function(color_num) {\n\t\tthis._el.container.className = 'tl-timeera tl-timeera-color' + color_num;\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t//trace(this.data)\n\t\t// Create Layout\n\t\tthis._el.container \t\t\t\t= TL.Dom.create(\"div\", \"tl-timeera\");\n\t\tif (this.data.unique_id) {\n\t\t\tthis._el.container.id \t\t= this.data.unique_id + \"-era\";\n\t\t}\n\n\t\tif (this.data.end_date) {\n\t\t\tthis.has_end_date = true;\n\t\t\tthis._el.container.className = 'tl-timeera tl-timeera-with-end';\n\t\t}\n\n\t\tthis._el.content_container\t\t= TL.Dom.create(\"div\", \"tl-timeera-content-container\", this._el.container);\n\n\t\tthis._el.background \t\t\t= TL.Dom.create(\"div\", \"tl-timeera-background\", this._el.content_container);\n\n\t\tthis._el.content\t\t\t\t= TL.Dom.create(\"div\", \"tl-timeera-content\", this._el.content_container);\n\n\t\t\n\n\t\t// Text\n\t\tthis._el.text\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-timeera-text\", this._el.content);\n\t\tthis._text\t\t\t\t\t\t= TL.Dom.create(\"h2\", \"tl-headline\", this._el.text);\n\t\tif (this.data.text.headline && this.data.text.headline != \"\") {\n\t\t\tthis._text.innerHTML\t\t= TL.Util.unlinkify(this.data.text.headline);\n\t\t} \n\n\n\n\t\t// Fire event that the slide is loaded\n\t\tthis.onLoaded();\n\n\t},\n\n\t_initEvents: function() {\n\t\t\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(width, height, layout) {\n\n\t\tif (width) {\n\t\t\tthis.options.width \t\t\t\t\t= width;\n\t\t}\n\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t}\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.TimeGroup.js\n********************************************** */\n\n/*\tTL.TimeGroup\n\t\n================================================== */\n \nTL.TimeGroup = TL.Class.extend({\n\t\n\tincludes: [TL.Events, TL.DomMixins],\n\t\n\t_el: {},\n\t\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(data) {\n\t\t\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tparent: {},\n\t\t\tcontainer: {},\n\t\t\tmessage: {}\n\t\t};\n\t\t\n\t\t//Options\n\t\tthis.options = {\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600\n\t\t};\n\t\t\n\t\t// Data\n\t\tthis.data = {\n\t\t\tlabel: \"\",\n\t\t\trows: 1\n\t\t};\n\t\t\n\t\t\n\t\tthis._el.container = TL.Dom.create(\"div\", \"tl-timegroup\"); \n\t\t\n\t\t// Merge Data\n\t\tTL.Util.mergeData(this.data, data);\n\t\t\n\t\t// Animation\n\t\tthis.animator = {};\n\t\t\n\t\t\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t},\n\t\n\t/*\tPublic\n\t================================================== */\n\t\n\t\n\t\n\t/*\tUpdate Display\n\t================================================== */\n\tupdateDisplay: function(w, h) {\n\t\t\n\t},\n\t\n\tsetRowPosition: function(n, h) {\n\t\t// trace(n);\n\t\t// trace(this._el.container)\n\t\tthis.options.height = h * this.data.rows;\n\t\tthis.setPosition({top:n});\n\t\tthis._el.container.style.height = this.options.height + \"px\";\n\t\t\n\t},\n\t\n\tsetAlternateRowColor: function(alternate, hide) {\n\t\tvar class_name = \"tl-timegroup\";\n\t\tif (alternate) {\n\t\t\tclass_name += \" tl-timegroup-alternate\";\n\t\t}\n\t\tif (hide) {\n\t\t\tclass_name += \" tl-timegroup-hidden\";\n\t\t}\n\t\tthis._el.container.className = class_name;\n\t},\n\t\n\t/*\tEvents\n\t================================================== */\n\n\t\n\t_onMouseClick: function() {\n\t\tthis.fire(\"clicked\", this.options);\n\t},\n\n\t\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\t\n\t\t// Create Layout\n\t\tthis._el.message = TL.Dom.create(\"div\", \"tl-timegroup-message\", this._el.container);\n\t\tthis._el.message.innerHTML = this.data.label;\n\t\t\n\t\t\n\t},\n\t\n\t_initEvents: function () {\n\t\tTL.DomEvent.addListener(this._el.container, 'click', this._onMouseClick, this);\n\t},\n\t\n\t// Update Display\n\t_updateDisplay: function(width, height, animate) {\n\t\t\n\t}\n\t\n});\n\n/* **********************************************\n     Begin TL.TimeScale.js\n********************************************** */\n\n/*  TL.TimeScale\n    Strategies for laying out the timenav\n    make a new one if the slides change\n\n    TODOS: deal with clustering\n================================================== */\nTL.TimeScale = TL.Class.extend({\n\n    initialize: function (timeline_config, options) {\n\n        var slides = timeline_config.events;\n        this._scale = timeline_config.scale;\n\n        options = TL.Util.mergeData({ // establish defaults\n            display_width: 500,\n            screen_multiplier: 3,\n            max_rows: null\n        }, options);\n\n        this._display_width = options.display_width;\n        this._screen_multiplier = options.screen_multiplier;\n        this._pixel_width = this._screen_multiplier * this._display_width;\n\n        this._group_labels = undefined;\n        this._positions = [];\n        this._pixels_per_milli = 0;\n\n        this._earliest = timeline_config.getEarliestDate().getTime();\n        this._latest = timeline_config.getLatestDate().getTime();\n        this._span_in_millis = this._latest - this._earliest;\n        if (this._span_in_millis <= 0) {\n            this._span_in_millis = this._computeDefaultSpan(timeline_config);\n        }\n        this._average = (this._span_in_millis)/slides.length;\n\n        this._pixels_per_milli = this.getPixelWidth() / this._span_in_millis;\n\n        this._axis_helper = TL.AxisHelper.getBestHelper(this);\n\n        this._scaled_padding = (1/this.getPixelsPerTick()) * (this._display_width/2)\n        this._computePositionInfo(slides, options.max_rows);\n    },\n\n    _computeDefaultSpan: function(timeline_config) {\n        // this gets called when all events are at the same instant,\n        // or maybe when the span_in_millis is > 0 but still below a desired threshold\n        // TODO: does this need smarts about eras?\n        if (timeline_config.scale == 'human') {\n            var formats = {}\n            for (var i = 0; i < timeline_config.events.length; i++) {\n                var fmt = timeline_config.events[i].start_date.findBestFormat();\n                formats[fmt] = (formats[fmt]) ? formats[fmt] + 1 : 1;\n            };\n\n            for (var i = TL.Date.SCALES.length - 1; i >= 0; i--) {\n                if (formats.hasOwnProperty(TL.Date.SCALES[i][0])) {\n                    var scale = TL.Date.SCALES[TL.Date.SCALES.length - 1]; // default\n                    if (TL.Date.SCALES[i+1]) {\n                        scale = TL.Date.SCALES[i+1]; // one larger than the largest in our data\n                    }\n                    return scale[1]\n                }\n            };\n            return 365 * 24 * 60 * 60 * 1000; // default to a year?\n        }\n\n        return 200000; // what is the right handling for cosmo dates?\n    },\n    getGroupLabels: function() { /*\n        return an array of objects, one per group, in the order (top to bottom) that the groups are expected to appear. Each object will have two properties:\n            * label (the string as specified in one or more 'group' properties of events in the configuration)\n            * rows (the number of rows occupied by events associated with the label. )\n        */\n        return (this._group_labels || []);\n    },\n\n    getScale: function() {\n        return this._scale;\n    },\n\n    getNumberOfRows: function() {\n        return this._number_of_rows\n    },\n\n    getPixelWidth: function() {\n        return this._pixel_width;\n    },\n\n    getPosition: function(time_in_millis) {\n        // be careful using millis, as they won't scale to cosmological time.\n        // however, we're moving to make the arg to this whatever value\n        // comes from TL.Date.getTime() which could be made smart about that --\n        // so it may just be about the naming.\n        return ( time_in_millis - this._earliest ) * this._pixels_per_milli\n    },\n\n    getPositionInfo: function(idx) {\n        return this._positions[idx];\n    },\n\n    getPixelsPerTick: function() {\n        return this._axis_helper.getPixelsPerTick(this._pixels_per_milli);\n    },\n\n    getTicks: function() {\n        return {\n            major: this._axis_helper.getMajorTicks(this),\n            minor: this._axis_helper.getMinorTicks(this) }\n    },\n\n    getDateFromTime: function(t) {\n        if(this._scale == 'human') {\n            return new TL.Date(t);\n        } else if(this._scale == 'cosmological') {\n            return new TL.BigDate(new TL.BigYear(t));\n        }\n        throw new TL.Error(\"time_scale_scale_err\", this._scale);\n    },\n\n    getMajorScale: function() {\n        return this._axis_helper.major.name;\n    },\n\n    getMinorScale: function() {\n        return this._axis_helper.minor.name;\n    },\n\n    _assessGroups: function(slides) {\n        var groups = [];\n        var empty_group = false;\n        for (var i = 0; i < slides.length; i++) {\n            if(slides[i].group) {\n                if(groups.indexOf(slides[i].group) < 0) {\n                    groups.push(slides[i].group);\n                } else {\n                    empty_group = true;\n                }\n            }\n        };\n        if (groups.length && empty_group) {\n            groups.push('');\n        }\n        return groups;\n    },\n\n    /*  Compute the marker row positions, minimizing the number of\n        overlaps.\n\n        @positions = list of objects from this._positions\n        @rows_left = number of rows available (assume > 0)\n    */\n    _computeRowInfo: function(positions, rows_left) {\n        var lasts_in_row = [];\n        var n_overlaps = 0;\n\n        for (var i = 0; i < positions.length; i++) {\n            var pos_info = positions[i];\n            var overlaps = [];\n\n            // See if we can add item to an existing row without\n            // overlapping the previous item in that row\n            delete pos_info.row;\n\n            for (var j = 0; j < lasts_in_row.length; j++) {\n                overlaps.push(lasts_in_row[j].end - pos_info.start);\n                if(overlaps[j] <= 0) {\n                    pos_info.row = j;\n                    lasts_in_row[j] = pos_info;\n                    break;\n                }\n            }\n\n            // If we couldn't add to an existing row without overlap...\n            if (typeof(pos_info.row) == 'undefined') {\n                if (rows_left === null) {\n                    // Make a new row\n                    pos_info.row = lasts_in_row.length;\n                    lasts_in_row.push(pos_info);\n                } else if (rows_left > 0) {\n                    // Make a new row\n                    pos_info.row = lasts_in_row.length;\n                    lasts_in_row.push(pos_info);\n                    rows_left--;\n                } else {\n                    // Add to existing row with minimum overlap.\n                    var min_overlap = Math.min.apply(null, overlaps);\n                    var idx = overlaps.indexOf(min_overlap);\n                    pos_info.row = idx;\n                    if (pos_info.end > lasts_in_row[idx].end) {\n                        lasts_in_row[idx] = pos_info;\n                    }\n                    n_overlaps++;\n                }\n            }\n        }\n\n        return {n_rows: lasts_in_row.length, n_overlaps: n_overlaps};\n    },\n\n    /*  Compute marker positions.  If using groups, this._number_of_rows\n        will never be less than the number of groups.\n\n        @max_rows = total number of available rows\n        @default_marker_width should be in pixels\n    */\n    _computePositionInfo: function(slides, max_rows, default_marker_width) {\n        default_marker_width = default_marker_width || 100;\n\n        var groups = [];\n        var empty_group = false;\n\n        // Set start/end/width; enumerate groups\n        for (var i = 0; i < slides.length; i++) {\n            var pos_info = {\n                start: this.getPosition(slides[i].start_date.getTime())\n            };\n            this._positions.push(pos_info);\n\n            if (typeof(slides[i].end_date) != 'undefined') {\n                var end_pos = this.getPosition(slides[i].end_date.getTime());\n                pos_info.width = end_pos - pos_info.start;\n                if (pos_info.width > default_marker_width) {\n                    pos_info.end = pos_info.start + pos_info.width;\n                } else {\n                    pos_info.end = pos_info.start + default_marker_width;\n                }\n            } else {\n                pos_info.width = default_marker_width;\n                pos_info.end = pos_info.start + default_marker_width;\n            }\n\n            if(slides[i].group) {\n                if(groups.indexOf(slides[i].group) < 0) {\n                    groups.push(slides[i].group);\n                }\n            } else {\n                empty_group = true;\n            }\n        }\n\n        if(!(groups.length)) {\n            var result = this._computeRowInfo(this._positions, max_rows);\n            this._number_of_rows = result.n_rows;\n        } else {\n            if(empty_group) {\n                groups.push(\"\");\n            }\n\n            // Init group info\n            var group_info = [];\n\n            for(var i = 0; i < groups.length; i++) {\n                group_info[i] = {\n                    label: groups[i],\n                    idx: i,\n                    positions: [],\n                    n_rows: 1,      // default\n                    n_overlaps: 0\n                };\n            }\n\n            for(var i = 0; i < this._positions.length; i++) {\n                var pos_info = this._positions[i];\n\n                pos_info.group = groups.indexOf(slides[i].group || \"\");\n                pos_info.row = 0;\n\n                var gi = group_info[pos_info.group];\n                for(var j = gi.positions.length - 1; j >= 0; j--) {\n                    if(gi.positions[j].end > pos_info.start) {\n                        gi.n_overlaps++;\n                    }\n                }\n\n                gi.positions.push(pos_info);\n            }\n\n            var n_rows = groups.length; // start with 1 row per group\n\n            while(true) {\n                // Count free rows available\n                var rows_left = Math.max(0, max_rows - n_rows);\n                if(!rows_left) {\n                    break;  // no free rows, nothing to do\n                }\n\n                // Sort by # overlaps, idx\n               group_info.sort(function(a, b) {\n                    if(a.n_overlaps > b.n_overlaps) {\n                        return -1;\n                    } else if(a.n_overlaps < b.n_overlaps) {\n                        return 1;\n                    }\n                    return a.idx - b.idx;\n                });\n                if(!group_info[0].n_overlaps) {\n                    break; // no overlaps, nothing to do\n                }\n\n                // Distribute free rows among groups with overlaps\n                var n_rows = 0;\n                for(var i = 0; i < group_info.length; i++) {\n                    var gi = group_info[i];\n\n                    if(gi.n_overlaps && rows_left) {\n                        var res = this._computeRowInfo(gi.positions,  gi.n_rows + 1);\n                        gi.n_rows = res.n_rows;     // update group info\n                        gi.n_overlaps = res.n_overlaps;\n                        rows_left--;                // update rows left\n                    }\n\n                    n_rows += gi.n_rows;            // update rows used\n                }\n            }\n\n            // Set number of rows\n            this._number_of_rows = n_rows;\n\n            // Set group labels; offset row positions\n            this._group_labels = [];\n\n            group_info.sort(function(a, b) {return a.idx - b.idx; });\n\n            for(var i = 0, row_offset = 0; i < group_info.length; i++) {\n                this._group_labels.push({\n                    label: group_info[i].label,\n                    rows: group_info[i].n_rows\n                });\n\n                for(var j = 0; j < group_info[i].positions.length; j++) {\n                    var pos_info = group_info[i].positions[j];\n                    pos_info.row += row_offset;\n                }\n\n                row_offset += group_info[i].n_rows;\n            }\n        }\n\n    }\n});\n\n\n/* **********************************************\n     Begin TL.TimeAxis.js\n********************************************** */\n\n/*\tTL.TimeAxis\n\tDisplay element for showing timescale ticks\n================================================== */\n\nTL.TimeAxis = TL.Class.extend({\n\n\tincludes: [TL.Events, TL.DomMixins, TL.I18NMixins],\n\n\t_el: {},\n\n\t/*\tConstructor\n\t================================================== */\n\tinitialize: function(elem, options) {\n\t\t// DOM Elements\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tcontent_container: {},\n\t\t\tmajor: {},\n\t\t\tminor: {},\n\t\t};\n\n\t\t// Components\n\t\tthis._text\t\t\t= {};\n\n\t\t// State\n\t\tthis._state = {\n\t\t\tloaded: \t\tfalse\n\t\t};\n\n\n\t\t// Data\n\t\tthis.data = {};\n\n\t\t// Options\n\t\tthis.options = {\n\t\t\tduration: \t\t\t\t1000,\n\t\t\tease: \t\t\t\t\tTL.Ease.easeInSpline,\n\t\t\twidth: \t\t\t\t\t600,\n\t\t\theight: \t\t\t\t600\n\t\t};\n\n\t\t// Actively Displaying\n\t\tthis.active = false;\n\n\t\t// Animation Object\n\t\tthis.animator = {};\n\n\t\t// Axis Helper\n\t\tthis.axis_helper = {};\n\n\t\t// Minor tick dom element array\n\t\tthis.minor_ticks = [];\n\n\t\t// Minor tick dom element array\n\t\tthis.major_ticks = [];\n\n\t\t// Date Format Lookup, map TL.Date.SCALES names to...\n\t\tthis.dateformat_lookup = {\n\t        millisecond: 'time_milliseconds',     // ...TL.Language.<code>.dateformats\n\t        second: 'time_short',\n\t        minute: 'time_no_seconds_short',\n\t        hour: 'time_no_minutes_short',\n\t        day: 'full_short',\n\t        month: 'month_short',\n\t        year: 'year',\n\t        decade: 'year',\n\t        century: 'year',\n\t        millennium: 'year',\n\t        age: 'compact',  // ...TL.Language.<code>.bigdateformats\n\t        epoch: 'compact',\n\t        era: 'compact',\n\t        eon: 'compact',\n\t        eon2: 'compact'\n\t    }\n\n\t\t// Main element\n\t\tif (typeof elem === 'object') {\n\t\t\tthis._el.container = elem;\n\t\t} else {\n\t\t\tthis._el.container = TL.Dom.get(elem);\n\t\t}\n\n\t\t// Merge Data and Options\n\t\tTL.Util.mergeData(this.options, options);\n\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\n\t},\n\n\t/*\tAdding, Hiding, Showing etc\n\t================================================== */\n\tshow: function() {\n\n\t},\n\n\thide: function() {\n\n\t},\n\n\taddTo: function(container) {\n\t\tcontainer.appendChild(this._el.container);\n\t},\n\n\tremoveFrom: function(container) {\n\t\tcontainer.removeChild(this._el.container);\n\t},\n\n\tupdateDisplay: function(w, h) {\n\t\tthis._updateDisplay(w, h);\n\t},\n\n\tgetLeft: function() {\n\t\treturn this._el.container.style.left.slice(0, -2);\n\t},\n\n\tdrawTicks: function(timescale, optimal_tick_width) {\n\n\t\tvar ticks = timescale.getTicks();\n\n\t\tvar controls = {\n\t\t\tminor: {\n\t\t\t\tel: this._el.minor,\n\t\t\t\tdateformat: this.dateformat_lookup[ticks['minor'].name],\n\t\t\t\tts_ticks: ticks['minor'].ticks,\n\t\t\t\ttick_elements: this.minor_ticks\n\t\t\t},\n\t\t\tmajor: {\n\t\t\t\tel: this._el.major,\n\t\t\t\tdateformat: this.dateformat_lookup[ticks['major'].name],\n\t\t\t\tts_ticks: ticks['major'].ticks,\n\t\t\t\ttick_elements: this.major_ticks\n\t\t\t}\n\t\t}\n\t\t// FADE OUT\n\t\tthis._el.major.className = \"tl-timeaxis-major\";\n\t\tthis._el.minor.className = \"tl-timeaxis-minor\";\n\t\tthis._el.major.style.opacity = 0;\n\t\tthis._el.minor.style.opacity = 0;\n\n\t\t// CREATE MAJOR TICKS\n\t\tthis.major_ticks = this._createTickElements(\n\t\t\tticks['major'].ticks,\n\t\t\tthis._el.major,\n\t\t\tthis.dateformat_lookup[ticks['major'].name]\n\t\t);\n\n\t\t// CREATE MINOR TICKS\n\t\tthis.minor_ticks = this._createTickElements(\n\t\t\tticks['minor'].ticks,\n\t\t\tthis._el.minor,\n\t\t\tthis.dateformat_lookup[ticks['minor'].name],\n\t\t\tticks['major'].ticks\n\t\t);\n\n\t\tthis.positionTicks(timescale, optimal_tick_width, true);\n\n\t\t// FADE IN\n\t\tthis._el.major.className = \"tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity\";\n\t\tthis._el.minor.className = \"tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity\";\n\t\tthis._el.major.style.opacity = 1;\n\t\tthis._el.minor.style.opacity = 1;\n\t},\n\n\t_createTickElements: function(ts_ticks,tick_element,dateformat,ticks_to_skip) {\n\t\ttick_element.innerHTML = \"\";\n\t\tvar skip_times = {};\n\n\t\tvar yearZero = new Date(-1,13,-30);\n\t\tskip_times[yearZero.getTime()] = true;\n\n\t\tif (ticks_to_skip){\n\t\t\tfor (var i = 0; i < ticks_to_skip.length; i++) {\n\t\t\t\tskip_times[ticks_to_skip[i].getTime()] = true;\n\t\t\t}\n\t\t}\n\n\t\tvar tick_elements = []\n\t\tfor (var i = 0; i < ts_ticks.length; i++) {\n\t\t\tvar ts_tick = ts_ticks[i];\n\t\t\tif (!(ts_tick.getTime() in skip_times)) {\n\t\t\t\tvar tick = TL.Dom.create(\"div\", \"tl-timeaxis-tick\", tick_element),\n\t\t\t\t\ttick_text \t= TL.Dom.create(\"span\", \"tl-timeaxis-tick-text tl-animate-opacity\", tick);\n\n\t\t\t\ttick_text.innerHTML = ts_tick.getDisplayDate(this.getLanguage(), dateformat);\n\n\t\t\t\ttick_elements.push({\n\t\t\t\t\ttick:tick,\n\t\t\t\t\ttick_text:tick_text,\n\t\t\t\t\tdisplay_date:ts_tick.getDisplayDate(this.getLanguage(), dateformat),\n\t\t\t\t\tdate:ts_tick\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn tick_elements;\n\t},\n\n\tpositionTicks: function(timescale, optimal_tick_width, no_animate) {\n\n\t\t// Handle Animation\n\t\tif (no_animate) {\n\t\t\tthis._el.major.className = \"tl-timeaxis-major\";\n\t\t\tthis._el.minor.className = \"tl-timeaxis-minor\";\n\t\t} else {\n\t\t\tthis._el.major.className = \"tl-timeaxis-major tl-timeaxis-animate\";\n\t\t\tthis._el.minor.className = \"tl-timeaxis-minor tl-timeaxis-animate\";\n\t\t}\n\n\t\tthis._positionTickArray(this.major_ticks, timescale, optimal_tick_width);\n\t\tthis._positionTickArray(this.minor_ticks, timescale, optimal_tick_width);\n\n\t},\n\n\t_positionTickArray: function(tick_array, timescale, optimal_tick_width) {\n\t\t// Poition Ticks & Handle density of ticks\n\t\tif (tick_array[1] && tick_array[0]) {\n\t\t\tvar distance = ( timescale.getPosition(tick_array[1].date.getMillisecond()) - timescale.getPosition(tick_array[0].date.getMillisecond()) ),\n\t\t\t\tfraction_of_array = 1;\n\n\n\t\t\tif (distance < optimal_tick_width) {\n\t\t\t\tfraction_of_array = Math.round(optimal_tick_width/timescale.getPixelsPerTick());\n\t\t\t}\n\n\t\t\tvar show = 1;\n\n\t\t\tfor (var i = 0; i < tick_array.length; i++) {\n\n\t\t\t\tvar tick = tick_array[i];\n\n\t\t\t\t// Poition Ticks\n\t\t\t\ttick.tick.style.left = timescale.getPosition(tick.date.getMillisecond()) + \"px\";\n\t\t\t\ttick.tick_text.innerHTML = tick.display_date;\n\n\t\t\t\t// Handle density of ticks\n\t\t\t\tif (fraction_of_array > 1) {\n\t\t\t\t\tif (show >= fraction_of_array) {\n\t\t\t\t\t\tshow = 1;\n\t\t\t\t\t\ttick.tick_text.style.opacity = 1;\n\t\t\t\t\t\ttick.tick.className = \"tl-timeaxis-tick\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshow++;\n\t\t\t\t\t\ttick.tick_text.style.opacity = 0;\n\t\t\t\t\t\ttick.tick.className = \"tl-timeaxis-tick tl-timeaxis-tick-hidden\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttick.tick_text.style.opacity = 1;\n\t\t\t\t\ttick.tick.className = \"tl-timeaxis-tick\";\n\t\t\t\t}\n\n\t\t\t};\n\t\t}\n\t},\n\n\t/*\tEvents\n\t================================================== */\n\n\n\t/*\tPrivate Methods\n\t================================================== */\n\t_initLayout: function () {\n\t\tthis._el.content_container\t\t= TL.Dom.create(\"div\", \"tl-timeaxis-content-container\", this._el.container);\n\t\tthis._el.major\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-timeaxis-major\", this._el.content_container);\n\t\tthis._el.minor\t\t\t\t\t= TL.Dom.create(\"div\", \"tl-timeaxis-minor\", this._el.content_container);\n\n\t\t// Fire event that the slide is loaded\n\t\tthis.onLoaded();\n\t},\n\n\t_initEvents: function() {\n\n\t},\n\n\t// Update Display\n\t_updateDisplay: function(width, height, layout) {\n\n\t\tif (width) {\n\t\t\tthis.options.width \t\t\t\t\t= width;\n\t\t}\n\n\t\tif (height) {\n\t\t\tthis.options.height = height;\n\t\t}\n\n\t}\n\n});\n\n\n/* **********************************************\n     Begin TL.AxisHelper.js\n********************************************** */\n\n/*  TL.AxisHelper\n    Strategies for laying out the timenav\n    markers and time axis\n    Intended as a private class -- probably only known to TimeScale\n================================================== */\nTL.AxisHelper = TL.Class.extend({\n    initialize: function (options) {\n\t\tif (options) {\n            this.scale = options.scale;\n\t        this.minor = options.minor;\n\t        this.major = options.major;\n\t\t} else {\n            throw new TL.Error(\"axis_helper_no_options_err\")\n        }\n       \n    },\n    \n    getPixelsPerTick: function(pixels_per_milli) {\n        return pixels_per_milli * this.minor.factor;\n    },\n\n    getMajorTicks: function(timescale) {\n\t\treturn this._getTicks(timescale, this.major)\n    },\n\n    getMinorTicks: function(timescale) {\n        return this._getTicks(timescale, this.minor)\n    },\n\n    _getTicks: function(timescale, option) {\n\n        var factor_scale = timescale._scaled_padding * option.factor;\n        var first_tick_time = timescale._earliest - factor_scale;\n        var last_tick_time = timescale._latest + factor_scale;\n        var ticks = []\n        for (var i = first_tick_time; i < last_tick_time; i += option.factor) {\n            ticks.push(timescale.getDateFromTime(i).floor(option.name));\n        }\n\n        return {\n            name: option.name,\n            ticks: ticks\n        }\n\n    }\n\n});\n\n(function(cls){ // add some class-level behavior\n\n    var HELPERS = {};\n    \n    var setHelpers = function(scale_type, scales) {\n        HELPERS[scale_type] = [];\n        \n        for (var idx = 0; idx < scales.length - 1; idx++) {\n            var minor = scales[idx];\n            var major = scales[idx+1];\n            HELPERS[scale_type].push(new cls({\n                scale: minor[3],\n                minor: { name: minor[0], factor: minor[1]},\n                major: { name: major[0], factor: major[1]}\n            }));\n        }\n    };\n    \n    setHelpers('human', TL.Date.SCALES);\n    setHelpers('cosmological', TL.BigDate.SCALES);\n    \n    cls.HELPERS = HELPERS;\n    \n    cls.getBestHelper = function(ts,optimal_tick_width) {\n        if (typeof(optimal_tick_width) != 'number' ) {\n            optimal_tick_width = 100;\n        }\n        var ts_scale = ts.getScale();\n        var helpers = HELPERS[ts_scale];\n        \n        if (!helpers) {\n            throw new TL.Error(\"axis_helper_scale_err\", ts_scale);\n        }\n        \n        var prev = null;\n        for (var idx = 0; idx < helpers.length; idx++) {\n            var curr = helpers[idx];\n            var pixels_per_tick = curr.getPixelsPerTick(ts._pixels_per_milli);\n            if (pixels_per_tick > optimal_tick_width)  {\n                if (prev == null) return curr;\n                var curr_dist = Math.abs(optimal_tick_width - pixels_per_tick);\n                var prev_dist = Math.abs(optimal_tick_width - pixels_per_tick);\n                if (curr_dist < prev_dist) {\n                    return curr;\n                } else {\n                    return prev;\n                }\n            }\n            prev = curr;\n        }\n        return helpers[helpers.length - 1]; // last resort           \n    }\n})(TL.AxisHelper);\n\n\n/* **********************************************\n     Begin TL.Timeline.js\n********************************************** */\n\n/*  TimelineJS\nDesigned and built by Zach Wise at KnightLab\n\nThis Source Code Form is subject to the terms of the Mozilla Public\nLicense, v. 2.0. If a copy of the MPL was not distributed with this\nfile, You can obtain one at https://mozilla.org/MPL/2.0/.\n\n================================================== */\n/*\nTODO\n\n*/\n\n/*  Required Files\nCodeKit Import\nhttps://incident57.com/codekit/\n================================================== */\n\n// CORE\n\t// @codekit-prepend \"core/TL.js\";\n\t// @codekit-prepend \"core/TL.Error.js\";\n\t// @codekit-prepend \"core/TL.Util.js\";\n\t// @codekit-prepend \"data/TL.Data.js\";\n\t// @codekit-prepend \"core/TL.Class.js\";\n\t// @codekit-prepend \"core/TL.Events.js\";\n\t// @codekit-prepend \"core/TL.Browser.js\";\n\t// @codekit-prepend \"core/TL.Load.js\";\n\t// @codekit-prepend \"core/TL.TimelineConfig.js\";\n\t// @codekit-prepend \"core/TL.ConfigFactory.js\";\n\n\n// LANGUAGE\n\t// @codekit-prepend \"language/TL.Language.js\";\n\t// @codekit-prepend \"language/TL.I18NMixins.js\";\n\n// ANIMATION\n\t// @codekit-prepend \"animation/TL.Ease.js\";\n\t// @codekit-prepend \"animation/TL.Animate.js\";\n\n// DOM\n\t// @codekit-prepend \"dom/TL.Point.js\";\n\t// @codekit-prepend \"dom/TL.DomMixins.js\";\n\t// @codekit-prepend \"dom/TL.Dom.js\";\n\t// @codekit-prepend \"dom/TL.DomUtil.js\";\n\t// @codekit-prepend \"dom/TL.DomEvent.js\";\n\t// @codekit-prepend \"dom/TL.StyleSheet.js\";\n\n// Date\n\t// @codekit-prepend \"date/TL.Date.js\";\n\t// @codekit-prepend \"date/TL.DateUtil.js\";\n\n// UI\n\t// @codekit-prepend \"ui/TL.Draggable.js\";\n\t// @codekit-prepend \"ui/TL.Swipable.js\";\n\t// @codekit-prepend \"ui/TL.MenuBar.js\";\n\t// @codekit-prepend \"ui/TL.Message.js\";\n\n// MEDIA\n\t// @codekit-prepend \"media/TL.MediaType.js\";\n\t// @codekit-prepend \"media/TL.Media.js\";\n\n// MEDIA TYPES\n\t// @codekit-prepend \"media/types/TL.Media.Blockquote.js\";\n\t// @codekit-prepend \"media/types/TL.Media.DailyMotion.js\";\n\t// @codekit-prepend \"media/types/TL.Media.DocumentCloud.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Flickr.js\";\n\t// @codekit-prepend \"media/types/TL.Media.GoogleDoc.js\";\n\t// @codekit-prepend \"media/types/TL.Media.GooglePlus.js\";\n\t// @codekit-prepend \"media/types/TL.Media.IFrame.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Image.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Imgur.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Instagram.js\";\n\t// @codekit-prepend \"media/types/TL.Media.GoogleMap.js\";\n\t// @codekit-prepend \"media/types/TL.Media.PDF.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Profile.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Slider.js\";\n\t// @codekit-prepend \"media/types/TL.Media.SoundCloud.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Spotify.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Storify.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Text.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Twitter.js\";\n\t// @codekit-prepend \"media/types/TL.Media.TwitterEmbed.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Vimeo.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Vine.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Website.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Wikipedia.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Wistia.js\";\n\t// @codekit-prepend \"media/types/TL.Media.YouTube.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Audio.js\";\n\t// @codekit-prepend \"media/types/TL.Media.Video.js\";\n\n// STORYSLIDER\n\t// @codekit-prepend \"slider/TL.Slide.js\";\n\t// @codekit-prepend \"slider/TL.SlideNav.js\";\n\t// @codekit-prepend \"slider/TL.StorySlider.js\";\n\n// TIMENAV\n\t// @codekit-prepend \"timenav/TL.TimeNav.js\";\n\t// @codekit-prepend \"timenav/TL.TimeMarker.js\";\n\t// @codekit-prepend \"timenav/TL.TimeEra.js\";\n\t// @codekit-prepend \"timenav/TL.TimeGroup.js\";\n\t// @codekit-prepend \"timenav/TL.TimeScale.js\";\n\t// @codekit-prepend \"timenav/TL.TimeAxis.js\";\n\t// @codekit-prepend \"timenav/TL.AxisHelper.js\";\n\n\nTL.Timeline = TL.Class.extend({\n\tincludes: [TL.Events, TL.I18NMixins],\n\n\t/*  Private Methods\n\t================================================== */\n\tinitialize: function (elem, data, options) {\n\t\tvar self = this;\n\t\tif (!options) { options = {}};\n\t\t// Version\n\t\tthis.version = \"3.2.6\";\n\n\t\t// Ready\n\t\tthis.ready = false;\n\n\t\t// DOM ELEMENTS\n\t\tthis._el = {\n\t\t\tcontainer: {},\n\t\t\tstoryslider: {},\n\t\t\ttimenav: {},\n\t\t\tmenubar: {}\n\t\t};\n\n\t\t// Determine Container Element\n\t\tif (typeof elem === 'object') {\n\t\t\tthis._el.container = elem;\n\t\t} else {\n\t\t\tthis._el.container = TL.Dom.get(elem);\n\t\t}\n\n\t\t// Slider\n\t\tthis._storyslider = {};\n\n\t\t// Style Sheet\n\t\tthis._style_sheet = new TL.StyleSheet();\n\n\t\t// TimeNav\n\t\tthis._timenav = {};\n\n\t\t// Menu Bar\n\t\tthis._menubar = {};\n\n\t\t// Loaded State\n\t\tthis._loaded = {storyslider:false, timenav:false};\n\n\t\t// Data Object\n\t\tthis.config = null;\n\n\t\tthis.options = {\n\t\t\tscript_path: \t\t\t\t\"\",\n\t\t\theight: \t\t\t\t\tthis._el.container.offsetHeight,\n\t\t\twidth: \t\t\t\t\t\tthis._el.container.offsetWidth,\n\t\t\tdebug: \t\t\t\t\t\tfalse,\n\t\t\tis_embed: \t\t\t\t\tfalse,\n\t\t\tis_full_embed: \t\t\t\tfalse,\n\t\t\thash_bookmark: false,\n\t\t\tdefault_bg_color: \t\t\t{r:255, g:255, b:255},\n\t\t\tscale_factor: \t\t\t\t2,\t\t\t\t\t\t// How many screen widths wide should the timeline be\n\t\t\tlayout: \t\t\t\t\t\"landscape\",\t\t\t// portrait or landscape\n\t\t\ttimenav_position: \t\t\t\"bottom\",\t\t\t\t// timeline on top or bottom\n\t\t\toptimal_tick_width: \t\t60,\t\t\t\t\t\t// optimal distance (in pixels) between ticks on axis\n\t\t\tbase_class: \t\t\t\t\"tl-timeline\", \t\t// removing tl-timeline will break all default stylesheets...\n\t\t\ttimenav_height: \t\t\tnull,\n\t\t\ttimenav_height_percentage: \t25,\t\t\t\t\t\t// Overrides timenav height as a percentage of the screen\n\t\t\ttimenav_mobile_height_percentage: 40, \t\t\t\t// timenav height as a percentage on mobile devices\n\t\t\ttimenav_height_min: \t\t175,\t\t\t\t\t// Minimum timenav height\n\t\t\tmarker_height_min: \t\t\t30,\t\t\t\t\t\t// Minimum Marker Height\n\t\t\tmarker_width_min: \t\t\t100,\t\t\t\t\t// Minimum Marker Width\n\t\t\tmarker_padding: \t\t\t5,\t\t\t\t\t\t// Top Bottom Marker Padding\n\t\t\tstart_at_slide: \t\t\t0,\n\t\t\tstart_at_end: \t\t\t\tfalse,\n\t\t\tmenubar_height: \t\t\t0,\n\t\t\tskinny_size: \t\t\t\t650,\n\t\t\tmedium_size: \t\t\t\t800,\n\t\t\trelative_date: \t\t\t\tfalse,\t\t\t\t\t// Use momentjs to show a relative date from the slide.text.date.created_time field\n\t\t\tuse_bc: \t\t\t\t\tfalse,\t\t\t\t\t// Use declared suffix on dates earlier than 0\n\t\t\t// animation\n\t\t\tduration: \t\t\t\t\t1000,\n\t\t\tease: \t\t\t\t\t\tTL.Ease.easeInOutQuint,\n\t\t\t// interaction\n\t\t\tdragging: \t\t\t\t\ttrue,\n\t\t\ttrackResize: \t\t\t\ttrue,\n\t\t\tmap_type: \t\t\t\t\t\"stamen:toner-lite\",\n\t\t\tslide_padding_lr: \t\t\t100,\t\t\t\t\t// padding on slide of slide\n\t\t\tslide_default_fade: \t\t\"0%\",\t\t\t\t\t// landscape fade\n\t\t\tzoom_sequence: \t\t\t\t[0.5, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89], // Array of Fibonacci numbers for TimeNav zoom levels\n\t\t\tlanguage: \t\t\t\t\t\"en\",\n\t\t\tga_property_id: \t\t\tnull,\n\t\t\ttrack_events: \t\t\t\t['back_to_start','nav_next','nav_previous','zoom_in','zoom_out' ]\n\t\t};\n\n\t\t// Animation Objects\n\t\tthis.animator_timenav = null;\n\t\tthis.animator_storyslider = null;\n\t\tthis.animator_menubar = null;\n\n\t\t// Add message to DOM\n\t\tthis.message = new TL.Message({}, {message_class: \"tl-message-full\"}, this._el.container);\n\n\t\t// Merge Options\n\t\tif (typeof(options.default_bg_color) == \"string\") {\n\t\t\tvar parsed = TL.Util.hexToRgb(options.default_bg_color); // will clear it out if its invalid\n\t\t\tif (parsed) {\n\t\t\t\toptions.default_bg_color = parsed;\n\t\t\t} else {\n\t\t\t\tdelete options.default_bg_color\n\t\t\t\ttrace(\"Invalid default background color. Ignoring.\");\n\t\t\t}\n\t\t}\n\t\tTL.Util.mergeData(this.options, options);\n\n\t\twindow.addEventListener(\"resize\", function(e){\n\t\t\tself.updateDisplay();\n\t\t});\n\n\t\t// Set Debug Mode\n\t\tTL.debug = this.options.debug;\n\n\t\t// Apply base class to container\n\t\tTL.DomUtil.addClass(this._el.container, 'tl-timeline');\n\n\t\tif (this.options.is_embed) {\n\t\t\tTL.DomUtil.addClass(this._el.container, 'tl-timeline-embed');\n\t\t}\n\n\t\tif (this.options.is_full_embed) {\n\t\t\tTL.DomUtil.addClass(this._el.container, 'tl-timeline-full-embed');\n\t\t}\n\n\t\tdocument.addEventListener(\"keydown\", function(event) {\n\t\t\tvar keyName = event.key;\n\t\t\tvar currentSlide = self._getSlideIndex(self.current_id);\n\t\t\tvar _n = self.config.events.length - 1;\n\t\t\tvar lastSlide = self.config.title ? _n + 1 : _n;\n\t\t\tvar firstSlide = 0;\n\n\t\t\tif (keyName == 'ArrowLeft'){\n\t\t\t\tif (currentSlide!=firstSlide){\n\t\t\t\t\tself.goToPrev();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (keyName == 'ArrowRight'){\n\t\t\t\tif (currentSlide!=lastSlide){\n\t\t\t\t\tself.goToNext();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Use Relative Date Calculations\n\t\t// NOT YET IMPLEMENTED\n\t\tif(this.options.relative_date) {\n\t\t\tif (typeof(moment) !== 'undefined') {\n\t\t\t\tself._loadLanguage(data);\n\t\t\t} else {\n\t\t\t\tTL.Load.js(this.options.script_path + \"/library/moment.js\", function() {\n\t\t\t\t\tself._loadLanguage(data);\n\t\t\t\t\ttrace(\"LOAD MOMENTJS\")\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tself._loadLanguage(data);\n\t\t}\n\n\t},\n\t_translateError: function(e) {\n\t    if(e.hasOwnProperty('stack')) {\n\t        trace(e.stack);\n\t    }\n\t    if(e.message_key) {\n\t        return this._(e.message_key) + (e.detail ? ' [' + e.detail +']' : '')\n\t    }\n\t    return e;\n\t},\n\n\t/*  Load Language\n\t================================================== */\n\t_loadLanguage: function(data) {\n\t\ttry {\n\t\t    this.options.language = new TL.Language(this.options);\n\n\t\t    this._initData(data);\n\t\t} catch(e) {\n\t\t    this.showMessage(this._translateError(e));\n\t\t}\n\t},\n\n\n\t/*  Navigation\n\t================================================== */\n\n\t// Goto slide with id\n\tgoToId: function(id) {\n\t\tif (this.current_id != id) {\n\t\t\tthis.current_id = id;\n\t\t\tthis._timenav.goToId(this.current_id);\n\t\t\tthis._storyslider.goToId(this.current_id, false, true);\n\t\t\tthis.fire(\"change\", {unique_id: this.current_id}, this);\n\t\t}\n\t},\n\n\t// Goto slide n\n\tgoTo: function(n) {\n\t\tif(this.config.title) {\n\t\t\tif(n == 0) {\n\t\t\t\tthis.goToId(this.config.title.unique_id);\n\t\t\t} else {\n\t\t\t\tthis.goToId(this.config.events[n - 1].unique_id);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.goToId(this.config.events[n].unique_id);\n\t\t}\n\t},\n\n\t// Goto first slide\n\tgoToStart: function() {\n\t\tthis.goTo(0);\n\t},\n\n\t// Goto last slide\n\tgoToEnd: function() {\n\t\tvar _n = this.config.events.length - 1;\n\t\tthis.goTo(this.config.title ? _n + 1 : _n);\n\t},\n\n\t// Goto previous slide\n\tgoToPrev: function() {\n\t\tthis.goTo(this._getSlideIndex(this.current_id) - 1);\n\t},\n\n\t// Goto next slide\n\tgoToNext: function() {\n\t\tthis.goTo(this._getSlideIndex(this.current_id) + 1);\n\t},\n\n\t/* Event maniupluation\n\t================================================== */\n\n\t// Add an event\n\tadd: function(data) {\n\t\tvar unique_id = this.config.addEvent(data);\n\n\t\tvar n = this._getEventIndex(unique_id);\n\t\tvar d = this.config.events[n];\n\n\t\tthis._storyslider.createSlide(d, this.config.title ? n+1 : n);\n\t\tthis._storyslider._updateDrawSlides();\n\n\t\tthis._timenav.createMarker(d, n);\n\t\tthis._timenav._updateDrawTimeline(false);\n\n\t\tthis.fire(\"added\", {unique_id: unique_id});\n\t},\n\n\t// Remove an event\n\tremove: function(n) {\n\t\tif(n >= 0  && n < this.config.events.length) {\n\t\t\t// If removing the current, nav to new one first\n\t\t\tif(this.config.events[n].unique_id == this.current_id) {\n\t\t\t\tif(n < this.config.events.length - 1) {\n\t\t\t\t\tthis.goTo(n + 1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.goTo(n - 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar event = this.config.events.splice(n, 1);\n\t\t\tdelete this.config.event_dict[event[0].unique_id];\n\t\t\tthis._storyslider.destroySlide(this.config.title ? n+1 : n);\n\t\t\tthis._storyslider._updateDrawSlides();\n\n\t\t\tthis._timenav.destroyMarker(n);\n\t\t\tthis._timenav._updateDrawTimeline(false);\n\n\t\t\tthis.fire(\"removed\", {unique_id: event[0].unique_id});\n\t\t}\n\t},\n\n\tremoveId: function(id) {\n\t\tthis.remove(this._getEventIndex(id));\n\t},\n\n\t/* Get slide data\n\t================================================== */\n\n\tgetData: function(n) {\n\t\tif(this.config.title) {\n\t\t\tif(n == 0) {\n\t\t\t\treturn this.config.title;\n\t\t\t} else if(n > 0 && n <= this.config.events.length) {\n\t\t\t\treturn this.config.events[n - 1];\n\t\t\t}\n\t\t} else if(n >= 0 && n < this.config.events.length) {\n\t\t\treturn this.config.events[n];\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetDataById: function(id) {\n\t\treturn this.getData(this._getSlideIndex(id));\n\t},\n\n\t/* Get slide object\n\t================================================== */\n\n\tgetSlide: function(n) {\n\t\tif(n >= 0 && n < this._storyslider._slides.length) {\n\t\t\treturn this._storyslider._slides[n];\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetSlideById: function(id) {\n\t\treturn this.getSlide(this._getSlideIndex(id));\n\t},\n\n\tgetCurrentSlide: function() {\n\t\treturn this.getSlideById(this.current_id);\n\t},\n\n\n\t/*  Display\n\t================================================== */\n\tupdateDisplay: function() {\n\t\tif (this.ready) {\n\t\t\tthis._updateDisplay();\n\t\t}\n\t},\n\n  \t/*\n  \t\tCompute the height of the navigation section of the Timeline, taking into account\n  \t\tthe possibility of an explicit height or height percentage, but also honoring the\n  \t\t`timenav_height_min` option value. If `timenav_height` is specified it takes precedence over `timenav_height_percentage` but in either case, if the resultant pixel height is less than `options.timenav_height_min` then the value of `options.timenav_height_min` will be returned. (A minor adjustment is made to the returned value to account for marker padding.)\n\n  \t\tArguments:\n  \t\t@timenav_height (optional): an integer value for the desired height in pixels\n  \t\t@timenav_height_percentage (optional): an integer between 1 and 100\n\n  \t */\n\t_calculateTimeNavHeight: function(timenav_height, timenav_height_percentage) {\n\n\t\tvar height = 0;\n\n\t\tif (timenav_height) {\n\t\t\theight = timenav_height;\n\t\t} else {\n\t\t\tif (this.options.timenav_height_percentage || timenav_height_percentage) {\n\t\t\t\tif (timenav_height_percentage) {\n\t\t\t\t\theight = Math.round((this.options.height/100)*timenav_height_percentage);\n\t\t\t\t} else {\n\t\t\t\t\theight = Math.round((this.options.height/100)*this.options.timenav_height_percentage);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\t// Set new minimum based on how many rows needed\n\t\tif (this._timenav.ready) {\n\t\t\tif (this.options.timenav_height_min < this._timenav.getMinimumHeight()) {\n\t\t\t\tthis.options.timenav_height_min = this._timenav.getMinimumHeight();\n\t\t\t}\n\t\t}\n\n\t\t// If height is less than minimum set it to minimum\n\t\tif (height < this.options.timenav_height_min) {\n\t\t\theight = this.options.timenav_height_min;\n\t\t}\n\n\t\theight = height - (this.options.marker_padding * 2);\n\n\t\treturn height;\n\t},\n\n\t/*  Private Methods\n\t================================================== */\n\n\t// Update View\n\t_updateDisplay: function(timenav_height, animate, d) {\n\t\tvar duration    = this.options.duration,\n\t\tdisplay_class   = this.options.base_class,\n\t\tmenu_position   = 0,\n\t\tself      = this;\n\n\t\tif (d) {\n\t\t\tduration = d;\n\t\t}\n\n\t\t// Update width and height\n\t\tthis.options.width = this._el.container.offsetWidth;\n\t\tthis.options.height = this._el.container.offsetHeight;\n\n\t\t// Check if skinny\n\t\tif (this.options.width <= this.options.skinny_size) {\n\t\t\tdisplay_class += \" tl-skinny\";\n\t\t\tthis.options.layout = \"portrait\";\n\t\t} else if (this.options.width <= this.options.medium_size) {\n\t\t\tdisplay_class += \" tl-medium\";\n\t\t\tthis.options.layout = \"landscape\";\n\t\t} else {\n\t\t\tthis.options.layout = \"landscape\";\n\t\t}\n\n\t\t// Detect Mobile and Update Orientation on Touch devices\n\t\tif (TL.Browser.touch) {\n\t\t\tthis.options.layout = TL.Browser.orientation();\n\t\t}\n\n\t\tif (TL.Browser.mobile) {\n\t\t\tdisplay_class += \" tl-mobile\";\n\t\t\t// Set TimeNav Height\n\t\t\tthis.options.timenav_height = this._calculateTimeNavHeight(timenav_height, this.options.timenav_mobile_height_percentage);\n\t\t} else {\n\t\t\t// Set TimeNav Height\n\t\t\tthis.options.timenav_height = this._calculateTimeNavHeight(timenav_height);\n\t\t}\n\n\t\t// LAYOUT\n\t\tif (this.options.layout == \"portrait\") {\n\t\t\t// Portrait\n\t\t\tdisplay_class += \" tl-layout-portrait\";\n\n\t\t} else {\n\t\t\t// Landscape\n\t\t\tdisplay_class += \" tl-layout-landscape\";\n\n\t\t}\n\n\t\t// Set StorySlider Height\n\t\tthis.options.storyslider_height = (this.options.height - this.options.timenav_height);\n\n\t\t// Positon Menu\n\t\tif (this.options.timenav_position == \"top\") {\n\t\t\tmenu_position = ( Math.ceil(this.options.timenav_height)/2 ) - (this._el.menubar.offsetHeight/2) - (39/2) ;\n\t\t} else {\n\t\t\tmenu_position = Math.round(this.options.storyslider_height + 1 + ( Math.ceil(this.options.timenav_height)/2 ) - (this._el.menubar.offsetHeight/2) - (35/2));\n\t\t}\n\n\n\t\tif (animate) {\n\n\t\t\t// Animate TimeNav\n\n\t\t\t/*\n\t\t\tif (this.animator_timenav) {\n\t\t\tthis.animator_timenav.stop();\n\t\t\t}\n\n\t\t\tthis.animator_timenav = TL.Animate(this._el.timenav, {\n\t\t\theight:   (this.options.timenav_height) + \"px\",\n\t\t\tduration:   duration/4,\n\t\t\teasing:   TL.Ease.easeOutStrong,\n\t\t\tcomplete: function () {\n\t\t\t//self._map.updateDisplay(self.options.width, self.options.timenav_height, animate, d, self.options.menubar_height);\n\t\t\t}\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis._el.timenav.style.height = Math.ceil(this.options.timenav_height) + \"px\";\n\n\t\t\t// Animate StorySlider\n\t\t\tif (this.animator_storyslider) {\n\t\t\t\tthis.animator_storyslider.stop();\n\t\t\t}\n\t\t\tthis.animator_storyslider = TL.Animate(this._el.storyslider, {\n\t\t\t\theight:   this.options.storyslider_height + \"px\",\n\t\t\t\tduration:   duration/2,\n\t\t\t\teasing:   TL.Ease.easeOutStrong\n\t\t\t});\n\n\t\t\t// Animate Menubar\n\t\t\tif (this.animator_menubar) {\n\t\t\t\tthis.animator_menubar.stop();\n\t\t\t}\n\n\t\t\tthis.animator_menubar = TL.Animate(this._el.menubar, {\n\t\t\t\ttop:  menu_position + \"px\",\n\t\t\t\tduration:   duration/2,\n\t\t\t\teasing:   TL.Ease.easeOutStrong\n\t\t\t});\n\n\t\t} else {\n\t\t\t// TimeNav\n\t\t\tthis._el.timenav.style.height = Math.ceil(this.options.timenav_height) + \"px\";\n\n\t\t\t// StorySlider\n\t\t\tthis._el.storyslider.style.height = this.options.storyslider_height + \"px\";\n\n\t\t\t// Menubar\n\t\t\tthis._el.menubar.style.top = menu_position + \"px\";\n\t\t}\n\n\t\tif (this.message) {\n\t\t\tthis.message.updateDisplay(this.options.width, this.options.height);\n\t\t}\n\t\t// Update Component Displays\n\t\tthis._timenav.updateDisplay(this.options.width, this.options.timenav_height, animate);\n\t\tthis._storyslider.updateDisplay(this.options.width, this.options.storyslider_height, animate, this.options.layout);\n\n\t\tif (this.options.language.direction == 'rtl') {\n\t\t\tdisplay_class += ' tl-rtl';\n\t\t}\n\n\n\t\t// Apply class\n\t\tthis._el.container.className = display_class;\n\n\t},\n\n\t// Update hashbookmark in the url bar\n\t_updateHashBookmark: function(id) {\n\t\tvar hash = \"#\" + \"event-\" + id.toString();\n\t\tif (window.location.protocol != 'file:') {\n\t\t\twindow.history.replaceState(null, \"Browsing TimelineJS\", hash);\n\t\t}\n\t\tthis.fire(\"hash_updated\", {unique_id:this.current_id, hashbookmark:\"#\" + \"event-\" + id.toString()}, this);\n\t},\n\n\t/*  Init\n\t================================================== */\n\t// Initialize the data\n\t_initData: function(data) {\n\t\tvar self = this;\n\n\t\tif (typeof data == 'string') {\n\t\t\tvar self = this;\n\t\t\tTL.ConfigFactory.makeConfig(data, function(config) {\n\t\t\t\tself.setConfig(config);\n\t\t\t});\n\t\t} else if (TL.TimelineConfig == data.constructor) {\n\t\t\tthis.setConfig(data);\n\t\t} else {\n\t\t\tthis.setConfig(new TL.TimelineConfig(data));\n\t\t}\n\t},\n\n\tsetConfig: function(config) {\n\t\tthis.config = config;\n\t\tthis.config.validate();\n\t\tthis._validateOptions();\n\t\tif (this.config.isValid()) {\n\t\t    try {\n\t\t\t    this._onDataLoaded();\n\t\t\t} catch(e) {\n\t\t\t    this.showMessage(\"<strong>\"+ this._('error') +\":</strong> \" + this._translateError(e));\n\t\t\t}\n\t\t} else {\n\t\t    var translated_errs = [];\n\n\t\t    for(var i = 0, errs = this.config.getErrors(); i < errs.length; i++) {\n\t\t        translated_errs.push(this._translateError(errs[i]));\n\t\t    }\n\n\t\t\tthis.showMessage(\"<strong>\"+ this._('error') +\":</strong> \" + translated_errs.join('<br>'));\n\t\t\t// should we set 'self.ready'? if not, it won't resize,\n\t\t\t// but most resizing would only work\n\t\t\t// if more setup happens\n\t\t}\n\t},\n\t_validateOptions: function() {\n\t\t// assumes that this.options and this.config have been set.\n\t\tvar INTEGER_PROPERTIES = ['timenav_height', 'timenav_height_min', 'marker_height_min', 'marker_width_min', 'marker_padding', 'start_at_slide', 'slide_padding_lr'  ];\n\n\t\tfor (var i = 0; i < INTEGER_PROPERTIES.length; i++) {\n\t\t\t\tvar opt = INTEGER_PROPERTIES[i];\n\t\t\t\tvar value = this.options[opt];\n\t\t\t\tvalid = true;\n\t\t\t\tif (typeof(value) == 'number') {\n\t\t\t\t\tvalid = (value == parseInt(value))\n\t\t\t\t} else if (typeof(value) == \"string\") {\n\t\t\t\t\tvalid = (value.match(/^\\s*(\\-?\\d+)?\\s*$/));\n\t\t\t\t}\n\t\t\t\tif (!valid) {\n\t\t\t\t\tthis.config.logError({ message_key: 'invalid_integer_option', detail: opt });\n\t\t\t\t}\n\t\t}\n\t},\n\t// Initialize the layout\n\t_initLayout: function () {\n\t\tvar self = this;\n\n        this.message.removeFrom(this._el.container);\n\t\tthis._el.container.innerHTML = \"\";\n\n\t\t// Create Layout\n\t\tif (this.options.timenav_position == \"top\") {\n\t\t\tthis._el.timenav\t\t= TL.Dom.create('div', 'tl-timenav', this._el.container);\n\t\t\tthis._el.storyslider\t= TL.Dom.create('div', 'tl-storyslider', this._el.container);\n\t\t} else {\n\t\t\tthis._el.storyslider  \t= TL.Dom.create('div', 'tl-storyslider', this._el.container);\n\t\t\tthis._el.timenav\t\t= TL.Dom.create('div', 'tl-timenav', this._el.container);\n\t\t}\n\n\t\tthis._el.menubar\t\t\t= TL.Dom.create('div', 'tl-menubar', this._el.container);\n\n\n\t\t// Initial Default Layout\n\t\tthis.options.width        = this._el.container.offsetWidth;\n\t\tthis.options.height       = this._el.container.offsetHeight;\n\t\t// this._el.storyslider.style.top  = \"1px\";\n\n\t\t// Set TimeNav Height\n\t\tthis.options.timenav_height = this._calculateTimeNavHeight(this.options.timenav_height);\n\n\t\t// Create TimeNav\n\t\tthis._timenav = new TL.TimeNav(this._el.timenav, this.config, this.options);\n\t\tthis._timenav.on('loaded', this._onTimeNavLoaded, this);\n\t\tthis._timenav.on('update_timenav_min', this._updateTimeNavHeightMin, this);\n\t\tthis._timenav.options.height = this.options.timenav_height;\n\t\tthis._timenav.init();\n\n        // intial_zoom cannot be applied before the timenav has been created\n        if (this.options.initial_zoom) {\n            // at this point, this.options refers to the merged set of options\n            this.setZoom(this.options.initial_zoom);\n        }\n\n\t\t// Create StorySlider\n\t\tthis._storyslider = new TL.StorySlider(this._el.storyslider, this.config, this.options);\n\t\tthis._storyslider.on('loaded', this._onStorySliderLoaded, this);\n\t\tthis._storyslider.init();\n\n\t\t// Create Menu Bar\n\t\tthis._menubar = new TL.MenuBar(this._el.menubar, this._el.container, this.options);\n\n\t\t// LAYOUT\n\t\tif (this.options.layout == \"portrait\") {\n\t\t\tthis.options.storyslider_height = (this.options.height - this.options.timenav_height - 1);\n\t\t} else {\n\t\t\tthis.options.storyslider_height = (this.options.height - 1);\n\t\t}\n\n\n\t\t// Update Display\n\t\tthis._updateDisplay(this._timenav.options.height, true, 2000);\n\n\t},\n\n  /* Depends upon _initLayout because these events are on things the layout initializes */\n\t_initEvents: function () {\n\t\t// TimeNav Events\n\t\tthis._timenav.on('change', this._onTimeNavChange, this);\n\t\tthis._timenav.on('zoomtoggle', this._onZoomToggle, this);\n\n\t\t// StorySlider Events\n\t\tthis._storyslider.on('change', this._onSlideChange, this);\n\t\tthis._storyslider.on('colorchange', this._onColorChange, this);\n\t\tthis._storyslider.on('nav_next', this._onStorySliderNext, this);\n\t\tthis._storyslider.on('nav_previous', this._onStorySliderPrevious, this);\n\n\t\t// Menubar Events\n\t\tthis._menubar.on('zoom_in', this._onZoomIn, this);\n\t\tthis._menubar.on('zoom_out', this._onZoomOut, this);\n\t\tthis._menubar.on('back_to_start', this._onBackToStart, this);\n\n\t},\n\n\t/* Analytics\n\t================================================== */\n\t_initGoogleAnalytics: function() {\n\t\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n\t\tga('create', this.options.ga_property_id, 'auto');\n\t\tga('set', 'anonymizeIp', true);\n\t},\n\n\t_initAnalytics: function() {\n\t\tif (this.options.ga_property_id === null) { return; }\n\t\tthis._initGoogleAnalytics();\n        ga('send', 'pageview');\n\t\tvar events = this.options.track_events;\n\t\tfor (i=0; i < events.length; i++) {\n\t\t\tvar event_ = events[i];\n\t\t\tthis.addEventListener(event_, function(e) {\n\t\t\t\tga('send', 'event', e.type, 'clicked');\n\t\t\t});\n\t\t}\n\t},\n\n\t_onZoomToggle: function(e) {\n\t\tif (e.zoom == \"in\") {\n\t\t\tthis._menubar.toogleZoomIn(e.show);\n\t\t} else if (e.zoom == \"out\") {\n\t\t\tthis._menubar.toogleZoomOut(e.show);\n\t\t}\n\n\t},\n\n\t/* Get index of event by id\n\t================================================== */\n\t_getEventIndex: function(id) {\n\t\tfor(var i = 0; i < this.config.events.length; i++) {\n\t\t\tif(id == this.config.events[i].unique_id) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\t/*  Get index of slide by id\n\t================================================== */\n\t_getSlideIndex: function(id) {\n\t\tif(this.config.title && this.config.title.unique_id == id) {\n\t\t\treturn 0;\n\t\t}\n\t\tfor(var i = 0; i < this.config.events.length; i++) {\n\t\t\tif(id == this.config.events[i].unique_id) {\n\t\t\t\treturn this.config.title ? i+1 : i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\t/*  Events\n\t================================================== */\n\n\t_onDataLoaded: function(e) {\n\t\tthis.fire(\"dataloaded\");\n\t\tthis._initLayout();\n\t\tthis._initEvents();\n\t\tthis._initAnalytics();\n\t\tif (this.message) {\n\t\t\tthis.message.hide();\n\t\t}\n\n\t\tthis.ready = true;\n\n\t},\n\n\tshowMessage: function(msg) {\n\t\tif (this.message) {\n\t\t\tthis.message.updateMessage(msg);\n\t\t} else {\n\t\t\ttrace(\"No message display available.\")\n\t\t\ttrace(msg);\n\t\t}\n\t},\n\n\t_onColorChange: function(e) {\n\t\tthis.fire(\"color_change\", {unique_id:this.current_id}, this);\n\t\tif (e.color || e.image) {\n\n\t\t} else {\n\n\t\t}\n\t},\n\n\t_onSlideChange: function(e) {\n\t\tif (this.current_id != e.unique_id) {\n\t\t\tthis.current_id = e.unique_id;\n\t\t\tthis._timenav.goToId(this.current_id);\n\t\t\tthis._onChange(e);\n\t\t}\n\t},\n\n\t_onTimeNavChange: function(e) {\n\t\tif (this.current_id != e.unique_id) {\n\t\t\tthis.current_id = e.unique_id;\n\t\t\tthis._storyslider.goToId(this.current_id);\n\t\t\tthis._onChange(e);\n\t\t}\n\t},\n\n\t_onChange: function(e) {\n\t\tthis.fire(\"change\", {unique_id:this.current_id}, this);\n\t\tif (this.options.hash_bookmark && this.current_id) {\n\t\t\tthis._updateHashBookmark(this.current_id);\n\t\t}\n\t},\n\n\t_onBackToStart: function(e) {\n\t\tthis._storyslider.goTo(0);\n\t\tthis.fire(\"back_to_start\", {unique_id:this.current_id}, this);\n\t},\n\n\t/**\n\t * Zoom in and zoom out should be part of the public API.\n\t */\n\tzoomIn: function() {\n\t    this._timenav.zoomIn();\n\t},\n\tzoomOut: function() {\n\t    this._timenav.zoomOut();\n\t},\n\n\tsetZoom: function(level) {\n\t    this._timenav.setZoom(level);\n\t},\n\n\t_onZoomIn: function(e) {\n\t\tthis._timenav.zoomIn();\n\t\tthis.fire(\"zoom_in\", {zoom_level:this._timenav.options.scale_factor}, this);\n\t},\n\n\t_onZoomOut: function(e) {\n\t\tthis._timenav.zoomOut();\n\t\tthis.fire(\"zoom_out\", {zoom_level:this._timenav.options.scale_factor}, this);\n\t},\n\n\t_onTimeNavLoaded: function() {\n\t\tthis._loaded.timenav = true;\n\t\tthis._onLoaded();\n\t},\n\n\t_onStorySliderLoaded: function() {\n\t\tthis._loaded.storyslider = true;\n\t\tthis._onLoaded();\n\t},\n\n\t_onStorySliderNext: function(e) {\n\t\tthis.fire(\"nav_next\", e);\n\t},\n\n\t_onStorySliderPrevious: function(e) {\n\t\tthis.fire(\"nav_previous\", e);\n\t},\n\n\t_onLoaded: function() {\n\t\tif (this._loaded.storyslider && this._loaded.timenav) {\n\t\t\tthis.fire(\"loaded\", this.config);\n\t\t\t// Go to proper slide\n\t\t\tif (this.options.hash_bookmark && window.location.hash != \"\") {\n\t\t\t\tthis.goToId(window.location.hash.replace(\"#event-\", \"\"));\n\t\t\t} else {\n\t\t\t\tif( TL.Util.isTrue(this.options.start_at_end) || this.options.start_at_slide > this.config.events.length ) {\n\t\t\t\t\tthis.goToEnd();\n\t\t\t\t} else {\n\t\t\t\t\tthis.goTo(this.options.start_at_slide);\n\t\t\t\t}\n\t\t\t\tif (this.options.hash_bookmark ) {\n\t\t\t\t\tthis._updateHashBookmark(this.current_id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n});\n\nTL.Timeline.source_path = (function() {\n\tvar script_tags = document.getElementsByTagName('script');\n\tvar src = script_tags[script_tags.length-1].src;\n\treturn src.substr(0,src.lastIndexOf('/'));\n})();\n\n"]}